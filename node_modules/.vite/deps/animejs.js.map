{
  "version": 3,
  "sources": ["../../animejs/lib/anime.esm.js"],
  "sourcesContent": ["/**\r\n * anime.js - ESM\r\n * @version v4.1.2\r\n * @author Julian Garnier\r\n * @license MIT\r\n * @copyright (c) 2025 Julian Garnier\r\n * @see https://animejs.com\r\n */\r\n\r\n// Global types ///////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {Object} DefaultsParams\r\n * @property {Number|String} [id]\r\n * @property {PercentageKeyframes|DurationKeyframes} [keyframes]\r\n * @property {EasingParam} [playbackEase]\r\n * @property {Number} [playbackRate]\r\n * @property {Number} [frameRate]\r\n * @property {Number|Boolean} [loop]\r\n * @property {Boolean} [reversed]\r\n * @property {Boolean} [alternate]\r\n * @property {Boolean|ScrollObserver} [autoplay]\r\n * @property {Number|FunctionValue} [duration]\r\n * @property {Number|FunctionValue} [delay]\r\n * @property {Number} [loopDelay]\r\n * @property {EasingParam} [ease]\r\n * @property {'none'|'replace'|'blend'|compositionTypes} [composition]\r\n * @property {(v: any) => any} [modifier]\r\n * @property {(tickable: Tickable) => void} [onBegin]\r\n * @property {(tickable: Tickable) => void} [onBeforeUpdate]\r\n * @property {(tickable: Tickable) => void} [onUpdate]\r\n * @property {(tickable: Tickable) => void} [onLoop]\r\n * @property {(tickable: Tickable) => void} [onPause]\r\n * @property {(tickable: Tickable) => void} [onComplete]\r\n * @property {(renderable: Renderable) => void} [onRender]\r\n */\r\n\r\n/** @typedef {JSAnimation|Timeline} Renderable */\r\n/** @typedef {Timer|Renderable} Tickable */\r\n/** @typedef {Timer&JSAnimation&Timeline} CallbackArgument */\r\n/** @typedef {Animatable|Tickable|Draggable|ScrollObserver|TextSplitter|Scope} Revertible */\r\n\r\n// Stagger types //////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @callback StaggerFunction\r\n * @param {Target} [target]\r\n * @param {Number} [index]\r\n * @param {Number} [length]\r\n * @param {Timeline} [tl]\r\n * @return {Number|String}\r\n */\r\n\r\n/**\r\n * @typedef  {Object} StaggerParams\r\n * @property {Number|String} [start]\r\n * @property {Number|'first'|'center'|'last'|'random'} [from]\r\n * @property {Boolean} [reversed]\r\n * @property {Array.<Number>} [grid]\r\n * @property {('x'|'y')} [axis]\r\n * @property {String|StaggerFunction} [use]\r\n * @property {Number} [total]\r\n * @property {EasingParam} [ease]\r\n * @property {TweenModifier} [modifier]\r\n */\r\n\r\n// Eases types ////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @callback EasingFunction\r\n * @param {Number} time\r\n * @return {Number}\r\n */\r\n\r\n/**\r\n * @typedef {('linear'|'linear(x1, x2 25%, x3)'|'in'|'out'|'inOut'|'inQuad'|'outQuad'|'inOutQuad'|'inCubic'|'outCubic'|'inOutCubic'|'inQuart'|'outQuart'|'inOutQuart'|'inQuint'|'outQuint'|'inOutQuint'|'inSine'|'outSine'|'inOutSine'|'inCirc'|'outCirc'|'inOutCirc'|'inExpo'|'outExpo'|'inOutExpo'|'inBounce'|'outBounce'|'inOutBounce'|'inBack'|'outBack'|'inOutBack'|'inElastic'|'outElastic'|'inOutElastic'|'irregular'|'cubicBezier'|'steps'|'in(p = 1.675)'|'out(p = 1.675)'|'inOut(p = 1.675)'|'inBack(overshoot = 1.70158)'|'outBack(overshoot = 1.70158)'|'inOutBack(overshoot = 1.70158)'|'inElastic(amplitude = 1, period = .3)'|'outElastic(amplitude = 1, period = .3)'|'inOutElastic(amplitude = 1, period = .3)'|'irregular(length = 10, randomness = 1)'|'cubicBezier(x1, y1, x2, y2)'|'steps(steps = 10)')} EaseStringParamNames\r\n */\r\n\r\n// A hack to get both ease names suggestions AND allow any strings\r\n// https://github.com/microsoft/TypeScript/issues/29729#issuecomment-460346421\r\n/** @typedef {(String & {})|EaseStringParamNames|EasingFunction|Spring} EasingParam */\r\n\r\n/** @typedef {HTMLElement|SVGElement} DOMTarget */\r\n/** @typedef {Record<String, any>} JSTarget */\r\n/** @typedef {DOMTarget|JSTarget} Target */\r\n/** @typedef {Target|NodeList|String} TargetSelector */\r\n/** @typedef {DOMTarget|NodeList|String} DOMTargetSelector */\r\n/** @typedef {Array.<DOMTargetSelector>|DOMTargetSelector} DOMTargetsParam */\r\n/** @typedef {Array.<DOMTarget>} DOMTargetsArray */\r\n/** @typedef {Array.<JSTarget>|JSTarget} JSTargetsParam */\r\n/** @typedef {Array.<JSTarget>} JSTargetsArray */\r\n/** @typedef {Array.<TargetSelector>|TargetSelector} TargetsParam */\r\n/** @typedef {Array.<Target>} TargetsArray */\r\n\r\n // Callback types ////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @template T\r\n * @callback Callback\r\n * @param {T} self - Returns itself\r\n * @param {PointerEvent} [e]\r\n * @return {*}\r\n */\r\n\r\n/**\r\n * @template {object} T\r\n * @typedef {Object} TickableCallbacks\r\n * @property {Callback<T>} [onBegin]\r\n * @property {Callback<T>} [onBeforeUpdate]\r\n * @property {Callback<T>} [onUpdate]\r\n * @property {Callback<T>} [onLoop]\r\n * @property {Callback<T>} [onPause]\r\n * @property {Callback<T>} [onComplete]\r\n */\r\n\r\n/**\r\n * @template {object} T\r\n * @typedef {Object} RenderableCallbacks\r\n * @property {Callback<T>} [onRender]\r\n */\r\n\r\n// Timer types ////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {Object} TimerOptions\r\n * @property {Number|String} [id]\r\n * @property {TweenParamValue} [duration]\r\n * @property {TweenParamValue} [delay]\r\n * @property {Number} [loopDelay]\r\n * @property {Boolean} [reversed]\r\n * @property {Boolean} [alternate]\r\n * @property {Boolean|Number} [loop]\r\n * @property {Boolean|ScrollObserver} [autoplay]\r\n * @property {Number} [frameRate]\r\n * @property {Number} [playbackRate]\r\n */\r\n\r\n/**\r\n\r\n/**\r\n * @typedef {TimerOptions & TickableCallbacks<Timer>} TimerParams\r\n */\r\n\r\n// Tween types ////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @callback FunctionValue\r\n * @param {Target} target - The animated target\r\n * @param {Number} index - The target index\r\n * @param {Number} length - The total number of animated targets\r\n * @return {Number|String|TweenObjectValue|Array.<Number|String|TweenObjectValue>}\r\n */\r\n\r\n/**\r\n * @callback TweenModifier\r\n * @param {Number} value - The animated value\r\n * @return {Number|String}\r\n */\r\n\r\n/** @typedef {[Number, Number, Number, Number]} ColorArray */\r\n\r\n/**\r\n * @typedef {Object} Tween\r\n * @property {Number} id\r\n * @property {JSAnimation} parent\r\n * @property {String} property\r\n * @property {Target} target\r\n * @property {String|Number} _value\r\n * @property {Function|null} _func\r\n * @property {EasingFunction} _ease\r\n * @property {Array.<Number>} _fromNumbers\r\n * @property {Array.<Number>} _toNumbers\r\n * @property {Array.<String>} _strings\r\n * @property {Number} _fromNumber\r\n * @property {Number} _toNumber\r\n * @property {Array.<Number>} _numbers\r\n * @property {Number} _number\r\n * @property {String} _unit\r\n * @property {TweenModifier} _modifier\r\n * @property {Number} _currentTime\r\n * @property {Number} _delay\r\n * @property {Number} _updateDuration\r\n * @property {Number} _startTime\r\n * @property {Number} _changeDuration\r\n * @property {Number} _absoluteStartTime\r\n * @property {tweenTypes} _tweenType\r\n * @property {valueTypes} _valueType\r\n * @property {Number} _composition\r\n * @property {Number} _isOverlapped\r\n * @property {Number} _isOverridden\r\n * @property {Number} _renderTransforms\r\n * @property {Tween} _prevRep\r\n * @property {Tween} _nextRep\r\n * @property {Tween} _prevAdd\r\n * @property {Tween} _nextAdd\r\n * @property {Tween} _prev\r\n * @property {Tween} _next\r\n */\r\n\r\n/**\r\n * @typedef TweenDecomposedValue\r\n * @property {Number} t - Type\r\n * @property {Number} n - Single number value\r\n * @property {String} u - Value unit\r\n * @property {String} o - Value operator\r\n * @property {Array.<Number>} d - Array of Numbers (in case of complex value type)\r\n * @property {Array.<String>} s - Strings (in case of complex value type)\r\n */\r\n\r\n/** @typedef {{_head: null|Tween, _tail: null|Tween}} TweenPropertySiblings */\r\n/** @typedef {Record<String, TweenPropertySiblings>} TweenLookups */\r\n/** @typedef {WeakMap.<Target, TweenLookups>} TweenReplaceLookups */\r\n/** @typedef {Map.<Target, TweenLookups>} TweenAdditiveLookups */\r\n\r\n// Animation types ////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {Number|String|FunctionValue} TweenParamValue\r\n */\r\n\r\n/**\r\n * @typedef {TweenParamValue|[TweenParamValue, TweenParamValue]} TweenPropValue\r\n */\r\n\r\n/**\r\n * @typedef {(String & {})|'none'|'replace'|'blend'|compositionTypes} TweenComposition\r\n */\r\n\r\n/**\r\n * @typedef {Object} TweenParamsOptions\r\n * @property {TweenParamValue} [duration]\r\n * @property {TweenParamValue} [delay]\r\n * @property {EasingParam} [ease]\r\n * @property {TweenModifier} [modifier]\r\n * @property {TweenComposition} [composition]\r\n */\r\n\r\n/**\r\n * @typedef {Object} TweenValues\r\n * @property {TweenParamValue} [from]\r\n * @property {TweenPropValue} [to]\r\n * @property {TweenPropValue} [fromTo]\r\n */\r\n\r\n/**\r\n * @typedef {TweenParamsOptions & TweenValues} TweenKeyValue\r\n */\r\n\r\n/**\r\n * @typedef {Array.<TweenKeyValue|TweenPropValue>} ArraySyntaxValue\r\n */\r\n\r\n/**\r\n * @typedef {TweenParamValue|ArraySyntaxValue|TweenKeyValue} TweenOptions\r\n */\r\n\r\n/**\r\n * @typedef {Partial<{to: TweenParamValue|Array.<TweenParamValue>; from: TweenParamValue|Array.<TweenParamValue>; fromTo: TweenParamValue|Array.<TweenParamValue>;}>} TweenObjectValue\r\n */\r\n\r\n/**\r\n * @typedef {Object} PercentageKeyframeOptions\r\n * @property {EasingParam} [ease]\r\n */\r\n\r\n/**\r\n * @typedef {Record<String, TweenParamValue>} PercentageKeyframeParams\r\n */\r\n\r\n/**\r\n * @typedef {Record<String, PercentageKeyframeParams & PercentageKeyframeOptions>} PercentageKeyframes\r\n */\r\n\r\n/**\r\n * @typedef {Array<Record<String, TweenOptions | TweenModifier | boolean> & TweenParamsOptions>} DurationKeyframes\r\n */\r\n\r\n/**\r\n * @typedef {Object} AnimationOptions\r\n * @property {PercentageKeyframes|DurationKeyframes} [keyframes]\r\n * @property {EasingParam} [playbackEase]\r\n */\r\n\r\n// TODO: Currently setting TweenModifier to the intersected Record<> makes the FunctionValue type target param any if only one parameter is set\r\n/**\r\n * @typedef {Record<String, TweenOptions | Callback<JSAnimation> | TweenModifier | boolean | PercentageKeyframes | DurationKeyframes | ScrollObserver> & TimerOptions & AnimationOptions & TweenParamsOptions & TickableCallbacks<JSAnimation> & RenderableCallbacks<JSAnimation>} AnimationParams\r\n */\r\n\r\n// Timeline types /////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {Object} TimelineOptions\r\n * @property {DefaultsParams} [defaults]\r\n * @property {EasingParam} [playbackEase]\r\n */\r\n\r\n/**\r\n * @typedef {TimerOptions & TimelineOptions & TickableCallbacks<Timeline> & RenderableCallbacks<Timeline>} TimelineParams\r\n */\r\n\r\n// Animatable types ///////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @callback AnimatablePropertySetter\r\n * @param  {Number|Array.<Number>} to\r\n * @param  {Number} [duration]\r\n * @param  {EasingParam} [ease]\r\n * @return {AnimatableObject}\r\n */\r\n\r\n/**\r\n * @callback AnimatablePropertyGetter\r\n * @return {Number|Array.<Number>}\r\n */\r\n\r\n/**\r\n * @typedef {AnimatablePropertySetter & AnimatablePropertyGetter} AnimatableProperty\r\n */\r\n\r\n/**\r\n * @typedef {Animatable & Record<String, AnimatableProperty>} AnimatableObject\r\n */\r\n\r\n/**\r\n * @typedef {Object} AnimatablePropertyParamsOptions\r\n * @property {String} [unit]\r\n * @property {TweenParamValue} [duration]\r\n * @property {EasingParam} [ease]\r\n * @property {TweenModifier} [modifier]\r\n * @property {TweenComposition} [composition]\r\n */\r\n\r\n/**\r\n * @typedef {Record<String, TweenParamValue | EasingParam | TweenModifier | TweenComposition | AnimatablePropertyParamsOptions> & AnimatablePropertyParamsOptions} AnimatableParams\r\n */\r\n\r\n// Scope types ////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {Object} ReactRef\r\n * @property {HTMLElement|SVGElement|null} [current]\r\n */\r\n\r\n/**\r\n * @typedef {Object} AngularRef\r\n * @property {HTMLElement|SVGElement} [nativeElement]\r\n */\r\n\r\n/**\r\n * @typedef {Object} ScopeParams\r\n * @property {DOMTargetSelector|ReactRef|AngularRef} [root]\r\n * @property {DefaultsParams} [defaults]\r\n * @property {Record<String, String>} [mediaQueries]\r\n */\r\n\r\n/**\r\n * @template T\r\n * @callback ScopedCallback\r\n * @param {Scope} scope\r\n * @return {T}\r\n */\r\n\r\n/**\r\n * @callback ScopeCleanupCallback\r\n * @param {Scope} [scope]\r\n */\r\n\r\n/**\r\n * @callback ScopeConstructorCallback\r\n * @param {Scope} [scope]\r\n * @return {ScopeCleanupCallback|void}\r\n */\r\n\r\n/**\r\n * @callback ScopeMethod\r\n * @param {...*} args\r\n * @return {ScopeCleanupCallback|void}\r\n */\r\n\r\n// Draggable types ////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {Object} DraggableAxisParam\r\n * @property {String} [mapTo]\r\n * @property {TweenModifier} [modifier]\r\n * @property {TweenComposition} [composition]\r\n * @property {Number|Array<Number>|((draggable: Draggable) => Number|Array<Number>)} [snap]\r\n */\r\n\r\n/**\r\n * @typedef {Object} DraggableCursorParams\r\n * @property {String} [onHover]\r\n * @property {String} [onGrab]\r\n */\r\n\r\n/**\r\n * @typedef {Object} DraggableParams\r\n * @property {DOMTargetSelector} [trigger]\r\n * @property {DOMTargetSelector|Array<Number>|((draggable: Draggable) => DOMTargetSelector|Array<Number>)} [container]\r\n * @property {Boolean|DraggableAxisParam} [x]\r\n * @property {Boolean|DraggableAxisParam} [y]\r\n * @property {TweenModifier} [modifier]\r\n * @property {Number|Array<Number>|((draggable: Draggable) => Number|Array<Number>)} [snap]\r\n * @property {Number|Array<Number>|((draggable: Draggable) => Number|Array<Number>)} [containerPadding]\r\n * @property {Number|((draggable: Draggable) => Number)} [containerFriction]\r\n * @property {Number|((draggable: Draggable) => Number)} [releaseContainerFriction]\r\n * @property {Number|((draggable: Draggable) => Number)} [dragSpeed]\r\n * @property {Number|((draggable: Draggable) => Number)} [scrollSpeed]\r\n * @property {Number|((draggable: Draggable) => Number)} [scrollThreshold]\r\n * @property {Number|((draggable: Draggable) => Number)} [minVelocity]\r\n * @property {Number|((draggable: Draggable) => Number)} [maxVelocity]\r\n * @property {Number|((draggable: Draggable) => Number)} [velocityMultiplier]\r\n * @property {Number} [releaseMass]\r\n * @property {Number} [releaseStiffness]\r\n * @property {Number} [releaseDamping]\r\n * @property {Boolean} [releaseDamping]\r\n * @property {EasingParam} [releaseEase]\r\n * @property {Boolean|DraggableCursorParams|((draggable: Draggable) => Boolean|DraggableCursorParams)} [cursor]\r\n * @property {Callback<Draggable>} [onGrab]\r\n * @property {Callback<Draggable>} [onDrag]\r\n * @property {Callback<Draggable>} [onRelease]\r\n * @property {Callback<Draggable>} [onUpdate]\r\n * @property {Callback<Draggable>} [onSettle]\r\n * @property {Callback<Draggable>} [onSnap]\r\n * @property {Callback<Draggable>} [onResize]\r\n * @property {Callback<Draggable>} [onAfterResize]\r\n */\r\n\r\n// Text types /////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {Object} splitTemplateParams\r\n * @property {false|String} [class]\r\n * @property {Boolean|'hidden'|'clip'|'visible'|'scroll'|'auto'} [wrap]\r\n * @property {Boolean|'top'|'right'|'bottom'|'left'|'center'} [clone]\r\n */\r\n\r\n/**\r\n * @typedef {Boolean|String} SplitValue\r\n */\r\n\r\n/**\r\n * @callback SplitFunctionValue\r\n * @param {Node|HTMLElement} [value]\r\n * @return String\r\n */\r\n\r\n/**\r\n * @typedef {Object} TextSplitterParams\r\n * @property {SplitValue|splitTemplateParams|SplitFunctionValue} [lines]\r\n * @property {SplitValue|splitTemplateParams|SplitFunctionValue} [words]\r\n * @property {SplitValue|splitTemplateParams|SplitFunctionValue} [chars]\r\n * @property {Boolean} [accessible]\r\n * @property {Boolean} [includeSpaces]\r\n * @property {Boolean} [debug]\r\n */\r\n\r\n// SVG types //////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * @typedef {SVGGeometryElement & {\r\n *   setAttribute(name: 'draw', value: `${number} ${number}`): void;\r\n *   draw: `${number} ${number}`;\r\n * }} DrawableSVGGeometry\r\n */\r\n\r\n\r\n// Environments\r\n\r\n// TODO: Do we need to check if we're running inside a worker ?\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\n/** @type {Window & {AnimeJS: Array}|null} */\r\nconst win = isBrowser ? /** @type {Window & {AnimeJS: Array}} */(/** @type {unknown} */(window)) : null;\r\n\r\n/** @type {Document|null} */\r\nconst doc = isBrowser ? document : null;\r\n\r\n// Enums\r\n\r\n/** @enum {Number} */\r\nconst tweenTypes = {\r\n  OBJECT: 0,\r\n  ATTRIBUTE: 1,\r\n  CSS: 2,\r\n  TRANSFORM: 3,\r\n  CSS_VAR: 4,\r\n};\r\n\r\n/** @enum {Number} */\r\nconst valueTypes = {\r\n  NUMBER: 0,\r\n  UNIT: 1,\r\n  COLOR: 2,\r\n  COMPLEX: 3,\r\n};\r\n\r\n/** @enum {Number} */\r\nconst tickModes = {\r\n  NONE: 0,\r\n  AUTO: 1,\r\n  FORCE: 2,\r\n};\r\n\r\n/** @enum {Number} */\r\nconst compositionTypes = {\r\n  replace: 0,\r\n  none: 1,\r\n  blend: 2,\r\n};\r\n\r\n// Cache symbols\r\n\r\nconst isRegisteredTargetSymbol = Symbol();\r\nconst isDomSymbol = Symbol();\r\nconst isSvgSymbol = Symbol();\r\nconst transformsSymbol = Symbol();\r\nconst morphPointsSymbol = Symbol();\r\nconst proxyTargetSymbol = Symbol();\r\n\r\n// Numbers\r\n\r\nconst minValue = 1e-11;\r\nconst maxValue = 1e12;\r\nconst K = 1e3;\r\nconst maxFps = 120;\r\n\r\n// Strings\r\n\r\nconst emptyString = '';\r\nconst shortTransforms = /*#__PURE__*/ (() => {\r\n  const map = new Map();\r\n  map.set('x', 'translateX');\r\n  map.set('y', 'translateY');\r\n  map.set('z', 'translateZ');\r\n  return map;\r\n})();\r\n\r\nconst validTransforms = [\r\n  'translateX',\r\n  'translateY',\r\n  'translateZ',\r\n  'rotate',\r\n  'rotateX',\r\n  'rotateY',\r\n  'rotateZ',\r\n  'scale',\r\n  'scaleX',\r\n  'scaleY',\r\n  'scaleZ',\r\n  'skew',\r\n  'skewX',\r\n  'skewY',\r\n  'perspective',\r\n  'matrix',\r\n  'matrix3d',\r\n];\r\n\r\nconst transformsFragmentStrings = /*#__PURE__*/ validTransforms.reduce((a, v) => ({...a, [v]: v + '('}), {});\r\n\r\n// Functions\r\n\r\n/** @return {void} */\r\nconst noop = () => {};\r\n\r\n// Regex\r\n\r\nconst hexTestRgx = /(^#([\\da-f]{3}){1,2}$)|(^#([\\da-f]{4}){1,2}$)/i;\r\nconst rgbExecRgx = /rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i;\r\nconst rgbaExecRgx = /rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)\\s*\\)/i;\r\nconst hslExecRgx = /hsl\\(\\s*(-?\\d+|-?\\d*.\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*\\)/i;\r\nconst hslaExecRgx = /hsla\\(\\s*(-?\\d+|-?\\d*.\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)\\s*\\)/i;\r\n// export const digitWithExponentRgx = /[-+]?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?/g;\r\nconst digitWithExponentRgx = /[-+]?\\d*\\.?\\d+(?:e[-+]?\\d)?/gi;\r\n// export const unitsExecRgx = /^([-+]?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?)+([a-z]+|%)$/i;\r\nconst unitsExecRgx = /^([-+]?\\d*\\.?\\d+(?:e[-+]?\\d+)?)([a-z]+|%)$/i;\r\nconst lowerCaseRgx = /([a-z])([A-Z])/g;\r\nconst transformsExecRgx = /(\\w+)(\\([^)]+\\)+)/g; // Match inline transforms with cacl() values, returns the value wrapped in ()\r\nconst relativeValuesExecRgx = /(\\*=|\\+=|-=)/;\r\n\r\n\r\n\r\n\r\n/** @type {DefaultsParams} */\r\nconst defaults = {\r\n  id: null,\r\n  keyframes: null,\r\n  playbackEase: null,\r\n  playbackRate: 1,\r\n  frameRate: maxFps,\r\n  loop: 0,\r\n  reversed: false,\r\n  alternate: false,\r\n  autoplay: true,\r\n  duration: K,\r\n  delay: 0,\r\n  loopDelay: 0,\r\n  ease: 'out(2)',\r\n  composition: compositionTypes.replace,\r\n  modifier: v => v,\r\n  onBegin: noop,\r\n  onBeforeUpdate: noop,\r\n  onUpdate: noop,\r\n  onLoop: noop,\r\n  onPause: noop,\r\n  onComplete: noop,\r\n  onRender: noop,\r\n};\r\n\r\nconst scope = {\r\n  /** @type {Scope} */\r\n  current: null,\r\n  /** @type {Document|DOMTarget} */\r\n  root: doc,\r\n};\r\n\r\nconst globals = {\r\n  /** @type {DefaultsParams} */\r\n  defaults,\r\n  /** @type {Number} */\r\n  precision: 4,\r\n  /** @type {Number} */\r\n  timeScale: 1,\r\n  /** @type {Number} */\r\n  tickThreshold: 200,\r\n};\r\n\r\nconst globalVersions = { version: '4.1.2', engine: null };\r\n\r\nif (isBrowser) {\r\n  if (!win.AnimeJS) win.AnimeJS = [];\r\n  win.AnimeJS.push(globalVersions);\r\n}\r\n\r\n// Strings\r\n\r\n/**\r\n * @param  {String} str\r\n * @return {String}\r\n */\r\nconst toLowerCase = str => str.replace(lowerCaseRgx, '$1-$2').toLowerCase();\r\n\r\n/**\r\n * Prioritize this method instead of regex when possible\r\n * @param  {String} str\r\n * @param  {String} sub\r\n * @return {Boolean}\r\n */\r\nconst stringStartsWith = (str, sub) => str.indexOf(sub) === 0;\r\n\r\n// Time\r\n// Note: Date.now is used instead of performance.now since it is precise enough for timings calculations, performs slightly faster and works in Node.js environement.\r\nconst now = Date.now;\r\n\r\n// Types checkers\r\n\r\nconst isArr = Array.isArray;\r\n/**@param {any} a @return {a is Record<String, any>} */\r\nconst isObj = a => a && a.constructor === Object;\r\n/**@param {any} a @return {a is Number} */\r\nconst isNum = a => typeof a === 'number' && !isNaN(a);\r\n/**@param {any} a @return {a is String} */\r\nconst isStr = a => typeof a === 'string';\r\n/**@param {any} a @return {a is Function} */\r\nconst isFnc = a => typeof a === 'function';\r\n/**@param {any} a @return {a is undefined} */\r\nconst isUnd = a => typeof a === 'undefined';\r\n/**@param {any} a @return {a is null | undefined} */\r\nconst isNil = a => isUnd(a) || a === null;\r\n/**@param {any} a @return {a is SVGElement} */\r\nconst isSvg = a => isBrowser && a instanceof SVGElement;\r\n/**@param {any} a @return {Boolean} */\r\nconst isHex = a => hexTestRgx.test(a);\r\n/**@param {any} a @return {Boolean} */\r\nconst isRgb = a => stringStartsWith(a, 'rgb');\r\n/**@param {any} a @return {Boolean} */\r\nconst isHsl = a => stringStartsWith(a, 'hsl');\r\n/**@param {any} a @return {Boolean} */\r\nconst isCol = a => isHex(a) || isRgb(a) || isHsl(a);\r\n/**@param {any} a @return {Boolean} */\r\nconst isKey = a => !globals.defaults.hasOwnProperty(a);\r\n\r\n// Number\r\n\r\n/**\r\n * @param  {Number|String} str\r\n * @return {Number}\r\n */\r\nconst parseNumber = str => isStr(str) ?\r\n  parseFloat(/** @type {String} */(str)) :\r\n  /** @type {Number} */(str);\r\n\r\n// Math\r\n\r\nconst pow = Math.pow;\r\nconst sqrt = Math.sqrt;\r\nconst sin = Math.sin;\r\nconst cos = Math.cos;\r\nconst abs = Math.abs;\r\nconst exp = Math.exp;\r\nconst ceil = Math.ceil;\r\nconst floor = Math.floor;\r\nconst asin = Math.asin;\r\nconst max = Math.max;\r\nconst atan2 = Math.atan2;\r\nconst PI = Math.PI;\r\nconst _round = Math.round;\r\n\r\n/**\r\n * @param  {Number} v\r\n * @param  {Number} min\r\n * @param  {Number} max\r\n * @return {Number}\r\n */\r\nconst clamp = (v, min, max) => v < min ? min : v > max ? max : v;\r\n\r\nconst powCache = {};\r\n\r\n/**\r\n * @param  {Number} v\r\n * @param  {Number} decimalLength\r\n * @return {Number}\r\n */\r\nconst round = (v, decimalLength) => {\r\n  if (decimalLength < 0) return v;\r\n  if (!decimalLength) return _round(v);\r\n  let p = powCache[decimalLength];\r\n  if (!p) p = powCache[decimalLength] = 10 ** decimalLength;\r\n  return _round(v * p) / p;\r\n};\r\n\r\n/**\r\n * @param  {Number} v\r\n * @param  {Number|Array<Number>} increment\r\n * @return {Number}\r\n */\r\nconst snap = (v, increment) => isArr(increment) ? increment.reduce((closest, cv) => (abs(cv - v) < abs(closest - v) ? cv : closest)) : increment ? _round(v / increment) * increment : v;\r\n\r\n/**\r\n * @param  {Number} start\r\n * @param  {Number} end\r\n * @param  {Number} progress\r\n * @return {Number}\r\n */\r\nconst interpolate = (start, end, progress) => start + (end - start) * progress;\r\n\r\n/**\r\n * @param  {Number} min\r\n * @param  {Number} max\r\n * @param  {Number} [decimalLength]\r\n * @return {Number}\r\n */\r\nconst random = (min, max, decimalLength) => { const m = 10 ** (decimalLength || 0); return floor((Math.random() * (max - min + (1 / m)) + min) * m) / m };\r\n\r\n/**\r\n * Adapted from https://bost.ocks.org/mike/shuffle/\r\n * @param  {Array} items\r\n * @return {Array}\r\n */\r\nconst shuffle = items => {\r\n  let m = items.length, t, i;\r\n  while (m) { i = random(0, --m); t = items[m]; items[m] = items[i]; items[i] = t; }\r\n  return items;\r\n};\r\n\r\n/**\r\n * @param  {Number} v\r\n * @return {Number}\r\n */\r\nconst clampInfinity = v => v === Infinity ? maxValue : v === -Infinity ? -1e12 : v;\r\n\r\n/**\r\n * @param  {Number} v\r\n * @return {Number}\r\n */\r\nconst normalizeTime = v => v <= minValue ? minValue : clampInfinity(round(v, 11));\r\n\r\n// Arrays\r\n\r\n/**\r\n * @template T\r\n * @param {T[]} a\r\n * @return {T[]}\r\n */\r\nconst cloneArray = a => isArr(a) ? [ ...a ] : a;\r\n\r\n// Objects\r\n\r\n/**\r\n * @template T\r\n * @template U\r\n * @param {T} o1\r\n * @param {U} o2\r\n * @return {T & U}\r\n */\r\nconst mergeObjects = (o1, o2) => {\r\n  const merged = /** @type {T & U} */({ ...o1 });\r\n  for (let p in o2) {\r\n    const o1p = /** @type {T & U} */(o1)[p];\r\n    merged[p] = isUnd(o1p) ? /** @type {T & U} */(o2)[p] : o1p;\r\n  }  return merged;\r\n};\r\n\r\n// Linked lists\r\n\r\n/**\r\n * @param {Object} parent\r\n * @param {Function} callback\r\n * @param {Boolean} [reverse]\r\n * @param {String} [prevProp]\r\n * @param {String} [nextProp]\r\n * @return {void}\r\n */\r\nconst forEachChildren = (parent, callback, reverse, prevProp = '_prev', nextProp = '_next') => {\r\n  let next = parent._head;\r\n  let adjustedNextProp = nextProp;\r\n  if (reverse) {\r\n    next = parent._tail;\r\n    adjustedNextProp = prevProp;\r\n  }\r\n  while (next) {\r\n    const currentNext = next[adjustedNextProp];\r\n    callback(next);\r\n    next = currentNext;\r\n  }\r\n};\r\n\r\n/**\r\n * @param  {Object} parent\r\n * @param  {Object} child\r\n * @param  {String} [prevProp]\r\n * @param  {String} [nextProp]\r\n * @return {void}\r\n */\r\nconst removeChild = (parent, child, prevProp = '_prev', nextProp = '_next') => {\r\n  const prev = child[prevProp];\r\n  const next = child[nextProp];\r\n  prev ? prev[nextProp] = next : parent._head = next;\r\n  next ? next[prevProp] = prev : parent._tail = prev;\r\n  child[prevProp] = null;\r\n  child[nextProp] = null;\r\n};\r\n\r\n/**\r\n * @param  {Object} parent\r\n * @param  {Object} child\r\n * @param  {Function} [sortMethod]\r\n * @param  {String} prevProp\r\n * @param  {String} nextProp\r\n * @return {void}\r\n */\r\nconst addChild = (parent, child, sortMethod, prevProp = '_prev', nextProp = '_next') => {\r\n  let prev = parent._tail;\r\n  while (prev && sortMethod && sortMethod(prev, child)) prev = prev[prevProp];\r\n  const next = prev ? prev[nextProp] : parent._head;\r\n  prev ? prev[nextProp] = child : parent._head = child;\r\n  next ? next[prevProp] = child : parent._tail = child;\r\n  child[prevProp] = prev;\r\n  child[nextProp] = next;\r\n};\r\n\r\n/**\r\n * @param  {(...args: any[]) => Tickable | ((...args: any[]) => void)} constructor\r\n * @return {(...args: any[]) => Tickable | ((...args: any[]) => void)}\r\n */\r\nconst createRefreshable = constructor => {\r\n  /** @type {Tickable} */\r\n  let tracked;\r\n  return (...args) => {\r\n    let currentIteration, currentIterationProgress, reversed, alternate;\r\n    if (tracked) {\r\n      currentIteration = tracked.currentIteration;\r\n      currentIterationProgress = tracked.iterationProgress;\r\n      reversed = tracked.reversed;\r\n      alternate = tracked._alternate;\r\n      tracked.revert();\r\n    }\r\n    const cleanup = constructor(...args);\r\n    if (cleanup && !isFnc(cleanup) && cleanup.revert) tracked = cleanup;\r\n    if (!isUnd(currentIterationProgress)) {\r\n      /** @type {Tickable} */(tracked).currentIteration = currentIteration;\r\n      /** @type {Tickable} */(tracked).iterationProgress = (alternate ? !(currentIteration % 2) ? reversed : !reversed : reversed) ? 1 - currentIterationProgress : currentIterationProgress;\r\n    }\r\n    return cleanup || noop;\r\n  }\r\n};\r\n\r\n/*\r\n * Base class to control framerate and playback rate.\r\n * Inherited by Engine, Timer, Animation and Timeline.\r\n */\r\nclass Clock {\r\n\r\n  /** @param {Number} [initTime] */\r\n  constructor(initTime = 0) {\r\n    /** @type {Number} */\r\n    this.deltaTime = 0;\r\n    /** @type {Number} */\r\n    this._currentTime = initTime;\r\n    /** @type {Number} */\r\n    this._elapsedTime = initTime;\r\n    /** @type {Number} */\r\n    this._startTime = initTime;\r\n    /** @type {Number} */\r\n    this._lastTime = initTime;\r\n    /** @type {Number} */\r\n    this._scheduledTime = 0;\r\n    /** @type {Number} */\r\n    this._frameDuration = round(K / maxFps, 0);\r\n    /** @type {Number} */\r\n    this._fps = maxFps;\r\n    /** @type {Number} */\r\n    this._speed = 1;\r\n    /** @type {Boolean} */\r\n    this._hasChildren = false;\r\n    /** @type {Tickable|Tween} */\r\n    this._head = null;\r\n    /** @type {Tickable|Tween} */\r\n    this._tail = null;\r\n  }\r\n\r\n  get fps() {\r\n    return this._fps;\r\n  }\r\n\r\n  set fps(frameRate) {\r\n    const previousFrameDuration = this._frameDuration;\r\n    const fr = +frameRate;\r\n    const fps = fr < minValue ? minValue : fr;\r\n    const frameDuration = round(K / fps, 0);\r\n    this._fps = fps;\r\n    this._frameDuration = frameDuration;\r\n    this._scheduledTime += frameDuration - previousFrameDuration;\r\n  }\r\n\r\n  get speed() {\r\n    return this._speed;\r\n  }\r\n\r\n  set speed(playbackRate) {\r\n    const pbr = +playbackRate;\r\n    this._speed = pbr < minValue ? minValue : pbr;\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} time\r\n   * @return {tickModes}\r\n   */\r\n  requestTick(time) {\r\n    const scheduledTime = this._scheduledTime;\r\n    const elapsedTime = this._elapsedTime;\r\n    this._elapsedTime += (time - elapsedTime);\r\n    // If the elapsed time is lower than the scheduled time\r\n    // this means not enough time has passed to hit one frameDuration\r\n    // so skip that frame\r\n    if (elapsedTime < scheduledTime) return tickModes.NONE;\r\n    const frameDuration = this._frameDuration;\r\n    const frameDelta = elapsedTime - scheduledTime;\r\n    // Ensures that _scheduledTime progresses in steps of at least 1 frameDuration.\r\n    // Skips ahead if the actual elapsed time is higher.\r\n    this._scheduledTime += frameDelta < frameDuration ? frameDuration : frameDelta;\r\n    return tickModes.AUTO;\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} time\r\n   * @return {Number}\r\n   */\r\n  computeDeltaTime(time) {\r\n    const delta = time - this._lastTime;\r\n    this.deltaTime = delta;\r\n    this._lastTime = time;\r\n    return delta;\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * @param  {Tickable} tickable\r\n * @param  {Number} time\r\n * @param  {Number} muteCallbacks\r\n * @param  {Number} internalRender\r\n * @param  {tickModes} tickMode\r\n * @return {Number}\r\n */\r\nconst render = (tickable, time, muteCallbacks, internalRender, tickMode) => {\r\n\r\n  const parent = tickable.parent;\r\n  const duration = tickable.duration;\r\n  const completed = tickable.completed;\r\n  const iterationDuration = tickable.iterationDuration;\r\n  const iterationCount = tickable.iterationCount;\r\n  const _currentIteration = tickable._currentIteration;\r\n  const _loopDelay = tickable._loopDelay;\r\n  const _reversed = tickable._reversed;\r\n  const _alternate = tickable._alternate;\r\n  const _hasChildren = tickable._hasChildren;\r\n  const tickableDelay = tickable._delay;\r\n  const tickablePrevAbsoluteTime = tickable._currentTime; // TODO: rename ._currentTime to ._absoluteCurrentTime\r\n\r\n  const tickableEndTime = tickableDelay + iterationDuration;\r\n  const tickableAbsoluteTime = time - tickableDelay;\r\n  const tickablePrevTime = clamp(tickablePrevAbsoluteTime, -tickableDelay, duration);\r\n  const tickableCurrentTime = clamp(tickableAbsoluteTime, -tickableDelay, duration);\r\n  const deltaTime = tickableAbsoluteTime - tickablePrevAbsoluteTime;\r\n  const isCurrentTimeAboveZero = tickableCurrentTime > 0;\r\n  const isCurrentTimeEqualOrAboveDuration = tickableCurrentTime >= duration;\r\n  const isSetter = duration <= minValue;\r\n  const forcedTick = tickMode === tickModes.FORCE;\r\n\r\n  let isOdd = 0;\r\n  let iterationElapsedTime = tickableAbsoluteTime;\r\n  // Render checks\r\n  // Used to also check if the children have rendered in order to trigger the onRender callback on the parent timer\r\n  let hasRendered = 0;\r\n\r\n  // Execute the \"expensive\" iterations calculations only when necessary\r\n  if (iterationCount > 1) {\r\n    // bitwise NOT operator seems to be generally faster than Math.floor() across browsers\r\n    const currentIteration = ~~(tickableCurrentTime / (iterationDuration + (isCurrentTimeEqualOrAboveDuration ? 0 : _loopDelay)));\r\n    tickable._currentIteration = clamp(currentIteration, 0, iterationCount);\r\n    // Prevent the iteration count to go above the max iterations when reaching the end of the animation\r\n    if (isCurrentTimeEqualOrAboveDuration) tickable._currentIteration--;\r\n    isOdd = tickable._currentIteration % 2;\r\n    iterationElapsedTime = tickableCurrentTime % (iterationDuration + _loopDelay) || 0;\r\n  }\r\n\r\n  // Checks if exactly one of _reversed and (_alternate && isOdd) is true\r\n  const isReversed = _reversed ^ (_alternate && isOdd);\r\n  const _ease = /** @type {Renderable} */(tickable)._ease;\r\n  let iterationTime = isCurrentTimeEqualOrAboveDuration ? isReversed ? 0 : duration : isReversed ? iterationDuration - iterationElapsedTime : iterationElapsedTime;\r\n  if (_ease) iterationTime = iterationDuration * _ease(iterationTime / iterationDuration) || 0;\r\n  const isRunningBackwards = (parent ? parent.backwards : tickableAbsoluteTime < tickablePrevAbsoluteTime) ? !isReversed : !!isReversed;\r\n\r\n  tickable._currentTime = tickableAbsoluteTime;\r\n  tickable._iterationTime = iterationTime;\r\n  tickable.backwards = isRunningBackwards;\r\n\r\n  if (isCurrentTimeAboveZero && !tickable.began) {\r\n    tickable.began = true;\r\n    if (!muteCallbacks && !(parent && (isRunningBackwards || !parent.began))) {\r\n      tickable.onBegin(/** @type {CallbackArgument} */(tickable));\r\n    }\r\n  } else if (tickableAbsoluteTime <= 0) {\r\n    tickable.began = false;\r\n  }\r\n\r\n  // Only triggers onLoop for tickable without children, otherwise call the the onLoop callback in the tick function\r\n  // Make sure to trigger the onLoop before rendering to allow .refresh() to pickup the current values\r\n  if (!muteCallbacks && !_hasChildren && isCurrentTimeAboveZero && tickable._currentIteration !== _currentIteration) {\r\n    tickable.onLoop(/** @type {CallbackArgument} */(tickable));\r\n  }\r\n\r\n  if (\r\n    forcedTick ||\r\n    tickMode === tickModes.AUTO && (\r\n      time >= tickableDelay && time <= tickableEndTime || // Normal render\r\n      time <= tickableDelay && tickablePrevTime > tickableDelay || // Playhead is before the animation start time so make sure the animation is at its initial state\r\n      time >= tickableEndTime && tickablePrevTime !== duration // Playhead is after the animation end time so make sure the animation is at its end state\r\n    ) ||\r\n    iterationTime >= tickableEndTime && tickablePrevTime !== duration ||\r\n    iterationTime <= tickableDelay && tickablePrevTime > 0 ||\r\n    time <= tickablePrevTime && tickablePrevTime === duration && completed || // Force a render if a seek occurs on an completed animation\r\n    isCurrentTimeEqualOrAboveDuration && !completed && isSetter // This prevents 0 duration tickables to be skipped\r\n  ) {\r\n\r\n    if (isCurrentTimeAboveZero) {\r\n      // Trigger onUpdate callback before rendering\r\n      tickable.computeDeltaTime(tickablePrevTime);\r\n      if (!muteCallbacks) tickable.onBeforeUpdate(/** @type {CallbackArgument} */(tickable));\r\n    }\r\n\r\n    // Start tweens rendering\r\n    if (!_hasChildren) {\r\n\r\n      // Time has jumped more than globals.tickThreshold so consider this tick manual\r\n      const forcedRender = forcedTick || (isRunningBackwards ? deltaTime * -1 : deltaTime) >= globals.tickThreshold;\r\n      const absoluteTime = tickable._offset + (parent ? parent._offset : 0) + tickableDelay + iterationTime;\r\n\r\n      // Only Animation can have tweens, Timer returns undefined\r\n      let tween = /** @type {Tween} */(/** @type {JSAnimation} */(tickable)._head);\r\n      let tweenTarget;\r\n      let tweenStyle;\r\n      let tweenTargetTransforms;\r\n      let tweenTargetTransformsProperties;\r\n      let tweenTransformsNeedUpdate = 0;\r\n\r\n      while (tween) {\r\n\r\n        const tweenComposition = tween._composition;\r\n        const tweenCurrentTime = tween._currentTime;\r\n        const tweenChangeDuration = tween._changeDuration;\r\n        const tweenAbsEndTime = tween._absoluteStartTime + tween._changeDuration;\r\n        const tweenNextRep = tween._nextRep;\r\n        const tweenPrevRep = tween._prevRep;\r\n        const tweenHasComposition = tweenComposition !== compositionTypes.none;\r\n\r\n        if ((forcedRender || (\r\n            (tweenCurrentTime !== tweenChangeDuration || absoluteTime <= tweenAbsEndTime + (tweenNextRep ? tweenNextRep._delay : 0)) &&\r\n            (tweenCurrentTime !== 0 || absoluteTime >= tween._absoluteStartTime)\r\n          )) && (!tweenHasComposition || (\r\n            !tween._isOverridden &&\r\n            (!tween._isOverlapped || absoluteTime <= tweenAbsEndTime) &&\r\n            (!tweenNextRep || (tweenNextRep._isOverridden || absoluteTime <= tweenNextRep._absoluteStartTime)) &&\r\n            (!tweenPrevRep || (tweenPrevRep._isOverridden || (absoluteTime >= (tweenPrevRep._absoluteStartTime + tweenPrevRep._changeDuration) + tween._delay)))\r\n          ))\r\n        ) {\r\n\r\n          const tweenNewTime = tween._currentTime = clamp(iterationTime - tween._startTime, 0, tweenChangeDuration);\r\n          const tweenProgress = tween._ease(tweenNewTime / tween._updateDuration);\r\n          const tweenModifier = tween._modifier;\r\n          const tweenValueType = tween._valueType;\r\n          const tweenType = tween._tweenType;\r\n          const tweenIsObject = tweenType === tweenTypes.OBJECT;\r\n          const tweenIsNumber = tweenValueType === valueTypes.NUMBER;\r\n          // Only round the in-between frames values if the final value is a string\r\n          const tweenPrecision = (tweenIsNumber && tweenIsObject) || tweenProgress === 0 || tweenProgress === 1 ? -1 : globals.precision;\r\n\r\n          // Recompose tween value\r\n          /** @type {String|Number} */\r\n          let value;\r\n          /** @type {Number} */\r\n          let number;\r\n\r\n          if (tweenIsNumber) {\r\n            value = number = /** @type {Number} */(tweenModifier(round(interpolate(tween._fromNumber, tween._toNumber,  tweenProgress), tweenPrecision )));\r\n          } else if (tweenValueType === valueTypes.UNIT) {\r\n            // Rounding the values speed up string composition\r\n            number = /** @type {Number} */(tweenModifier(round(interpolate(tween._fromNumber, tween._toNumber,  tweenProgress), tweenPrecision)));\r\n            value = `${number}${tween._unit}`;\r\n          } else if (tweenValueType === valueTypes.COLOR) {\r\n            const fn = tween._fromNumbers;\r\n            const tn = tween._toNumbers;\r\n            const r = round(clamp(/** @type {Number} */(tweenModifier(interpolate(fn[0], tn[0], tweenProgress))), 0, 255), 0);\r\n            const g = round(clamp(/** @type {Number} */(tweenModifier(interpolate(fn[1], tn[1], tweenProgress))), 0, 255), 0);\r\n            const b = round(clamp(/** @type {Number} */(tweenModifier(interpolate(fn[2], tn[2], tweenProgress))), 0, 255), 0);\r\n            const a = clamp(/** @type {Number} */(tweenModifier(round(interpolate(fn[3], tn[3], tweenProgress), tweenPrecision))), 0, 1);\r\n            value = `rgba(${r},${g},${b},${a})`;\r\n            if (tweenHasComposition) {\r\n              const ns = tween._numbers;\r\n              ns[0] = r;\r\n              ns[1] = g;\r\n              ns[2] = b;\r\n              ns[3] = a;\r\n            }\r\n          } else if (tweenValueType === valueTypes.COMPLEX) {\r\n            value = tween._strings[0];\r\n            for (let j = 0, l = tween._toNumbers.length; j < l; j++) {\r\n              const n = /** @type {Number} */(tweenModifier(round(interpolate(tween._fromNumbers[j], tween._toNumbers[j], tweenProgress), tweenPrecision)));\r\n              const s = tween._strings[j + 1];\r\n              value += `${s ? n + s : n}`;\r\n              if (tweenHasComposition) {\r\n                tween._numbers[j] = n;\r\n              }\r\n            }\r\n          }\r\n\r\n          // For additive tweens and Animatables\r\n          if (tweenHasComposition) {\r\n            tween._number = number;\r\n          }\r\n\r\n          if (!internalRender && tweenComposition !== compositionTypes.blend) {\r\n\r\n            const tweenProperty = tween.property;\r\n            tweenTarget = tween.target;\r\n\r\n            if (tweenIsObject) {\r\n              tweenTarget[tweenProperty] = value;\r\n            } else if (tweenType === tweenTypes.ATTRIBUTE) {\r\n              /** @type {DOMTarget} */(tweenTarget).setAttribute(tweenProperty, /** @type {String} */(value));\r\n            } else {\r\n              tweenStyle = /** @type {DOMTarget} */(tweenTarget).style;\r\n              if (tweenType === tweenTypes.TRANSFORM) {\r\n                if (tweenTarget !== tweenTargetTransforms) {\r\n                  tweenTargetTransforms = tweenTarget;\r\n                  // NOTE: Referencing the cachedTransforms in the tween property directly can be a little bit faster but appears to increase memory usage.\r\n                  tweenTargetTransformsProperties = tweenTarget[transformsSymbol];\r\n                }\r\n                tweenTargetTransformsProperties[tweenProperty] = value;\r\n                tweenTransformsNeedUpdate = 1;\r\n              } else if (tweenType === tweenTypes.CSS) {\r\n                tweenStyle[tweenProperty] = value;\r\n              } else if (tweenType === tweenTypes.CSS_VAR) {\r\n                tweenStyle.setProperty(tweenProperty,/** @type {String} */(value));\r\n              }\r\n            }\r\n\r\n            if (isCurrentTimeAboveZero) hasRendered = 1;\r\n\r\n          } else {\r\n            // Used for composing timeline tweens without having to do a real render\r\n            tween._value = value;\r\n          }\r\n\r\n        }\r\n\r\n        // NOTE: Possible improvement: Use translate(x,y) / translate3d(x,y,z) syntax\r\n        // to reduce memory usage on string composition\r\n        if (tweenTransformsNeedUpdate && tween._renderTransforms) {\r\n          let str = emptyString;\r\n          for (let key in tweenTargetTransformsProperties) {\r\n            str += `${transformsFragmentStrings[key]}${tweenTargetTransformsProperties[key]}) `;\r\n          }\r\n          tweenStyle.transform = str;\r\n          tweenTransformsNeedUpdate = 0;\r\n        }\r\n\r\n        tween = tween._next;\r\n      }\r\n\r\n      if (!muteCallbacks && hasRendered) {\r\n        /** @type {JSAnimation} */(tickable).onRender(/** @type {JSAnimation} */(tickable));\r\n      }\r\n    }\r\n\r\n    if (!muteCallbacks && isCurrentTimeAboveZero) {\r\n      tickable.onUpdate(/** @type {CallbackArgument} */(tickable));\r\n    }\r\n\r\n  }\r\n\r\n  // End tweens rendering\r\n\r\n  // Handle setters on timeline differently and allow re-trigering the onComplete callback when seeking backwards\r\n  if (parent && isSetter) {\r\n    if (!muteCallbacks && (\r\n      (parent.began && !isRunningBackwards && tickableAbsoluteTime >= duration && !completed) ||\r\n      (isRunningBackwards && tickableAbsoluteTime <= minValue && completed)\r\n    )) {\r\n      tickable.onComplete(/** @type {CallbackArgument} */(tickable));\r\n      tickable.completed = !isRunningBackwards;\r\n    }\r\n  // If currentTime is both above 0 and at least equals to duration, handles normal onComplete or infinite loops\r\n  } else if (isCurrentTimeAboveZero && isCurrentTimeEqualOrAboveDuration) {\r\n    if (iterationCount === Infinity) {\r\n      // Offset the tickable _startTime with its duration to reset _currentTime to 0 and continue the infinite timer\r\n      tickable._startTime += tickable.duration;\r\n    } else if (tickable._currentIteration >= iterationCount - 1) {\r\n      // By setting paused to true, we tell the engine loop to not render this tickable and removes it from the list on the next tick\r\n      tickable.paused = true;\r\n      if (!completed && !_hasChildren) {\r\n        // If the tickable has children, triggers onComplete() only when all children have completed in the tick function\r\n        tickable.completed = true;\r\n        if (!muteCallbacks && !(parent && (isRunningBackwards || !parent.began))) {\r\n          tickable.onComplete(/** @type {CallbackArgument} */(tickable));\r\n          tickable._resolve(/** @type {CallbackArgument} */(tickable));\r\n        }\r\n      }\r\n    }\r\n  // Otherwise set the completed flag to false\r\n  } else {\r\n    tickable.completed = false;\r\n  }\r\n\r\n  // NOTE: hasRendered * direction (negative for backwards) this way we can remove the tickable.backwards property completly ?\r\n  return hasRendered;\r\n};\r\n\r\n/**\r\n * @param  {Tickable} tickable\r\n * @param  {Number} time\r\n * @param  {Number} muteCallbacks\r\n * @param  {Number} internalRender\r\n * @param  {Number} tickMode\r\n * @return {void}\r\n */\r\nconst tick = (tickable, time, muteCallbacks, internalRender, tickMode) => {\r\n  const _currentIteration = tickable._currentIteration;\r\n  render(tickable, time, muteCallbacks, internalRender, tickMode);\r\n  if (tickable._hasChildren) {\r\n    const tl = /** @type {Timeline} */(tickable);\r\n    const tlIsRunningBackwards = tl.backwards;\r\n    const tlChildrenTime = internalRender ? time : tl._iterationTime;\r\n    const tlCildrenTickTime = now();\r\n\r\n    let tlChildrenHasRendered = 0;\r\n    let tlChildrenHaveCompleted = true;\r\n\r\n    // If the timeline has looped forward, we need to manually triggers children skipped callbacks\r\n    if (!internalRender && tl._currentIteration !== _currentIteration) {\r\n      const tlIterationDuration = tl.iterationDuration;\r\n      forEachChildren(tl, (/** @type {JSAnimation} */child) => {\r\n        if (!tlIsRunningBackwards) {\r\n          // Force an internal render to trigger the callbacks if the child has not completed on loop\r\n          if (!child.completed && !child.backwards && child._currentTime < child.iterationDuration) {\r\n            render(child, tlIterationDuration, muteCallbacks, 1, tickModes.FORCE);\r\n          }\r\n          // Reset their began and completed flags to allow retrigering callbacks on the next iteration\r\n          child.began = false;\r\n          child.completed = false;\r\n        } else {\r\n          const childDuration = child.duration;\r\n          const childStartTime = child._offset + child._delay;\r\n          const childEndTime = childStartTime + childDuration;\r\n          // Triggers the onComplete callback on reverse for children on the edges of the timeline\r\n          if (!muteCallbacks && childDuration <= minValue && (!childStartTime || childEndTime === tlIterationDuration)) {\r\n            child.onComplete(child);\r\n          }\r\n        }\r\n      });\r\n      if (!muteCallbacks) tl.onLoop(/** @type {CallbackArgument} */(tl));\r\n    }\r\n\r\n    forEachChildren(tl, (/** @type {JSAnimation} */child) => {\r\n      const childTime = round((tlChildrenTime - child._offset) * child._speed, 12); // Rounding is needed when using seconds\r\n      const childTickMode = child._fps < tl._fps ? child.requestTick(tlCildrenTickTime) : tickMode;\r\n      tlChildrenHasRendered += render(child, childTime, muteCallbacks, internalRender, childTickMode);\r\n      if (!child.completed && tlChildrenHaveCompleted) tlChildrenHaveCompleted = false;\r\n    }, tlIsRunningBackwards);\r\n\r\n    // Renders on timeline are triggered by its children so it needs to be set after rendering the children\r\n    if (!muteCallbacks && tlChildrenHasRendered) tl.onRender(/** @type {CallbackArgument} */(tl));\r\n\r\n    // Triggers the timeline onComplete() once all chindren all completed and the current time has reached the end\r\n    if ((tlChildrenHaveCompleted || tlIsRunningBackwards) && tl._currentTime >= tl.duration) {\r\n      // Make sure the paused flag is false in case it has been skipped in the render function\r\n      tl.paused = true;\r\n      if (!tl.completed) {\r\n        tl.completed = true;\r\n        if (!muteCallbacks) {\r\n          tl.onComplete(/** @type {CallbackArgument} */(tl));\r\n          tl._resolve(/** @type {CallbackArgument} */(tl));\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nconst additive = {\r\n  animation: null,\r\n  update: noop,\r\n};\r\n\r\n/**\r\n * @typedef AdditiveAnimation\r\n * @property {Number} duration\r\n * @property {Number} _offset\r\n * @property {Number} _delay\r\n * @property {Tween} _head\r\n * @property {Tween} _tail\r\n */\r\n\r\n/**\r\n * @param  {TweenAdditiveLookups} lookups\r\n * @return {AdditiveAnimation}\r\n */\r\nconst addAdditiveAnimation = lookups => {\r\n  let animation = additive.animation;\r\n  if (!animation) {\r\n    animation = {\r\n      duration: minValue,\r\n      computeDeltaTime: noop,\r\n      _offset: 0,\r\n      _delay: 0,\r\n      _head: null,\r\n      _tail: null,\r\n    };\r\n    additive.animation = animation;\r\n    additive.update = () => {\r\n      lookups.forEach(propertyAnimation => {\r\n        for (let propertyName in propertyAnimation) {\r\n          const tweens = propertyAnimation[propertyName];\r\n          const lookupTween = tweens._head;\r\n          if (lookupTween) {\r\n            const valueType = lookupTween._valueType;\r\n            const additiveValues = valueType === valueTypes.COMPLEX || valueType === valueTypes.COLOR ? cloneArray(lookupTween._fromNumbers) : null;\r\n            let additiveValue = lookupTween._fromNumber;\r\n            let tween = tweens._tail;\r\n            while (tween && tween !== lookupTween) {\r\n              if (additiveValues) {\r\n                for (let i = 0, l = tween._numbers.length; i < l; i++) additiveValues[i] += tween._numbers[i];\r\n              } else {\r\n                additiveValue += tween._number;\r\n              }\r\n              tween = tween._prevAdd;\r\n            }\r\n            lookupTween._toNumber = additiveValue;\r\n            lookupTween._toNumbers = additiveValues;\r\n          }\r\n        }\r\n      });\r\n      // TODO: Avoid polymorphism here, idealy the additive animation should be a regular animation with a higher priority in the render loop\r\n      render(animation, 1, 1, 0, tickModes.FORCE);\r\n    };\r\n  }\r\n  return animation;\r\n};\r\n\r\nconst engineTickMethod = /*#__PURE__*/ (() => isBrowser ? requestAnimationFrame : setImmediate)();\r\nconst engineCancelMethod = /*#__PURE__*/ (() => isBrowser ? cancelAnimationFrame : clearImmediate)();\r\n\r\nclass Engine extends Clock {\r\n\r\n  /** @param {Number} [initTime] */\r\n  constructor(initTime) {\r\n    super(initTime);\r\n    this.useDefaultMainLoop = true;\r\n    this.pauseOnDocumentHidden = true;\r\n    /** @type {DefaultsParams} */\r\n    this.defaults = defaults;\r\n    this.paused = isBrowser && doc.hidden ? true  : false;\r\n    /** @type {Number|NodeJS.Immediate} */\r\n    this.reqId = null;\r\n  }\r\n\r\n  update() {\r\n    const time = this._currentTime = now();\r\n    if (this.requestTick(time)) {\r\n      this.computeDeltaTime(time);\r\n      const engineSpeed = this._speed;\r\n      const engineFps = this._fps;\r\n      let activeTickable = /** @type {Tickable} */(this._head);\r\n      while (activeTickable) {\r\n        const nextTickable = activeTickable._next;\r\n        if (!activeTickable.paused) {\r\n          tick(\r\n            activeTickable,\r\n            (time - activeTickable._startTime) * activeTickable._speed * engineSpeed,\r\n            0, // !muteCallbacks\r\n            0, // !internalRender\r\n            activeTickable._fps < engineFps ? activeTickable.requestTick(time) : tickModes.AUTO\r\n          );\r\n        } else {\r\n          removeChild(this, activeTickable);\r\n          this._hasChildren = !!this._tail;\r\n          activeTickable._running = false;\r\n          if (activeTickable.completed && !activeTickable._cancelled) {\r\n            activeTickable.cancel();\r\n          }\r\n        }\r\n        activeTickable = nextTickable;\r\n      }\r\n      additive.update();\r\n    }\r\n  }\r\n\r\n  wake() {\r\n    if (this.useDefaultMainLoop && !this.reqId && !this.paused) {\r\n      this.reqId = engineTickMethod(tickEngine);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  pause() {\r\n    this.paused = true;\r\n    return killEngine();\r\n  }\r\n\r\n  resume() {\r\n    if (!this.paused) return;\r\n    this.paused = false;\r\n    forEachChildren(this, (/** @type {Tickable} */child) => child.resetTime());\r\n    return this.wake();\r\n  }\r\n\r\n  // Getter and setter for speed\r\n  get speed() {\r\n    return this._speed * (globals.timeScale === 1 ? 1 : K);\r\n  }\r\n\r\n  set speed(playbackRate) {\r\n    this._speed = playbackRate * globals.timeScale;\r\n    forEachChildren(this, (/** @type {Tickable} */child) => child.speed = child._speed);\r\n  }\r\n\r\n  // Getter and setter for timeUnit\r\n  get timeUnit() {\r\n    return globals.timeScale === 1 ? 'ms' : 's';\r\n  };\r\n\r\n  set timeUnit(unit) {\r\n    const secondsScale = 0.001;\r\n    const isSecond = unit === 's';\r\n    const newScale = isSecond ? secondsScale : 1;\r\n    if (globals.timeScale !== newScale) {\r\n      globals.timeScale = newScale;\r\n      globals.tickThreshold = 200 * newScale;\r\n      const scaleFactor = isSecond ? secondsScale : K;\r\n      /** @type {Number} */\r\n      (this.defaults.duration) *= scaleFactor;\r\n      this._speed *= scaleFactor;\r\n    }\r\n  }\r\n\r\n  // Getter and setter for precision\r\n  get precision() {\r\n    return globals.precision;\r\n  }\r\n\r\n  set precision(precision) {\r\n    globals.precision = precision;\r\n  }\r\n\r\n}\r\nconst engine = /*#__PURE__*/(() => {\r\n  const engine = new Engine(now());\r\n  if (isBrowser) {\r\n    globalVersions.engine = engine;\r\n    doc.addEventListener('visibilitychange', () => {\r\n      if (!engine.pauseOnDocumentHidden) return;\r\n      doc.hidden ? engine.pause() : engine.resume();\r\n    });\r\n  }\r\n  return engine;\r\n})();\r\n\r\n\r\nconst tickEngine = () => {\r\n  if (engine._head) {\r\n    engine.reqId = engineTickMethod(tickEngine);\r\n    engine.update();\r\n  } else {\r\n    engine.reqId = 0;\r\n  }\r\n};\r\n\r\nconst killEngine = () => {\r\n  engineCancelMethod(/** @type {NodeJS.Immediate & Number} */(engine.reqId));\r\n  engine.reqId = 0;\r\n  return engine;\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @param  {DOMTarget} target\r\n * @param  {String} propName\r\n * @param  {Object} animationInlineStyles\r\n * @return {String}\r\n */\r\nconst parseInlineTransforms = (target, propName, animationInlineStyles) => {\r\n  const inlineTransforms = target.style.transform;\r\n  let inlinedStylesPropertyValue;\r\n  if (inlineTransforms) {\r\n    const cachedTransforms = target[transformsSymbol];\r\n    let t; while (t = transformsExecRgx.exec(inlineTransforms)) {\r\n      const inlinePropertyName = t[1];\r\n      // const inlinePropertyValue = t[2];\r\n      const inlinePropertyValue = t[2].slice(1, -1);\r\n      cachedTransforms[inlinePropertyName] = inlinePropertyValue;\r\n      if (inlinePropertyName === propName) {\r\n        inlinedStylesPropertyValue = inlinePropertyValue;\r\n        // Store the new parsed inline styles if animationInlineStyles is provided\r\n        if (animationInlineStyles) {\r\n          animationInlineStyles[propName] = inlinePropertyValue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return inlineTransforms && !isUnd(inlinedStylesPropertyValue) ? inlinedStylesPropertyValue :\r\n    stringStartsWith(propName, 'scale') ? '1' :\r\n    stringStartsWith(propName, 'rotate') || stringStartsWith(propName, 'skew') ? '0deg' : '0px';\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @param  {DOMTargetsParam|TargetsParam} v\r\n * @return {NodeList|HTMLCollection}\r\n */\r\nfunction getNodeList(v) {\r\n  const n = isStr(v) ? scope.root.querySelectorAll(v) : v;\r\n  if (n instanceof NodeList || n instanceof HTMLCollection) return n;\r\n}\r\n\r\n/**\r\n * @overload\r\n * @param  {DOMTargetsParam} targets\r\n * @return {DOMTargetsArray}\r\n *\r\n * @overload\r\n * @param  {JSTargetsParam} targets\r\n * @return {JSTargetsArray}\r\n *\r\n * @overload\r\n * @param  {TargetsParam} targets\r\n * @return {TargetsArray}\r\n *\r\n * @param  {DOMTargetsParam|JSTargetsParam|TargetsParam} targets\r\n */\r\nfunction parseTargets(targets) {\r\n  if (isNil(targets)) return /** @type {TargetsArray} */([]);\r\n  if (isArr(targets)) {\r\n    const flattened = targets.flat(Infinity);\r\n    /** @type {TargetsArray} */\r\n    const parsed = [];\r\n    for (let i = 0, l = flattened.length; i < l; i++) {\r\n      const item = flattened[i];\r\n      if (!isNil(item)) {\r\n        const nodeList = getNodeList(item);\r\n        if (nodeList) {\r\n          for (let j = 0, jl = nodeList.length; j < jl; j++) {\r\n            const subItem = nodeList[j];\r\n            if (!isNil(subItem)) {\r\n              let isDuplicate = false;\r\n              for (let k = 0, kl = parsed.length; k < kl; k++) {\r\n                if (parsed[k] === subItem) {\r\n                  isDuplicate = true;\r\n                  break;\r\n                }\r\n              }\r\n              if (!isDuplicate) {\r\n                parsed.push(subItem);\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          let isDuplicate = false;\r\n          for (let j = 0, jl = parsed.length; j < jl; j++) {\r\n            if (parsed[j] === item) {\r\n              isDuplicate = true;\r\n              break;\r\n            }\r\n          }\r\n          if (!isDuplicate) {\r\n            parsed.push(item);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return parsed;\r\n  }\r\n  if (!isBrowser) return /** @type {JSTargetsArray} */([targets]);\r\n  const nodeList = getNodeList(targets);\r\n  if (nodeList) return /** @type {DOMTargetsArray} */(Array.from(nodeList));\r\n  return /** @type {TargetsArray} */([targets]);\r\n}\r\n\r\n/**\r\n * @overload\r\n * @param  {DOMTargetsParam} targets\r\n * @return {DOMTargetsArray}\r\n *\r\n * @overload\r\n * @param  {JSTargetsParam} targets\r\n * @return {JSTargetsArray}\r\n *\r\n * @overload\r\n * @param  {TargetsParam} targets\r\n * @return {TargetsArray}\r\n *\r\n * @param  {DOMTargetsParam|JSTargetsParam|TargetsParam} targets\r\n */\r\nfunction registerTargets(targets) {\r\n  const parsedTargetsArray = parseTargets(targets);\r\n  const parsedTargetsLength = parsedTargetsArray.length;\r\n  if (parsedTargetsLength) {\r\n    for (let i = 0; i < parsedTargetsLength; i++) {\r\n      const target = parsedTargetsArray[i];\r\n      if (!target[isRegisteredTargetSymbol]) {\r\n        target[isRegisteredTargetSymbol] = true;\r\n        const isSvgType = isSvg(target);\r\n        const isDom = /** @type {DOMTarget} */(target).nodeType || isSvgType;\r\n        if (isDom) {\r\n          target[isDomSymbol] = true;\r\n          target[isSvgSymbol] = isSvgType;\r\n          target[transformsSymbol] = {};\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return parsedTargetsArray;\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * @param  {TargetsParam} path\r\n * @return {SVGGeometryElement|undefined}\r\n */\r\nconst getPath = path => {\r\n  const parsedTargets = parseTargets(path);\r\n  const $parsedSvg = /** @type {SVGGeometryElement} */(parsedTargets[0]);\r\n  if (!$parsedSvg || !isSvg($parsedSvg)) return;\r\n  return $parsedSvg;\r\n};\r\n\r\n/**\r\n * @param  {TargetsParam} path2\r\n * @param  {Number} [precision]\r\n * @return {FunctionValue}\r\n */\r\nconst morphTo = (path2, precision = .33) => ($path1) => {\r\n  const $path2 = /** @type {SVGGeometryElement} */(getPath(path2));\r\n  if (!$path2) return;\r\n  const isPath = $path1.tagName === 'path';\r\n  const separator = isPath ? ' ' : ',';\r\n  const previousPoints = $path1[morphPointsSymbol];\r\n  if (previousPoints) $path1.setAttribute(isPath ? 'd' : 'points', previousPoints);\r\n\r\n  let v1 = '', v2 = '';\r\n\r\n  if (!precision) {\r\n    v1 = $path1.getAttribute(isPath ? 'd' : 'points');\r\n    v2 = $path2.getAttribute(isPath ? 'd' : 'points');\r\n  } else {\r\n    const length1 = /** @type {SVGGeometryElement} */($path1).getTotalLength();\r\n    const length2 = $path2.getTotalLength();\r\n    const maxPoints = Math.max(Math.ceil(length1 * precision), Math.ceil(length2 * precision));\r\n    for (let i = 0; i < maxPoints; i++) {\r\n      const t = i / (maxPoints - 1);\r\n      const pointOnPath1 = /** @type {SVGGeometryElement} */($path1).getPointAtLength(length1 * t);\r\n      const pointOnPath2 = $path2.getPointAtLength(length2 * t);\r\n      const prefix = isPath ? (i === 0 ? 'M' : 'L') : '';\r\n      v1 += prefix + round(pointOnPath1.x, 3) + separator + pointOnPath1.y + ' ';\r\n      v2 += prefix + round(pointOnPath2.x, 3) + separator + pointOnPath2.y + ' ';\r\n    }\r\n  }\r\n\r\n  $path1[morphPointsSymbol] = v2;\r\n\r\n  return [v1, v2];\r\n};\r\n\r\n/**\r\n * @param {SVGGeometryElement} [$el]\r\n * @return {Number}\r\n */\r\nconst getScaleFactor = $el => {\r\n  let scaleFactor = 1;\r\n  if ($el && $el.getCTM) {\r\n    const ctm = $el.getCTM();\r\n    if (ctm) {\r\n      const scaleX = sqrt(ctm.a * ctm.a + ctm.b * ctm.b);\r\n      const scaleY = sqrt(ctm.c * ctm.c + ctm.d * ctm.d);\r\n      scaleFactor = (scaleX + scaleY) / 2;\r\n    }\r\n  }\r\n  return scaleFactor;\r\n};\r\n\r\n/**\r\n * Creates a proxy that wraps an SVGGeometryElement and adds drawing functionality.\r\n * @param {SVGGeometryElement} $el - The SVG element to transform into a drawable\r\n * @param {number} start - Starting position (0-1)\r\n * @param {number} end - Ending position (0-1)\r\n * @return {DrawableSVGGeometry} - Returns a proxy that preserves the original element's type with additional 'draw' attribute functionality\r\n */\r\nconst createDrawableProxy = ($el, start, end) => {\r\n  const pathLength = K;\r\n  const computedStyles = getComputedStyle($el);\r\n  const strokeLineCap = computedStyles.strokeLinecap;\r\n  // @ts-ignore\r\n  const $scalled = computedStyles.vectorEffect === 'non-scaling-stroke' ? $el : null;\r\n  let currentCap = strokeLineCap;\r\n\r\n  const proxy = new Proxy($el, {\r\n    get(target, property) {\r\n      const value = target[property];\r\n      if (property === proxyTargetSymbol) return target;\r\n      if (property === 'setAttribute') {\r\n        return (...args) => {\r\n          if (args[0] === 'draw') {\r\n            const value = args[1];\r\n            const values = value.split(' ');\r\n            const v1 = +values[0];\r\n            const v2 = +values[1];\r\n            // TOTO: Benchmark if performing two slices is more performant than one split\r\n            // const spaceIndex = value.indexOf(' ');\r\n            // const v1 = round(+value.slice(0, spaceIndex), precision);\r\n            // const v2 = round(+value.slice(spaceIndex + 1), precision);\r\n            const scaleFactor = getScaleFactor($scalled);\r\n            const os = v1 * -1e3 * scaleFactor;\r\n            const d1 = (v2 * pathLength * scaleFactor) + os;\r\n            const d2 = (pathLength * scaleFactor +\r\n                      ((v1 === 0 && v2 === 1) || (v1 === 1 && v2 === 0) ? 0 : 10 * scaleFactor) - d1);\r\n            if (strokeLineCap !== 'butt') {\r\n              const newCap = v1 === v2 ? 'butt' : strokeLineCap;\r\n              if (currentCap !== newCap) {\r\n                target.style.strokeLinecap = `${newCap}`;\r\n                currentCap = newCap;\r\n              }\r\n            }\r\n            target.setAttribute('stroke-dashoffset', `${os}`);\r\n            target.setAttribute('stroke-dasharray', `${d1} ${d2}`);\r\n          }\r\n          return Reflect.apply(value, target, args);\r\n        };\r\n      }\r\n\r\n      if (isFnc(value)) {\r\n        return (...args) => Reflect.apply(value, target, args);\r\n      } else {\r\n        return value;\r\n      }\r\n    }\r\n  });\r\n\r\n  if ($el.getAttribute('pathLength') !== `${pathLength}`) {\r\n    $el.setAttribute('pathLength', `${pathLength}`);\r\n    proxy.setAttribute('draw', `${start} ${end}`);\r\n  }\r\n\r\n  return /** @type {DrawableSVGGeometry} */(proxy);\r\n};\r\n\r\n/**\r\n * Creates drawable proxies for multiple SVG elements.\r\n * @param {TargetsParam} selector - CSS selector, SVG element, or array of elements and selectors\r\n * @param {number} [start=0] - Starting position (0-1)\r\n * @param {number} [end=0] - Ending position (0-1)\r\n * @return {Array<DrawableSVGGeometry>} - Array of proxied elements with drawing functionality\r\n */\r\nconst createDrawable = (selector, start = 0, end = 0) => {\r\n  const els = parseTargets(selector);\r\n  return els.map($el => createDrawableProxy(\r\n    /** @type {SVGGeometryElement} */($el),\r\n    start,\r\n    end\r\n  ));\r\n};\r\n\r\n// Motion path animation\r\n\r\n/**\r\n * @param {SVGGeometryElement} $path\r\n * @param {Number} progress\r\n * @param {Number}lookup\r\n * @return {DOMPoint}\r\n */\r\nconst getPathPoint = ($path, progress, lookup = 0) => {\r\n  return $path.getPointAtLength(progress + lookup >= 1 ? progress + lookup : 0);\r\n};\r\n\r\n/**\r\n * @param {SVGGeometryElement} $path\r\n * @param {String} pathProperty\r\n * @return {FunctionValue}\r\n */\r\nconst getPathProgess = ($path, pathProperty) => {\r\n  return $el => {\r\n    const totalLength = +($path.getTotalLength());\r\n    const inSvg = $el[isSvgSymbol];\r\n    const ctm = $path.getCTM();\r\n    /** @type {TweenObjectValue} */\r\n    return {\r\n      from: 0,\r\n      to: totalLength,\r\n      /** @type {TweenModifier} */\r\n      modifier: progress => {\r\n        if (pathProperty === 'a') {\r\n          const p0 = getPathPoint($path, progress, -1);\r\n          const p1 = getPathPoint($path, progress, 1);\r\n          return atan2(p1.y - p0.y, p1.x - p0.x) * 180 / PI;\r\n        } else {\r\n          const p = getPathPoint($path, progress, 0);\r\n          return pathProperty === 'x' ?\r\n            inSvg || !ctm ? p.x : p.x * ctm.a + p.y * ctm.c + ctm.e :\r\n            inSvg || !ctm ? p.y : p.x * ctm.b + p.y * ctm.d + ctm.f\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @param {TargetsParam} path\r\n */\r\nconst createMotionPath = path => {\r\n  const $path = getPath(path);\r\n  if (!$path) return;\r\n  return {\r\n    translateX: getPathProgess($path, 'x'),\r\n    translateY: getPathProgess($path, 'y'),\r\n    rotate: getPathProgess($path, 'a'),\r\n  }\r\n};\r\n\r\n// Check for valid SVG attribute\r\n\r\nconst cssReservedProperties = ['opacity', 'rotate', 'overflow', 'color'];\r\n\r\n/**\r\n * @param  {Target} el\r\n * @param  {String} propertyName\r\n * @return {Boolean}\r\n */\r\nconst isValidSVGAttribute = (el, propertyName) => {\r\n  // Return early and use CSS opacity animation instead (already better default values (opacity: 1 instead of 0)) and rotate should be considered a transform\r\n  if (cssReservedProperties.includes(propertyName)) return false;\r\n  if (el.getAttribute(propertyName) || propertyName in el) {\r\n    if (propertyName === 'scale') { // Scale\r\n      const elParentNode = /** @type {SVGGeometryElement} */(/** @type {DOMTarget} */(el).parentNode);\r\n      // Only consider scale as a valid SVG attribute on filter element\r\n      return elParentNode && elParentNode.tagName === 'filter';\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\nconst svg = {\r\n  morphTo,\r\n  createMotionPath,\r\n  createDrawable,\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * RGB / RGBA Color value string -> RGBA values array\r\n * @param  {String} rgbValue\r\n * @return {ColorArray}\r\n */\r\nconst rgbToRgba = rgbValue => {\r\n  const rgba = rgbExecRgx.exec(rgbValue) || rgbaExecRgx.exec(rgbValue);\r\n  const a = !isUnd(rgba[4]) ? +rgba[4] : 1;\r\n  return [\r\n    +rgba[1],\r\n    +rgba[2],\r\n    +rgba[3],\r\n    a\r\n  ]\r\n};\r\n\r\n/**\r\n * HEX3 / HEX3A / HEX6 / HEX6A Color value string -> RGBA values array\r\n * @param  {String} hexValue\r\n * @return {ColorArray}\r\n */\r\nconst hexToRgba = hexValue => {\r\n  const hexLength = hexValue.length;\r\n  const isShort = hexLength === 4 || hexLength === 5;\r\n  return [\r\n    +('0x' + hexValue[1] + hexValue[isShort ? 1 : 2]),\r\n    +('0x' + hexValue[isShort ? 2 : 3] + hexValue[isShort ? 2 : 4]),\r\n    +('0x' + hexValue[isShort ? 3 : 5] + hexValue[isShort ? 3 : 6]),\r\n    ((hexLength === 5 || hexLength === 9) ? +(+('0x' + hexValue[isShort ? 4 : 7] + hexValue[isShort ? 4 : 8]) / 255).toFixed(3) : 1)\r\n  ]\r\n};\r\n\r\n/**\r\n * @param  {Number} p\r\n * @param  {Number} q\r\n * @param  {Number} t\r\n * @return {Number}\r\n */\r\nconst hue2rgb = (p, q, t) => {\r\n  if (t < 0) t += 1;\r\n  if (t > 1) t -= 1;\r\n  return t < 1 / 6 ? p + (q - p) * 6 * t :\r\n         t < 1 / 2 ? q :\r\n         t < 2 / 3 ? p + (q - p) * (2 / 3 - t) * 6 :\r\n         p;\r\n};\r\n\r\n/**\r\n * HSL / HSLA Color value string -> RGBA values array\r\n * @param  {String} hslValue\r\n * @return {ColorArray}\r\n */\r\nconst hslToRgba = hslValue => {\r\n  const hsla = hslExecRgx.exec(hslValue) || hslaExecRgx.exec(hslValue);\r\n  const h = +hsla[1] / 360;\r\n  const s = +hsla[2] / 100;\r\n  const l = +hsla[3] / 100;\r\n  const a = !isUnd(hsla[4]) ? +hsla[4] : 1;\r\n  let r, g, b;\r\n  if (s === 0) {\r\n    r = g = b = l;\r\n  } else {\r\n    const q = l < .5 ? l * (1 + s) : l + s - l * s;\r\n    const p = 2 * l - q;\r\n    r = round(hue2rgb(p, q, h + 1 / 3) * 255, 0);\r\n    g = round(hue2rgb(p, q, h) * 255, 0);\r\n    b = round(hue2rgb(p, q, h - 1 / 3) * 255, 0);\r\n  }\r\n  return [r, g, b, a];\r\n};\r\n\r\n/**\r\n * All in one color converter that converts a color string value into an array of RGBA values\r\n * @param  {String} colorString\r\n * @return {ColorArray}\r\n */\r\nconst convertColorStringValuesToRgbaArray = colorString => {\r\n  return isRgb(colorString) ? rgbToRgba(colorString) :\r\n         isHex(colorString) ? hexToRgba(colorString) :\r\n         isHsl(colorString) ? hslToRgba(colorString) :\r\n         [0, 0, 0, 1];\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @template T, D\r\n * @param {T|undefined} targetValue\r\n * @param {D} defaultValue\r\n * @return {T|D}\r\n */\r\nconst setValue = (targetValue, defaultValue) => {\r\n  return isUnd(targetValue) ? defaultValue : targetValue;\r\n};\r\n\r\n/**\r\n * @param  {TweenPropValue} value\r\n * @param  {Target} target\r\n * @param  {Number} index\r\n * @param  {Number} total\r\n * @param  {Object} [store]\r\n * @return {any}\r\n */\r\nconst getFunctionValue = (value, target, index, total, store) => {\r\n  if (isFnc(value)) {\r\n    const func = () => {\r\n      const computed = /** @type {Function} */(value)(target, index, total);\r\n      // Fallback to 0 if the function returns undefined / NaN / null / false / 0\r\n      return !isNaN(+computed) ? +computed : computed || 0;\r\n    };\r\n    if (store) {\r\n      store.func = func;\r\n    }\r\n    return func();\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\n/**\r\n * @param  {Target} target\r\n * @param  {String} prop\r\n * @return {tweenTypes}\r\n */\r\nconst getTweenType = (target, prop) => {\r\n  return !target[isDomSymbol] ? tweenTypes.OBJECT :\r\n    // Handle SVG attributes\r\n    target[isSvgSymbol] && isValidSVGAttribute(target, prop) ? tweenTypes.ATTRIBUTE :\r\n    // Handle CSS Transform properties differently than CSS to allow individual animations\r\n    validTransforms.includes(prop) || shortTransforms.get(prop) ? tweenTypes.TRANSFORM :\r\n    // CSS variables\r\n    stringStartsWith(prop, '--') ? tweenTypes.CSS_VAR :\r\n    // All other CSS properties\r\n    prop in /** @type {DOMTarget} */(target).style ? tweenTypes.CSS :\r\n    // Handle other DOM Attributes\r\n    prop in target ? tweenTypes.OBJECT :\r\n    tweenTypes.ATTRIBUTE;\r\n};\r\n\r\n/**\r\n * @param  {DOMTarget} target\r\n * @param  {String} propName\r\n * @param  {Object} animationInlineStyles\r\n * @return {String}\r\n */\r\nconst getCSSValue = (target, propName, animationInlineStyles) => {\r\n  const inlineStyles = target.style[propName];\r\n  if (inlineStyles && animationInlineStyles) {\r\n    animationInlineStyles[propName] = inlineStyles;\r\n  }\r\n  const value = inlineStyles || getComputedStyle(target[proxyTargetSymbol] || target).getPropertyValue(propName);\r\n  return value === 'auto' ? '0' : value;\r\n};\r\n\r\n/**\r\n * @param {Target} target\r\n * @param {String} propName\r\n * @param {tweenTypes} [tweenType]\r\n * @param {Object|void} [animationInlineStyles]\r\n * @return {String|Number}\r\n */\r\nconst getOriginalAnimatableValue = (target, propName, tweenType, animationInlineStyles) => {\r\n  const type = !isUnd(tweenType) ? tweenType : getTweenType(target, propName);\r\n  return type === tweenTypes.OBJECT ? target[propName] || 0 :\r\n         type === tweenTypes.ATTRIBUTE ? /** @type {DOMTarget} */(target).getAttribute(propName) :\r\n         type === tweenTypes.TRANSFORM ? parseInlineTransforms(/** @type {DOMTarget} */(target), propName, animationInlineStyles) :\r\n         type === tweenTypes.CSS_VAR ? getCSSValue(/** @type {DOMTarget} */(target), propName, animationInlineStyles).trimStart() :\r\n         getCSSValue(/** @type {DOMTarget} */(target), propName, animationInlineStyles);\r\n};\r\n\r\n/**\r\n * @param  {Number} x\r\n * @param  {Number} y\r\n * @param  {String} operator\r\n * @return {Number}\r\n */\r\nconst getRelativeValue = (x, y, operator) => {\r\n  return operator === '-' ? x - y :\r\n         operator === '+' ? x + y :\r\n         x * y;\r\n};\r\n\r\n/** @return {TweenDecomposedValue} */\r\nconst createDecomposedValueTargetObject = () => {\r\n  return {\r\n    /** @type {valueTypes} */\r\n    t: valueTypes.NUMBER,\r\n    n: 0,\r\n    u: null,\r\n    o: null,\r\n    d: null,\r\n    s: null,\r\n  }\r\n};\r\n\r\n/**\r\n * @param  {String|Number} rawValue\r\n * @param  {TweenDecomposedValue} targetObject\r\n * @return {TweenDecomposedValue}\r\n */\r\nconst decomposeRawValue = (rawValue, targetObject) => {\r\n  /** @type {valueTypes} */\r\n  targetObject.t = valueTypes.NUMBER;\r\n  targetObject.n = 0;\r\n  targetObject.u = null;\r\n  targetObject.o = null;\r\n  targetObject.d = null;\r\n  targetObject.s = null;\r\n  if (!rawValue) return targetObject;\r\n  const num = +rawValue;\r\n  if (!isNaN(num)) {\r\n    // It's a number\r\n    targetObject.n = num;\r\n    return targetObject;\r\n  } else {\r\n    // let str = /** @type {String} */(rawValue).trim();\r\n    let str = /** @type {String} */(rawValue);\r\n    // Parsing operators (+=, -=, *=) manually is much faster than using regex here\r\n    if (str[1] === '=') {\r\n      targetObject.o = str[0];\r\n      str = str.slice(2);\r\n    }\r\n    // Skip exec regex if the value type is complex or color to avoid long regex backtracking\r\n    const unitMatch = str.includes(' ') ? false : unitsExecRgx.exec(str);\r\n    if (unitMatch) {\r\n      // Has a number and a unit\r\n      targetObject.t = valueTypes.UNIT;\r\n      targetObject.n = +unitMatch[1];\r\n      targetObject.u = unitMatch[2];\r\n      return targetObject;\r\n    } else if (targetObject.o) {\r\n      // Has an operator (+=, -=, *=)\r\n      targetObject.n = +str;\r\n      return targetObject;\r\n    } else if (isCol(str)) {\r\n      // Is a color\r\n      targetObject.t = valueTypes.COLOR;\r\n      targetObject.d = convertColorStringValuesToRgbaArray(str);\r\n      return targetObject;\r\n    } else {\r\n      // Is a more complex string (generally svg coords, calc() or filters CSS values)\r\n      const matchedNumbers = str.match(digitWithExponentRgx);\r\n      targetObject.t = valueTypes.COMPLEX;\r\n      targetObject.d = matchedNumbers ? matchedNumbers.map(Number) : [];\r\n      targetObject.s = str.split(digitWithExponentRgx) || [];\r\n      return targetObject;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @param  {Tween} tween\r\n * @param  {TweenDecomposedValue} targetObject\r\n * @return {TweenDecomposedValue}\r\n */\r\nconst decomposeTweenValue = (tween, targetObject) => {\r\n  targetObject.t = tween._valueType;\r\n  targetObject.n = tween._toNumber;\r\n  targetObject.u = tween._unit;\r\n  targetObject.o = null;\r\n  targetObject.d = cloneArray(tween._toNumbers);\r\n  targetObject.s = cloneArray(tween._strings);\r\n  return targetObject;\r\n};\r\n\r\nconst decomposedOriginalValue = createDecomposedValueTargetObject();\r\n\r\n\r\n\r\n\r\nconst lookups = {\r\n  /** @type {TweenReplaceLookups} */\r\n  _rep: new WeakMap(),\r\n  /** @type {TweenAdditiveLookups} */\r\n  _add: new Map(),\r\n};\r\n\r\n/**\r\n * @param  {Target} target\r\n * @param  {String} property\r\n * @param  {String} lookup\r\n * @return {TweenPropertySiblings}\r\n */\r\nconst getTweenSiblings = (target, property, lookup = '_rep') => {\r\n  const lookupMap = lookups[lookup];\r\n  let targetLookup = lookupMap.get(target);\r\n  if (!targetLookup) {\r\n    targetLookup = {};\r\n    lookupMap.set(target, targetLookup);\r\n  }\r\n  return targetLookup[property] ? targetLookup[property] : targetLookup[property] = {\r\n    _head: null,\r\n    _tail: null,\r\n  }\r\n};\r\n\r\n/**\r\n * @param  {Tween} p\r\n * @param  {Tween} c\r\n * @return {Number|Boolean}\r\n */\r\nconst addTweenSortMethod = (p, c) => {\r\n  return p._isOverridden || p._absoluteStartTime > c._absoluteStartTime;\r\n};\r\n\r\n/**\r\n * @param {Tween} tween\r\n */\r\nconst overrideTween = tween => {\r\n  tween._isOverlapped = 1;\r\n  tween._isOverridden = 1;\r\n  tween._changeDuration = minValue;\r\n  tween._currentTime = minValue;\r\n};\r\n\r\n/**\r\n * @param  {Tween} tween\r\n * @param  {TweenPropertySiblings} siblings\r\n * @return {Tween}\r\n */\r\nconst composeTween = (tween, siblings) => {\r\n\r\n  const tweenCompositionType = tween._composition;\r\n\r\n  // Handle replaced tweens\r\n\r\n  if (tweenCompositionType === compositionTypes.replace) {\r\n\r\n    const tweenAbsStartTime = tween._absoluteStartTime;\r\n\r\n    addChild(siblings, tween, addTweenSortMethod, '_prevRep', '_nextRep');\r\n\r\n    const prevSibling = tween._prevRep;\r\n\r\n    // Update the previous siblings for composition replace tweens\r\n\r\n    if (prevSibling) {\r\n\r\n      const prevParent = prevSibling.parent;\r\n      const prevAbsEndTime = prevSibling._absoluteStartTime + prevSibling._changeDuration;\r\n\r\n      // Handle looped animations tween\r\n\r\n      if (\r\n        // Check if the previous tween is from a different animation\r\n        tween.parent.id !== prevParent.id &&\r\n        // Check if the animation has loops\r\n        prevParent.iterationCount> 1 &&\r\n        // Check if _absoluteChangeEndTime of last loop overlaps the current tween\r\n        prevAbsEndTime + (prevParent.duration - prevParent.iterationDuration) > tweenAbsStartTime\r\n      ) {\r\n\r\n        // TODO: Find a way to only override the iterations overlapping with the tween\r\n        overrideTween(prevSibling);\r\n\r\n        let prevPrevSibling = prevSibling._prevRep;\r\n\r\n        // If the tween was part of a set of keyframes, override its siblings\r\n        while (prevPrevSibling && prevPrevSibling.parent.id === prevParent.id) {\r\n          overrideTween(prevPrevSibling);\r\n          prevPrevSibling = prevPrevSibling._prevRep;\r\n        }\r\n\r\n      }\r\n\r\n      const absoluteUpdateStartTime = tweenAbsStartTime - tween._delay;\r\n\r\n      if (prevAbsEndTime > absoluteUpdateStartTime) {\r\n\r\n        const prevChangeStartTime = prevSibling._startTime;\r\n        const prevTLOffset = prevAbsEndTime - (prevChangeStartTime + prevSibling._updateDuration);\r\n\r\n        prevSibling._changeDuration = absoluteUpdateStartTime - prevTLOffset - prevChangeStartTime;\r\n        prevSibling._currentTime = prevSibling._changeDuration;\r\n        prevSibling._isOverlapped = 1;\r\n\r\n        if (prevSibling._changeDuration < minValue) {\r\n          overrideTween(prevSibling);\r\n        }\r\n      }\r\n\r\n      // Pause (and cancel) the parent if it only contains overlapped tweens\r\n\r\n      let pausePrevParentAnimation = true;\r\n\r\n      forEachChildren(prevParent, (/** @type Tween */t) => {\r\n        if (!t._isOverlapped) pausePrevParentAnimation = false;\r\n      });\r\n\r\n      if (pausePrevParentAnimation) {\r\n        const prevParentTL = prevParent.parent;\r\n        if (prevParentTL) {\r\n          let pausePrevParentTL = true;\r\n          forEachChildren(prevParentTL, (/** @type JSAnimation */a) => {\r\n            if (a !== prevParent) {\r\n              forEachChildren(a, (/** @type Tween */t) => {\r\n                if (!t._isOverlapped) pausePrevParentTL = false;\r\n              });\r\n            }\r\n          });\r\n          if (pausePrevParentTL) {\r\n            prevParentTL.cancel();\r\n          }\r\n        } else {\r\n          prevParent.cancel();\r\n          // Previously, calling .cancel() on a timeline child would affect the render order of other children\r\n          // Worked around this by marking it as .completed and using .pause() for safe removal in the engine loop\r\n          // This is no longer needed since timeline tween composition is now handled separatly\r\n          // Keeping this here for reference\r\n          // prevParent.completed = true;\r\n          // prevParent.pause();\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    // let nextSibling = tween._nextRep;\r\n\r\n    // // All the next siblings are automatically overridden\r\n\r\n    // if (nextSibling && nextSibling._absoluteStartTime >= tweenAbsStartTime) {\r\n    //   while (nextSibling) {\r\n    //     overrideTween(nextSibling);\r\n    //     nextSibling = nextSibling._nextRep;\r\n    //   }\r\n    // }\r\n\r\n    // if (nextSibling && nextSibling._absoluteStartTime < tweenAbsStartTime) {\r\n    //   while (nextSibling) {\r\n    //     overrideTween(nextSibling);\r\n    //     console.log(tween.id, nextSibling.id);\r\n    //     nextSibling = nextSibling._nextRep;\r\n    //   }\r\n    // }\r\n\r\n  // Handle additive tweens composition\r\n\r\n  } else if (tweenCompositionType === compositionTypes.blend) {\r\n\r\n    const additiveTweenSiblings = getTweenSiblings(tween.target, tween.property, '_add');\r\n    const additiveAnimation = addAdditiveAnimation(lookups._add);\r\n\r\n    let lookupTween = additiveTweenSiblings._head;\r\n\r\n    if (!lookupTween) {\r\n      lookupTween = { ...tween };\r\n      lookupTween._composition = compositionTypes.replace;\r\n      lookupTween._updateDuration = minValue;\r\n      lookupTween._startTime = 0;\r\n      lookupTween._numbers = cloneArray(tween._fromNumbers);\r\n      lookupTween._number = 0;\r\n      lookupTween._next = null;\r\n      lookupTween._prev = null;\r\n      addChild(additiveTweenSiblings, lookupTween);\r\n      addChild(additiveAnimation, lookupTween);\r\n    }\r\n\r\n    // Convert the values of TO to FROM and set TO to 0\r\n\r\n    const toNumber = tween._toNumber;\r\n    tween._fromNumber = lookupTween._fromNumber - toNumber;\r\n    tween._toNumber = 0;\r\n    tween._numbers = cloneArray(tween._fromNumbers);\r\n    tween._number = 0;\r\n    lookupTween._fromNumber = toNumber;\r\n\r\n    if (tween._toNumbers) {\r\n      const toNumbers = cloneArray(tween._toNumbers);\r\n      if (toNumbers) {\r\n        toNumbers.forEach((value, i) => {\r\n          tween._fromNumbers[i] = lookupTween._fromNumbers[i] - value;\r\n          tween._toNumbers[i] = 0;\r\n        });\r\n      }\r\n      lookupTween._fromNumbers = toNumbers;\r\n    }\r\n\r\n    addChild(additiveTweenSiblings, tween, null, '_prevAdd', '_nextAdd');\r\n\r\n  }\r\n\r\n  return tween;\r\n\r\n};\r\n\r\n/**\r\n * @param  {Tween} tween\r\n * @return {Tween}\r\n */\r\nconst removeTweenSliblings = tween => {\r\n  const tweenComposition = tween._composition;\r\n  if (tweenComposition !== compositionTypes.none) {\r\n    const tweenTarget = tween.target;\r\n    const tweenProperty = tween.property;\r\n    const replaceTweensLookup = lookups._rep;\r\n    const replaceTargetProps = replaceTweensLookup.get(tweenTarget);\r\n    const tweenReplaceSiblings = replaceTargetProps[tweenProperty];\r\n    removeChild(tweenReplaceSiblings, tween, '_prevRep', '_nextRep');\r\n    if (tweenComposition === compositionTypes.blend) {\r\n      const addTweensLookup = lookups._add;\r\n      const addTargetProps = addTweensLookup.get(tweenTarget);\r\n      if (!addTargetProps) return;\r\n      const additiveTweenSiblings = addTargetProps[tweenProperty];\r\n      const additiveAnimation = additive.animation;\r\n      removeChild(additiveTweenSiblings, tween, '_prevAdd', '_nextAdd');\r\n      // If only one tween is left in the additive lookup, it's the tween lookup\r\n      const lookupTween = additiveTweenSiblings._head;\r\n      if (lookupTween && lookupTween === additiveTweenSiblings._tail) {\r\n        removeChild(additiveTweenSiblings, lookupTween, '_prevAdd', '_nextAdd');\r\n        removeChild(additiveAnimation, lookupTween);\r\n        let shouldClean = true;\r\n        for (let prop in addTargetProps) {\r\n          if (addTargetProps[prop]._head) {\r\n            shouldClean = false;\r\n            break;\r\n          }\r\n        }\r\n        if (shouldClean) {\r\n          addTweensLookup.delete(tweenTarget);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return tween;\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @param  {Timer} timer\r\n * @return {Timer}\r\n */\r\nconst resetTimerProperties = timer => {\r\n  timer.paused = true;\r\n  timer.began = false;\r\n  timer.completed = false;\r\n  return timer;\r\n};\r\n\r\n/**\r\n * @param  {Timer} timer\r\n * @return {Timer}\r\n */\r\nconst reviveTimer = timer => {\r\n  if (!timer._cancelled) return timer;\r\n  if (timer._hasChildren) {\r\n    forEachChildren(timer, reviveTimer);\r\n  } else {\r\n    forEachChildren(timer, (/** @type {Tween} tween*/tween) => {\r\n      if (tween._composition !== compositionTypes.none) {\r\n        composeTween(tween, getTweenSiblings(tween.target, tween.property));\r\n      }\r\n    });\r\n  }\r\n  timer._cancelled = 0;\r\n  return timer;\r\n};\r\n\r\nlet timerId = 0;\r\n\r\n/**\r\n * Base class used to create Timers, Animations and Timelines\r\n */\r\nclass Timer extends Clock {\r\n  /**\r\n   * @param {TimerParams} [parameters]\r\n   * @param {Timeline} [parent]\r\n   * @param {Number} [parentPosition]\r\n   */\r\n  constructor(parameters = {}, parent = null, parentPosition = 0) {\r\n\r\n    super(0);\r\n\r\n    const {\r\n      id,\r\n      delay,\r\n      duration,\r\n      reversed,\r\n      alternate,\r\n      loop,\r\n      loopDelay,\r\n      autoplay,\r\n      frameRate,\r\n      playbackRate,\r\n      onComplete,\r\n      onLoop,\r\n      onPause,\r\n      onBegin,\r\n      onBeforeUpdate,\r\n      onUpdate,\r\n    } = parameters;\r\n\r\n    if (scope.current) scope.current.register(this);\r\n\r\n    const timerInitTime = parent ? 0 : engine._elapsedTime;\r\n    const timerDefaults = parent ? parent.defaults : globals.defaults;\r\n    const timerDelay = /** @type {Number} */(isFnc(delay) || isUnd(delay) ? timerDefaults.delay : +delay);\r\n    const timerDuration = isFnc(duration) || isUnd(duration) ? Infinity : +duration;\r\n    const timerLoop = setValue(loop, timerDefaults.loop);\r\n    const timerLoopDelay = setValue(loopDelay, timerDefaults.loopDelay);\r\n    const timerIterationCount = timerLoop === true ||\r\n                                timerLoop === Infinity ||\r\n                                /** @type {Number} */(timerLoop) < 0 ? Infinity :\r\n                                /** @type {Number} */(timerLoop) + 1;\r\n\r\n    let offsetPosition = 0;\r\n\r\n    if (parent) {\r\n      offsetPosition = parentPosition;\r\n    } else {\r\n      let startTime = now();\r\n      // Make sure to tick the engine once if suspended to avoid big gaps with the following offsetPosition calculation\r\n      if (engine.paused) {\r\n        engine.requestTick(startTime);\r\n        startTime = engine._elapsedTime;\r\n      }\r\n      offsetPosition = startTime - engine._startTime;\r\n    }\r\n\r\n    // Timer's parameters\r\n    this.id = !isUnd(id) ? id : ++timerId;\r\n    /** @type {Timeline} */\r\n    this.parent = parent;\r\n    // Total duration of the timer\r\n    this.duration = clampInfinity(((timerDuration + timerLoopDelay) * timerIterationCount) - timerLoopDelay) || minValue;\r\n    /** @type {Boolean} */\r\n    this.backwards = false;\r\n    /** @type {Boolean} */\r\n    this.paused = true;\r\n    /** @type {Boolean} */\r\n    this.began = false;\r\n    /** @type {Boolean} */\r\n    this.completed = false;\r\n    /** @type {Callback<this>} */\r\n    this.onBegin = onBegin || timerDefaults.onBegin;\r\n    /** @type {Callback<this>} */\r\n    this.onBeforeUpdate = onBeforeUpdate || timerDefaults.onBeforeUpdate;\r\n    /** @type {Callback<this>} */\r\n    this.onUpdate = onUpdate || timerDefaults.onUpdate;\r\n    /** @type {Callback<this>} */\r\n    this.onLoop = onLoop || timerDefaults.onLoop;\r\n    /** @type {Callback<this>} */\r\n    this.onPause = onPause || timerDefaults.onPause;\r\n    /** @type {Callback<this>} */\r\n    this.onComplete = onComplete || timerDefaults.onComplete;\r\n    /** @type {Number} */\r\n    this.iterationDuration = timerDuration; // Duration of one loop\r\n    /** @type {Number} */\r\n    this.iterationCount = timerIterationCount; // Number of loops\r\n    /** @type {Boolean|ScrollObserver} */\r\n    this._autoplay = parent ? false : setValue(autoplay, timerDefaults.autoplay);\r\n    /** @type {Number} */\r\n    this._offset = offsetPosition;\r\n    /** @type {Number} */\r\n    this._delay = timerDelay;\r\n    /** @type {Number} */\r\n    this._loopDelay = timerLoopDelay;\r\n    /** @type {Number} */\r\n    this._iterationTime = 0;\r\n    /** @type {Number} */\r\n    this._currentIteration = 0; // Current loop index\r\n    /** @type {Function} */\r\n    this._resolve = noop; // Used by .then()\r\n    /** @type {Boolean} */\r\n    this._running = false;\r\n    /** @type {Number} */\r\n    this._reversed = +setValue(reversed, timerDefaults.reversed);\r\n    /** @type {Number} */\r\n    this._reverse = this._reversed;\r\n    /** @type {Number} */\r\n    this._cancelled = 0;\r\n    /** @type {Boolean} */\r\n    this._alternate = setValue(alternate, timerDefaults.alternate);\r\n    /** @type {Renderable} */\r\n    this._prev = null;\r\n    /** @type {Renderable} */\r\n    this._next = null;\r\n\r\n    // Clock's parameters\r\n    /** @type {Number} */\r\n    this._elapsedTime = timerInitTime;\r\n    /** @type {Number} */\r\n    this._startTime = timerInitTime;\r\n    /** @type {Number} */\r\n    this._lastTime = timerInitTime;\r\n    /** @type {Number} */\r\n    this._fps = setValue(frameRate, timerDefaults.frameRate);\r\n    /** @type {Number} */\r\n    this._speed = setValue(playbackRate, timerDefaults.playbackRate);\r\n  }\r\n\r\n  get cancelled() {\r\n    return !!this._cancelled;\r\n  }\r\n\r\n  /** @param {Boolean} cancelled  */\r\n  set cancelled(cancelled) {\r\n    cancelled ? this.cancel() : this.reset(1).play();\r\n  }\r\n\r\n  get currentTime() {\r\n    return clamp(round(this._currentTime, globals.precision), -this._delay, this.duration);\r\n  }\r\n\r\n  /** @param {Number} time  */\r\n  set currentTime(time) {\r\n    const paused = this.paused;\r\n    // Pausing the timer is necessary to avoid time jumps on a running instance\r\n    this.pause().seek(+time);\r\n    if (!paused) this.resume();\r\n  }\r\n\r\n  get iterationCurrentTime() {\r\n    return round(this._iterationTime, globals.precision);\r\n  }\r\n\r\n  /** @param {Number} time  */\r\n  set iterationCurrentTime(time) {\r\n    this.currentTime = (this.iterationDuration * this._currentIteration) + time;\r\n  }\r\n\r\n  get progress() {\r\n    return clamp(round(this._currentTime / this.duration, 10), 0, 1);\r\n  }\r\n\r\n  /** @param {Number} progress  */\r\n  set progress(progress) {\r\n    this.currentTime = this.duration * progress;\r\n  }\r\n\r\n  get iterationProgress() {\r\n    return clamp(round(this._iterationTime / this.iterationDuration, 10), 0, 1);\r\n  }\r\n\r\n  /** @param {Number} progress  */\r\n  set iterationProgress(progress) {\r\n    const iterationDuration = this.iterationDuration;\r\n    this.currentTime = (iterationDuration * this._currentIteration) + (iterationDuration * progress);\r\n  }\r\n\r\n  get currentIteration() {\r\n    return this._currentIteration;\r\n  }\r\n\r\n  /** @param {Number} iterationCount  */\r\n  set currentIteration(iterationCount) {\r\n    this.currentTime = (this.iterationDuration * clamp(+iterationCount, 0, this.iterationCount - 1));\r\n  }\r\n\r\n  get reversed() {\r\n    return !!this._reversed;\r\n  }\r\n\r\n  /** @param {Boolean} reverse  */\r\n  set reversed(reverse) {\r\n    reverse ? this.reverse() : this.play();\r\n  }\r\n\r\n  get speed() {\r\n    return super.speed;\r\n  }\r\n\r\n  /** @param {Number} playbackRate  */\r\n  set speed(playbackRate) {\r\n    super.speed = playbackRate;\r\n    this.resetTime();\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} internalRender\r\n   * @return {this}\r\n   */\r\n  reset(internalRender = 0) {\r\n    // If cancelled, revive the timer before rendering in order to have propertly composed tweens siblings\r\n    reviveTimer(this);\r\n    if (this._reversed && !this._reverse) this.reversed = false;\r\n    // Rendering before updating the completed flag to prevent skips and to make sure the properties are not overridden\r\n    // Setting the iterationTime at the end to force the rendering to happend backwards, otherwise calling .reset() on Timelines might not render children in the right order\r\n    // NOTE: This is only required for Timelines and might be better to move to the Timeline class?\r\n    this._iterationTime = this.iterationDuration;\r\n    // Set tickMode to tickModes.FORCE to force rendering\r\n    tick(this, 0, 1, internalRender, tickModes.FORCE);\r\n    // Reset timer properties after revive / render to make sure the props are not updated again\r\n    resetTimerProperties(this);\r\n    // Also reset children properties\r\n    if (this._hasChildren) {\r\n      forEachChildren(this, resetTimerProperties);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} internalRender\r\n   * @return {this}\r\n   */\r\n  init(internalRender = 0) {\r\n    this.fps = this._fps;\r\n    this.speed = this._speed;\r\n    // Manually calling .init() on timelines should render all children intial state\r\n    // Forces all children to render once then render to 0 when reseted\r\n    if (!internalRender && this._hasChildren) {\r\n      tick(this, this.duration, 1, internalRender, tickModes.FORCE);\r\n    }\r\n    this.reset(internalRender);\r\n    // Make sure to set autoplay to false to child timers so it doesn't attempt to autoplay / link\r\n    const autoplay = this._autoplay;\r\n    if (autoplay === true) {\r\n      this.resume();\r\n    } else if (autoplay && !isUnd(/** @type {ScrollObserver} */(autoplay).linked)) {\r\n      /** @type {ScrollObserver} */(autoplay).link(this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /** @return {this} */\r\n  resetTime() {\r\n    const timeScale = 1 / (this._speed * engine._speed);\r\n    this._startTime = now() - (this._currentTime + this._delay) * timeScale;\r\n    return this;\r\n  }\r\n\r\n  /** @return {this} */\r\n  pause() {\r\n    if (this.paused) return this;\r\n    this.paused = true;\r\n    this.onPause(this);\r\n    return this;\r\n  }\r\n\r\n  /** @return {this} */\r\n  resume() {\r\n    if (!this.paused) return this;\r\n    this.paused = false;\r\n    // We can safely imediatly render a timer that has no duration and no children\r\n    if (this.duration <= minValue && !this._hasChildren) {\r\n      tick(this, minValue, 0, 0, tickModes.FORCE);\r\n    } else {\r\n      if (!this._running) {\r\n        addChild(engine, this);\r\n        engine._hasChildren = true;\r\n        this._running = true;\r\n      }\r\n      this.resetTime();\r\n      // Forces the timer to advance by at least one frame when the next tick occurs\r\n      this._startTime -= 12;\r\n      engine.wake();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /** @return {this} */\r\n  restart() {\r\n    return this.reset(0).resume();\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} time\r\n   * @param  {Boolean|Number} [muteCallbacks]\r\n   * @param  {Boolean|Number} [internalRender]\r\n   * @return {this}\r\n   */\r\n  seek(time, muteCallbacks = 0, internalRender = 0) {\r\n    // Recompose the tween siblings in case the timer has been cancelled\r\n    reviveTimer(this);\r\n    // If you seek a completed animation, otherwise the next play will starts at 0\r\n    this.completed = false;\r\n    const isPaused = this.paused;\r\n    this.paused = true;\r\n    // timer, time, muteCallbacks, internalRender, tickMode\r\n    tick(this, time + this._delay, ~~muteCallbacks, ~~internalRender, tickModes.AUTO);\r\n    return isPaused ? this : this.resume();\r\n  }\r\n\r\n  /** @return {this} */\r\n  alternate() {\r\n    const reversed = this._reversed;\r\n    const count = this.iterationCount;\r\n    const duration = this.iterationDuration;\r\n    // Calculate the maximum iterations possible given the iteration duration\r\n    const iterations = count === Infinity ? floor(maxValue / duration) : count;\r\n    this._reversed = +(this._alternate && !(iterations % 2) ? reversed : !reversed);\r\n    if (count === Infinity) {\r\n      // Handle infinite loops to loop on themself\r\n      this.iterationProgress = this._reversed ? 1 - this.iterationProgress : this.iterationProgress;\r\n    } else {\r\n      this.seek((duration * iterations) - this._currentTime);\r\n    }\r\n    this.resetTime();\r\n    return this;\r\n  }\r\n\r\n  /** @return {this} */\r\n  play() {\r\n    if (this._reversed) this.alternate();\r\n    return this.resume();\r\n  }\r\n\r\n  /** @return {this} */\r\n  reverse() {\r\n    if (!this._reversed) this.alternate();\r\n    return this.resume();\r\n  }\r\n\r\n  // TODO: Move all the animation / tweens / children related code to Animation / Timeline\r\n\r\n  /** @return {this} */\r\n  cancel() {\r\n    if (this._hasChildren) {\r\n      forEachChildren(this, (/** @type {Renderable} */child) => child.cancel(), true);\r\n    } else {\r\n      forEachChildren(this, removeTweenSliblings);\r\n    }\r\n    this._cancelled = 1;\r\n    // Pausing the timer removes it from the engine\r\n    return this.pause();\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} newDuration\r\n   * @return {this}\r\n   */\r\n  stretch(newDuration) {\r\n    const currentDuration = this.duration;\r\n    const normlizedDuration = normalizeTime(newDuration);\r\n    if (currentDuration === normlizedDuration) return this;\r\n    const timeScale = newDuration / currentDuration;\r\n    const isSetter = newDuration <= minValue;\r\n    this.duration = isSetter ? minValue : normlizedDuration;\r\n    this.iterationDuration = isSetter ? minValue : normalizeTime(this.iterationDuration * timeScale);\r\n    this._offset *= timeScale;\r\n    this._delay *= timeScale;\r\n    this._loopDelay *= timeScale;\r\n    return this;\r\n  }\r\n\r\n /**\r\n   * Cancels the timer by seeking it back to 0 and reverting the attached scroller if necessary\r\n   * @return {this}\r\n   */\r\n  revert() {\r\n    tick(this, 0, 1, 0, tickModes.AUTO);\r\n    const ap = /** @type {ScrollObserver} */(this._autoplay);\r\n    if (ap && ap.linked && ap.linked === this) ap.revert();\r\n    return this.cancel();\r\n  }\r\n\r\n /**\r\n   * Imediatly completes the timer, cancels it and triggers the onComplete callback\r\n   * @return {this}\r\n   */\r\n  complete() {\r\n    return this.seek(this.duration).cancel();\r\n  }\r\n\r\n  /**\r\n   * @param  {Callback<this>} [callback]\r\n   * @return {Promise}\r\n   */\r\n  then(callback = noop) {\r\n    const then = this.then;\r\n    const onResolve = () => {\r\n      // this.then = null prevents infinite recursion if returned by an async function\r\n      // https://github.com/juliangarnierorg/anime-beta/issues/26\r\n      this.then = null;\r\n      callback(this);\r\n      this.then = then;\r\n      this._resolve = noop;\r\n    };\r\n    return new Promise(r => {\r\n      this._resolve = () => r(onResolve());\r\n      // Make sure to resolve imediatly if the timer has already completed\r\n      if (this.completed) this._resolve();\r\n      return this;\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n * @param {TimerParams} [parameters]\r\n * @return {Timer}\r\n */\r\nconst createTimer = parameters => new Timer(parameters, null, 0).init();\r\n\r\n\r\n\r\n\r\n/** @type {EasingFunction} */\r\nconst none = t => t;\r\n\r\n// Cubic Bezier solver adapted from https://github.com/gre/bezier-ease © Gaëtan Renaudeau\r\n\r\n/**\r\n * @param  {Number} aT\r\n * @param  {Number} aA1\r\n * @param  {Number} aA2\r\n * @return {Number}\r\n */\r\nconst calcBezier = (aT, aA1, aA2) => (((1 - 3 * aA2 + 3 * aA1) * aT + (3 * aA2 - 6 * aA1)) * aT + (3 * aA1)) * aT;\r\n\r\n/**\r\n * @param  {Number} aX\r\n * @param  {Number} mX1\r\n * @param  {Number} mX2\r\n * @return {Number}\r\n */\r\nconst binarySubdivide = (aX, mX1, mX2) => {\r\n  let aA = 0, aB = 1, currentX, currentT, i = 0;\r\n  do {\r\n    currentT = aA + (aB - aA) / 2;\r\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n    if (currentX > 0) {\r\n      aB = currentT;\r\n    } else {\r\n      aA = currentT;\r\n    }\r\n  } while (abs(currentX) > .0000001 && ++i < 100);\r\n  return currentT;\r\n};\r\n\r\n/**\r\n * @param  {Number} [mX1]\r\n * @param  {Number} [mY1]\r\n * @param  {Number} [mX2]\r\n * @param  {Number} [mY2]\r\n * @return {EasingFunction}\r\n */\r\n\r\nconst cubicBezier = (mX1 = 0.5, mY1 = 0.0, mX2 = 0.5, mY2 = 1.0) => (mX1 === mY1 && mX2 === mY2) ? none :\r\n  t => t === 0 || t === 1 ? t :\r\n  calcBezier(binarySubdivide(t, mX1, mX2), mY1, mY2);\r\n\r\n/**\r\n * Steps ease implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\r\n * Only covers 'end' and 'start' jumpterms\r\n * @param  {Number} steps\r\n * @param  {Boolean} [fromStart]\r\n * @return {EasingFunction}\r\n */\r\nconst steps = (steps = 10, fromStart) => {\r\n  const roundMethod = fromStart ? ceil : floor;\r\n  return t => roundMethod(clamp(t, 0, 1) * steps) * (1 / steps);\r\n};\r\n\r\n/**\r\n * Without parameters, the linear function creates a non-eased transition.\r\n * Parameters, if used, creates a piecewise linear easing by interpolating linearly between the specified points.\r\n * @param  {...String|Number} [args] - Points\r\n * @return {EasingFunction}\r\n */\r\nconst linear = (...args) => {\r\n  const argsLength = args.length;\r\n  if (!argsLength) return none;\r\n  const totalPoints = argsLength - 1;\r\n  const firstArg = args[0];\r\n  const lastArg = args[totalPoints];\r\n  const xPoints = [0];\r\n  const yPoints = [parseNumber(firstArg)];\r\n  for (let i = 1; i < totalPoints; i++) {\r\n    const arg = args[i];\r\n    const splitValue = isStr(arg) ?\r\n    /** @type {String} */(arg).trim().split(' ') :\r\n    [arg];\r\n    const value = splitValue[0];\r\n    const percent = splitValue[1];\r\n    xPoints.push(!isUnd(percent) ? parseNumber(percent) / 100 : i / totalPoints);\r\n    yPoints.push(parseNumber(value));\r\n  }\r\n  yPoints.push(parseNumber(lastArg));\r\n  xPoints.push(1);\r\n  return function easeLinear(t) {\r\n    for (let i = 1, l = xPoints.length; i < l; i++) {\r\n      const currentX = xPoints[i];\r\n      if (t <= currentX) {\r\n        const prevX = xPoints[i - 1];\r\n        const prevY = yPoints[i - 1];\r\n        return prevY + (yPoints[i] - prevY) * (t - prevX) / (currentX - prevX);\r\n      }\r\n    }\r\n    return yPoints[yPoints.length - 1];\r\n  }\r\n};\r\n\r\n/**\r\n * Generate random steps\r\n * @param  {Number} [length] - The number of steps\r\n * @param  {Number} [randomness] - How strong the randomness is\r\n * @return {EasingFunction}\r\n */\r\nconst irregular = (length = 10, randomness = 1) => {\r\n  const values = [0];\r\n  const total = length - 1;\r\n  for (let i = 1; i < total; i++) {\r\n    const previousValue = values[i - 1];\r\n    const spacing = i / total;\r\n    const segmentEnd = (i + 1) / total;\r\n    const randomVariation = spacing + (segmentEnd - spacing) * Math.random();\r\n    // Mix the even spacing and random variation based on the randomness parameter\r\n    const randomValue = spacing * (1 - randomness) + randomVariation * randomness;\r\n    values.push(clamp(randomValue, previousValue, 1));\r\n  }\r\n  values.push(1);\r\n  return linear(...values);\r\n};\r\n\r\n// Easing functions adapted from http://www.robertpenner.com/ease © Robert Penner\r\n\r\n/**\r\n * @callback PowerEasing\r\n * @param {Number|String} [power=1.675]\r\n * @return {EasingFunction}\r\n */\r\n\r\n/**\r\n * @callback BackEasing\r\n * @param {Number|String} [overshoot=1.70158]\r\n * @return {EasingFunction}\r\n */\r\n\r\n/**\r\n * @callback ElasticEasing\r\n * @param {Number|String} [amplitude=1]\r\n * @param {Number|String} [period=.3]\r\n * @return {EasingFunction}\r\n */\r\n\r\n/**\r\n * @callback EaseFactory\r\n * @param {Number|String} [paramA]\r\n * @param {Number|String} [paramB]\r\n * @return {EasingFunction|Number}\r\n */\r\n\r\n/** @typedef {PowerEasing|BackEasing|ElasticEasing} EasesFactory */\r\n\r\nconst halfPI = PI / 2;\r\nconst doublePI = PI * 2;\r\n/** @type {PowerEasing} */\r\nconst easeInPower = (p = 1.68) => t => pow(t, +p);\r\n\r\n/** @type {Record<String, EasesFactory|EasingFunction>} */\r\nconst easeInFunctions = {\r\n  [emptyString]: easeInPower,\r\n  Quad: easeInPower(2),\r\n  Cubic: easeInPower(3),\r\n  Quart: easeInPower(4),\r\n  Quint: easeInPower(5),\r\n  /** @type {EasingFunction} */\r\n  Sine: t => 1 - cos(t * halfPI),\r\n  /** @type {EasingFunction} */\r\n  Circ: t => 1 - sqrt(1 - t * t),\r\n  /** @type {EasingFunction} */\r\n  Expo: t => t ? pow(2, 10 * t - 10) : 0,\r\n  /** @type {EasingFunction} */\r\n  Bounce: t => {\r\n    let pow2, b = 4;\r\n    while (t < ((pow2 = pow(2, --b)) - 1) / 11);\r\n    return 1 / pow(4, 3 - b) - 7.5625 * pow((pow2 * 3 - 2) / 22 - t, 2);\r\n  },\r\n  /** @type {BackEasing} */\r\n  Back: (overshoot = 1.70158) => t => (+overshoot + 1) * t * t * t - +overshoot * t * t,\r\n  /** @type {ElasticEasing} */\r\n  Elastic: (amplitude = 1, period = .3) => {\r\n    const a = clamp(+amplitude, 1, 10);\r\n    const p = clamp(+period, minValue, 2);\r\n    const s = (p / doublePI) * asin(1 / a);\r\n    const e = doublePI / p;\r\n    return t => t === 0 || t === 1 ? t : -a * pow(2, -10 * (1 - t)) * sin(((1 - t) - s) * e);\r\n  }\r\n};\r\n\r\n/**\r\n * @callback EaseType\r\n * @param {EasingFunction} Ease\r\n * @return {EasingFunction}\r\n */\r\n\r\n/** @type {Record<String, EaseType>} */\r\nconst easeTypes = {\r\n  in: easeIn => t => easeIn(t),\r\n  out: easeIn => t => 1 - easeIn(1 - t),\r\n  inOut: easeIn => t => t < .5 ? easeIn(t * 2) / 2 : 1 - easeIn(t * -2 + 2) / 2,\r\n  outIn: easeIn => t => t < .5 ? (1 - easeIn(1 - t * 2)) / 2 : (easeIn(t * 2 - 1) + 1) / 2,\r\n};\r\n\r\n/**\r\n * @param  {String} string\r\n * @param  {Record<String, EasesFactory|EasingFunction>} easesFunctions\r\n * @param  {Object} easesLookups\r\n * @return {EasingFunction}\r\n */\r\nconst parseEaseString = (string, easesFunctions, easesLookups) => {\r\n  if (easesLookups[string]) return easesLookups[string];\r\n  if (string.indexOf('(') <= -1) {\r\n    const hasParams = easeTypes[string] || string.includes('Back') || string.includes('Elastic');\r\n    const parsedFn = /** @type {EasingFunction} */(hasParams ? /** @type {EasesFactory} */(easesFunctions[string])() : easesFunctions[string]);\r\n    return parsedFn ? easesLookups[string] = parsedFn : none;\r\n  } else {\r\n    const split = string.slice(0, -1).split('(');\r\n    const parsedFn = /** @type {EasesFactory} */(easesFunctions[split[0]]);\r\n    return parsedFn ? easesLookups[string] = parsedFn(...split[1].split(',')) : none;\r\n  }\r\n};\r\n\r\n/**\r\n * @typedef  {Object} EasesFunctions\r\n * @property {typeof linear} linear\r\n * @property {typeof irregular} irregular\r\n * @property {typeof steps} steps\r\n * @property {typeof cubicBezier} cubicBezier\r\n * @property {PowerEasing} in\r\n * @property {PowerEasing} out\r\n * @property {PowerEasing} inOut\r\n * @property {PowerEasing} outIn\r\n * @property {EasingFunction} inQuad\r\n * @property {EasingFunction} outQuad\r\n * @property {EasingFunction} inOutQuad\r\n * @property {EasingFunction} outInQuad\r\n * @property {EasingFunction} inCubic\r\n * @property {EasingFunction} outCubic\r\n * @property {EasingFunction} inOutCubic\r\n * @property {EasingFunction} outInCubic\r\n * @property {EasingFunction} inQuart\r\n * @property {EasingFunction} outQuart\r\n * @property {EasingFunction} inOutQuart\r\n * @property {EasingFunction} outInQuart\r\n * @property {EasingFunction} inQuint\r\n * @property {EasingFunction} outQuint\r\n * @property {EasingFunction} inOutQuint\r\n * @property {EasingFunction} outInQuint\r\n * @property {EasingFunction} inSine\r\n * @property {EasingFunction} outSine\r\n * @property {EasingFunction} inOutSine\r\n * @property {EasingFunction} outInSine\r\n * @property {EasingFunction} inCirc\r\n * @property {EasingFunction} outCirc\r\n * @property {EasingFunction} inOutCirc\r\n * @property {EasingFunction} outInCirc\r\n * @property {EasingFunction} inExpo\r\n * @property {EasingFunction} outExpo\r\n * @property {EasingFunction} inOutExpo\r\n * @property {EasingFunction} outInExpo\r\n * @property {EasingFunction} inBounce\r\n * @property {EasingFunction} outBounce\r\n * @property {EasingFunction} inOutBounce\r\n * @property {EasingFunction} outInBounce\r\n * @property {BackEasing} inBack\r\n * @property {BackEasing} outBack\r\n * @property {BackEasing} inOutBack\r\n * @property {BackEasing} outInBack\r\n * @property {ElasticEasing} inElastic\r\n * @property {ElasticEasing} outElastic\r\n * @property {ElasticEasing} inOutElastic\r\n * @property {ElasticEasing} outInElastic\r\n */\r\n\r\nconst eases = (/*#__PURE__*/ (() => {\r\n  const list = { linear, irregular, steps, cubicBezier };\r\n  for (let type in easeTypes) {\r\n    for (let name in easeInFunctions) {\r\n      const easeIn = easeInFunctions[name];\r\n      const easeType = easeTypes[type];\r\n      list[type + name] = /** @type {EasesFactory|EasingFunction} */(\r\n        name === emptyString || name === 'Back' || name === 'Elastic' ?\r\n        (a, b) => easeType(/** @type {EasesFactory} */(easeIn)(a, b)) :\r\n        easeType(/** @type {EasingFunction} */(easeIn))\r\n      );\r\n    }\r\n  }\r\n  return /** @type {EasesFunctions} */(list);\r\n})());\r\n\r\n/** @type {Record<String, EasingFunction>} */\r\nconst JSEasesLookups = { linear: none };\r\n\r\n/**\r\n * @param  {EasingParam} ease\r\n * @return {EasingFunction}\r\n */\r\nconst parseEasings = ease => isFnc(ease) ? ease :\r\n  isStr(ease) ? parseEaseString(/** @type {String} */(ease), eases, JSEasesLookups) :\r\n  none;\r\n\r\n\r\n\r\n\r\nconst propertyNamesCache = {};\r\n\r\n/**\r\n * @param  {String} propertyName\r\n * @param  {Target} target\r\n * @param  {tweenTypes} tweenType\r\n * @return {String}\r\n */\r\nconst sanitizePropertyName = (propertyName, target, tweenType) => {\r\n  if (tweenType === tweenTypes.TRANSFORM) {\r\n    const t = shortTransforms.get(propertyName);\r\n    return t ? t : propertyName;\r\n  } else if (\r\n    tweenType === tweenTypes.CSS ||\r\n    // Handle special cases where properties like \"strokeDashoffset\" needs to be set as \"stroke-dashoffset\"\r\n    // but properties like \"baseFrequency\" should stay in lowerCamelCase\r\n    (tweenType === tweenTypes.ATTRIBUTE && (isSvg(target) && propertyName in /** @type {DOMTarget} */(target).style))\r\n  ) {\r\n    const cachedPropertyName = propertyNamesCache[propertyName];\r\n    if (cachedPropertyName) {\r\n      return cachedPropertyName;\r\n    } else {\r\n      const lowerCaseName = propertyName ? toLowerCase(propertyName) : propertyName;\r\n      propertyNamesCache[propertyName] = lowerCaseName;\r\n      return lowerCaseName;\r\n    }\r\n  } else {\r\n    return propertyName;\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nconst angleUnitsMap = { 'deg': 1, 'rad': 180 / PI, 'turn': 360 };\r\nconst convertedValuesCache = {};\r\n\r\n/**\r\n * @param  {DOMTarget} el\r\n * @param  {TweenDecomposedValue} decomposedValue\r\n * @param  {String} unit\r\n * @param  {Boolean} [force]\r\n * @return {TweenDecomposedValue}\r\n */\r\nconst convertValueUnit = (el, decomposedValue, unit, force = false) => {\r\n  const currentUnit = decomposedValue.u;\r\n  const currentNumber = decomposedValue.n;\r\n  if (decomposedValue.t === valueTypes.UNIT && currentUnit === unit) { // TODO: Check if checking against the same unit string is necessary\r\n    return decomposedValue;\r\n  }\r\n  const cachedKey = currentNumber + currentUnit + unit;\r\n  const cached = convertedValuesCache[cachedKey];\r\n  if (!isUnd(cached) && !force) {\r\n    decomposedValue.n = cached;\r\n  } else {\r\n    let convertedValue;\r\n    if (currentUnit in angleUnitsMap) {\r\n      convertedValue = currentNumber * angleUnitsMap[currentUnit] / angleUnitsMap[unit];\r\n    } else {\r\n      const baseline = 100;\r\n      const tempEl = /** @type {DOMTarget} */(el.cloneNode());\r\n      const parentNode = el.parentNode;\r\n      const parentEl = (parentNode && (parentNode !== doc)) ? parentNode : doc.body;\r\n      parentEl.appendChild(tempEl);\r\n      const elStyle = tempEl.style;\r\n      elStyle.width = baseline + currentUnit;\r\n      const currentUnitWidth = /** @type {HTMLElement} */(tempEl).offsetWidth || baseline;\r\n      elStyle.width = baseline + unit;\r\n      const newUnitWidth = /** @type {HTMLElement} */(tempEl).offsetWidth || baseline;\r\n      const factor = currentUnitWidth / newUnitWidth;\r\n      parentEl.removeChild(tempEl);\r\n      convertedValue = factor * currentNumber;\r\n    }\r\n    decomposedValue.n = convertedValue;\r\n    convertedValuesCache[cachedKey] = convertedValue;\r\n  }\r\n  decomposedValue.t === valueTypes.UNIT;\r\n  decomposedValue.u = unit;\r\n  return decomposedValue;\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @template {Renderable} T\r\n * @param {T} renderable\r\n * @return {T}\r\n */\r\nconst cleanInlineStyles = renderable => {\r\n  // Allow cleanInlineStyles() to be called on timelines\r\n  if (renderable._hasChildren) {\r\n    forEachChildren(renderable, cleanInlineStyles, true);\r\n  } else {\r\n    const animation = /** @type {JSAnimation} */(renderable);\r\n    animation.pause();\r\n    forEachChildren(animation, (/** @type {Tween} */tween) => {\r\n      const tweenProperty = tween.property;\r\n      const tweenTarget = tween.target;\r\n      if (tweenTarget[isDomSymbol]) {\r\n        const targetStyle = /** @type {DOMTarget} */(tweenTarget).style;\r\n        const originalInlinedValue = animation._inlineStyles[tweenProperty];\r\n        if (tween._tweenType === tweenTypes.TRANSFORM) {\r\n          const cachedTransforms = tweenTarget[transformsSymbol];\r\n          if (isUnd(originalInlinedValue) || originalInlinedValue === emptyString) {\r\n            delete cachedTransforms[tweenProperty];\r\n          } else {\r\n            cachedTransforms[tweenProperty] = originalInlinedValue;\r\n          }\r\n          if (tween._renderTransforms) {\r\n            if (!Object.keys(cachedTransforms).length) {\r\n              targetStyle.removeProperty('transform');\r\n            } else {\r\n              let str = emptyString;\r\n              for (let key in cachedTransforms) {\r\n                str += transformsFragmentStrings[key] + cachedTransforms[key] + ') ';\r\n              }\r\n              targetStyle.transform = str;\r\n            }\r\n          }\r\n        } else {\r\n          if (isUnd(originalInlinedValue) || originalInlinedValue === emptyString) {\r\n            targetStyle.removeProperty(tweenProperty);\r\n          } else {\r\n            targetStyle[tweenProperty] = originalInlinedValue;\r\n          }\r\n        }\r\n        if (animation._tail === tween) {\r\n          animation.targets.forEach(t => {\r\n            if (t.getAttribute && t.getAttribute('style') === emptyString) {\r\n              t.removeAttribute('style');\r\n            }          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return renderable;\r\n};\r\n\r\n// Defines decomposed values target objects only once and mutate their properties later to avoid GC\r\n// TODO: Maybe move the objects creation to values.js and use the decompose function to create the base object\r\nconst fromTargetObject = createDecomposedValueTargetObject();\r\nconst toTargetObject = createDecomposedValueTargetObject();\r\nconst toFunctionStore = { func: null };\r\nconst keyframesTargetArray = [null];\r\nconst fastSetValuesArray = [null, null];\r\n/** @type {TweenKeyValue} */\r\nconst keyObjectTarget = { to: null };\r\n\r\nlet tweenId = 0;\r\nlet keyframes;\r\n/** @type {TweenParamsOptions & TweenValues} */\r\nlet key;\r\n\r\n/**\r\n * @param {DurationKeyframes | PercentageKeyframes} keyframes\r\n * @param {AnimationParams} parameters\r\n * @return {AnimationParams}\r\n */\r\nconst generateKeyframes = (keyframes, parameters) => {\r\n  /** @type {AnimationParams} */\r\n  const properties = {};\r\n  if (isArr(keyframes)) {\r\n    const propertyNames = [].concat(.../** @type {DurationKeyframes} */(keyframes).map(key => Object.keys(key))).filter(isKey);\r\n    for (let i = 0, l = propertyNames.length; i < l; i++) {\r\n      const propName = propertyNames[i];\r\n      const propArray = /** @type {DurationKeyframes} */(keyframes).map(key => {\r\n        /** @type {TweenKeyValue} */\r\n        const newKey = {};\r\n        for (let p in key) {\r\n          const keyValue = /** @type {TweenPropValue} */(key[p]);\r\n          if (isKey(p)) {\r\n            if (p === propName) {\r\n              newKey.to = keyValue;\r\n            }\r\n          } else {\r\n            newKey[p] = keyValue;\r\n          }\r\n        }\r\n        return newKey;\r\n      });\r\n      properties[propName] = /** @type {ArraySyntaxValue} */(propArray);\r\n    }\r\n\r\n  } else {\r\n    const totalDuration = /** @type {Number} */(setValue(parameters.duration, globals.defaults.duration));\r\n    const keys = Object.keys(keyframes)\r\n    .map(key => { return {o: parseFloat(key) / 100, p: keyframes[key]} })\r\n    .sort((a, b) => a.o - b.o);\r\n    keys.forEach(key => {\r\n      const offset = key.o;\r\n      const prop = key.p;\r\n      for (let name in prop) {\r\n        if (isKey(name)) {\r\n          let propArray = /** @type {Array} */(properties[name]);\r\n          if (!propArray) propArray = properties[name] = [];\r\n          const duration = offset * totalDuration;\r\n          let length = propArray.length;\r\n          let prevKey = propArray[length - 1];\r\n          const keyObj = { to: prop[name] };\r\n          let durProgress = 0;\r\n          for (let i = 0; i < length; i++) {\r\n            durProgress += propArray[i].duration;\r\n          }\r\n          if (length === 1) {\r\n            keyObj.from = prevKey.to;\r\n          }\r\n          if (prop.ease) {\r\n            keyObj.ease = prop.ease;\r\n          }\r\n          keyObj.duration = duration - (length ? durProgress : 0);\r\n          propArray.push(keyObj);\r\n        }\r\n      }\r\n      return key;\r\n    });\r\n\r\n    for (let name in properties) {\r\n      const propArray = /** @type {Array} */(properties[name]);\r\n      let prevEase;\r\n      // let durProgress = 0\r\n      for (let i = 0, l = propArray.length; i < l; i++) {\r\n        const prop = propArray[i];\r\n        // Emulate WAPPI easing parameter position\r\n        const currentEase = prop.ease;\r\n        prop.ease = prevEase ? prevEase : undefined;\r\n        prevEase = currentEase;\r\n        // durProgress += prop.duration;\r\n        // if (i === l - 1 && durProgress !== totalDuration) {\r\n        //   propArray.push({ from: prop.to, ease: prop.ease, duration: totalDuration - durProgress })\r\n        // }\r\n      }\r\n      if (!propArray[0].duration) {\r\n        propArray.shift();\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  return properties;\r\n};\r\n\r\nclass JSAnimation extends Timer {\r\n  /**\r\n   * @param {TargetsParam} targets\r\n   * @param {AnimationParams} parameters\r\n   * @param {Timeline} [parent]\r\n   * @param {Number} [parentPosition]\r\n   * @param {Boolean} [fastSet=false]\r\n   * @param {Number} [index=0]\r\n   * @param {Number} [length=0]\r\n   */\r\n  constructor(\r\n    targets,\r\n    parameters,\r\n    parent,\r\n    parentPosition,\r\n    fastSet = false,\r\n    index = 0,\r\n    length = 0\r\n  ) {\r\n\r\n    super(/** @type {TimerParams&AnimationParams} */(parameters), parent, parentPosition);\r\n\r\n    const parsedTargets = registerTargets(targets);\r\n    const targetsLength = parsedTargets.length;\r\n\r\n    // If the parameters object contains a \"keyframes\" property, convert all the keyframes values to regular properties\r\n\r\n    const kfParams = /** @type {AnimationParams} */(parameters).keyframes;\r\n    const params = /** @type {AnimationParams} */(kfParams ? mergeObjects(generateKeyframes(/** @type {DurationKeyframes} */(kfParams), parameters), parameters) : parameters);\r\n\r\n    const {\r\n      delay,\r\n      duration,\r\n      ease,\r\n      playbackEase,\r\n      modifier,\r\n      composition,\r\n      onRender,\r\n    } = params;\r\n\r\n    const animDefaults = parent ? parent.defaults : globals.defaults;\r\n    const animaPlaybackEase = setValue(playbackEase, animDefaults.playbackEase);\r\n    const animEase = animaPlaybackEase ? parseEasings(animaPlaybackEase) : null;\r\n    const hasSpring = !isUnd(ease) && !isUnd(/** @type {Spring} */(ease).ease);\r\n    const tEasing = hasSpring ? /** @type {Spring} */(ease).ease : setValue(ease, animEase ? 'linear' : animDefaults.ease);\r\n    const tDuration = hasSpring ? /** @type {Spring} */(ease).duration : setValue(duration, animDefaults.duration);\r\n    const tDelay = setValue(delay, animDefaults.delay);\r\n    const tModifier = modifier || animDefaults.modifier;\r\n    // If no composition is defined and the targets length is high (>= 1000) set the composition to 'none' (0) for faster tween creation\r\n    const tComposition = isUnd(composition) && targetsLength >= K ? compositionTypes.none : !isUnd(composition) ? composition : animDefaults.composition;\r\n    // TODO: Do not create an empty object until we know the animation will generate inline styles\r\n    const animInlineStyles = {};\r\n    // const absoluteOffsetTime = this._offset;\r\n    const absoluteOffsetTime = this._offset + (parent ? parent._offset : 0);\r\n\r\n    let iterationDuration = NaN;\r\n    let iterationDelay = NaN;\r\n    let animationAnimationLength = 0;\r\n    let shouldTriggerRender = 0;\r\n\r\n    for (let targetIndex = 0; targetIndex < targetsLength; targetIndex++) {\r\n\r\n      const target = parsedTargets[targetIndex];\r\n      const ti = index || targetIndex;\r\n      const tl = length || targetsLength;\r\n\r\n      let lastTransformGroupIndex = NaN;\r\n      let lastTransformGroupLength = NaN;\r\n\r\n      for (let p in params) {\r\n\r\n        if (isKey(p)) {\r\n\r\n          const tweenType = getTweenType(target, p);\r\n\r\n          const propName = sanitizePropertyName(p, target, tweenType);\r\n\r\n          let propValue = params[p];\r\n\r\n          const isPropValueArray = isArr(propValue);\r\n\r\n          if (fastSet && !isPropValueArray) {\r\n            fastSetValuesArray[0] = propValue;\r\n            fastSetValuesArray[1] = propValue;\r\n            propValue = fastSetValuesArray;\r\n          }\r\n\r\n          // TODO: Allow nested keyframes inside ObjectValue value (prop: { to: [.5, 1, .75, 2, 3] })\r\n          // Normalize property values to valid keyframe syntax:\r\n          // [x, y] to [{to: [x, y]}] or {to: x} to [{to: x}] or keep keys syntax [{}, {}, {}...]\r\n          // const keyframes = isArr(propValue) ? propValue.length === 2 && !isObj(propValue[0]) ? [{ to: propValue }] : propValue : [propValue];\r\n          if (isPropValueArray) {\r\n            const arrayLength = /** @type {Array} */(propValue).length;\r\n            const isNotObjectValue = !isObj(propValue[0]);\r\n            // Convert [x, y] to [{to: [x, y]}]\r\n            if (arrayLength === 2 && isNotObjectValue) {\r\n              keyObjectTarget.to = /** @type {TweenParamValue} */(/** @type {unknown} */(propValue));\r\n              keyframesTargetArray[0] = keyObjectTarget;\r\n              keyframes = keyframesTargetArray;\r\n            // Convert [x, y, z] to [[x, y], z]\r\n            } else if (arrayLength > 2 && isNotObjectValue) {\r\n              keyframes = [];\r\n              /** @type {Array.<Number>} */(propValue).forEach((v, i) => {\r\n                if (!i) {\r\n                  fastSetValuesArray[0] = v;\r\n                } else if (i === 1) {\r\n                  fastSetValuesArray[1] = v;\r\n                  keyframes.push(fastSetValuesArray);\r\n                } else {\r\n                  keyframes.push(v);\r\n                }\r\n              });\r\n            } else {\r\n              keyframes = /** @type {Array.<TweenKeyValue>} */(propValue);\r\n            }\r\n          } else {\r\n            keyframesTargetArray[0] = propValue;\r\n            keyframes = keyframesTargetArray;\r\n          }\r\n\r\n          let siblings = null;\r\n          let prevTween = null;\r\n          let firstTweenChangeStartTime = NaN;\r\n          let lastTweenChangeEndTime = 0;\r\n          let tweenIndex = 0;\r\n\r\n          for (let l = keyframes.length; tweenIndex < l; tweenIndex++) {\r\n\r\n            const keyframe = keyframes[tweenIndex];\r\n\r\n            if (isObj(keyframe)) {\r\n              key = keyframe;\r\n            } else {\r\n              keyObjectTarget.to = /** @type {TweenParamValue} */(keyframe);\r\n              key = keyObjectTarget;\r\n            }\r\n\r\n            toFunctionStore.func = null;\r\n\r\n            const computedToValue = getFunctionValue(key.to, target, ti, tl, toFunctionStore);\r\n\r\n            let tweenToValue;\r\n            // Allows function based values to return an object syntax value ({to: v})\r\n            if (isObj(computedToValue) && !isUnd(computedToValue.to)) {\r\n              key = computedToValue;\r\n              tweenToValue = computedToValue.to;\r\n            } else {\r\n              tweenToValue = computedToValue;\r\n            }\r\n            const tweenFromValue = getFunctionValue(key.from, target, ti, tl);\r\n            const keyEasing = key.ease;\r\n            const hasSpring = !isUnd(keyEasing) && !isUnd(/** @type {Spring} */(keyEasing).ease);\r\n            // Easing are treated differently and don't accept function based value to prevent having to pass a function wrapper that returns an other function all the time\r\n            const tweenEasing = hasSpring ? /** @type {Spring} */(keyEasing).ease : keyEasing || tEasing;\r\n            // Calculate default individual keyframe duration by dividing the tl of keyframes\r\n            const tweenDuration = hasSpring ? /** @type {Spring} */(keyEasing).duration : getFunctionValue(setValue(key.duration, (l > 1 ? getFunctionValue(tDuration, target, ti, tl) / l : tDuration)), target, ti, tl);\r\n            // Default delay value should only be applied to the first tween\r\n            const tweenDelay = getFunctionValue(setValue(key.delay, (!tweenIndex ? tDelay : 0)), target, ti, tl);\r\n            const computedComposition = getFunctionValue(setValue(key.composition, tComposition), target, ti, tl);\r\n            const tweenComposition = isNum(computedComposition) ? computedComposition : compositionTypes[computedComposition];\r\n            // Modifiers are treated differently and don't accept function based value to prevent having to pass a function wrapper\r\n            const tweenModifier = key.modifier || tModifier;\r\n            const hasFromvalue = !isUnd(tweenFromValue);\r\n            const hasToValue = !isUnd(tweenToValue);\r\n            const isFromToArray = isArr(tweenToValue);\r\n            const isFromToValue = isFromToArray || (hasFromvalue && hasToValue);\r\n            const tweenStartTime = prevTween ? lastTweenChangeEndTime + tweenDelay : tweenDelay;\r\n            const absoluteStartTime = absoluteOffsetTime + tweenStartTime;\r\n\r\n            // Force a onRender callback if the animation contains at least one from value and autoplay is set to false\r\n            if (!shouldTriggerRender && (hasFromvalue || isFromToArray)) shouldTriggerRender = 1;\r\n\r\n            let prevSibling = prevTween;\r\n\r\n            if (tweenComposition !== compositionTypes.none) {\r\n              if (!siblings) siblings = getTweenSiblings(target, propName);\r\n              let nextSibling = siblings._head;\r\n              // Iterate trough all the next siblings until we find a sibling with an equal or inferior start time\r\n              while (nextSibling && !nextSibling._isOverridden && nextSibling._absoluteStartTime <= absoluteStartTime) {\r\n                prevSibling = nextSibling;\r\n                nextSibling = nextSibling._nextRep;\r\n                // Overrides all the next siblings if the next sibling starts at the same time of after as the new tween start time\r\n                if (nextSibling && nextSibling._absoluteStartTime >= absoluteStartTime) {\r\n                  while (nextSibling) {\r\n                    overrideTween(nextSibling);\r\n                    // This will ends both the current while loop and the upper one once all the next sibllings have been overriden\r\n                    nextSibling = nextSibling._nextRep;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            // Decompose values\r\n            if (isFromToValue) {\r\n              decomposeRawValue(isFromToArray ? getFunctionValue(tweenToValue[0], target, ti, tl) : tweenFromValue, fromTargetObject);\r\n              decomposeRawValue(isFromToArray ? getFunctionValue(tweenToValue[1], target, ti, tl, toFunctionStore) : tweenToValue, toTargetObject);\r\n              if (fromTargetObject.t === valueTypes.NUMBER) {\r\n                if (prevSibling) {\r\n                  if (prevSibling._valueType === valueTypes.UNIT) {\r\n                    fromTargetObject.t = valueTypes.UNIT;\r\n                    fromTargetObject.u = prevSibling._unit;\r\n                  }\r\n                } else {\r\n                  decomposeRawValue(\r\n                    getOriginalAnimatableValue(target, propName, tweenType, animInlineStyles),\r\n                    decomposedOriginalValue\r\n                  );\r\n                  if (decomposedOriginalValue.t === valueTypes.UNIT) {\r\n                    fromTargetObject.t = valueTypes.UNIT;\r\n                    fromTargetObject.u = decomposedOriginalValue.u;\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              if (hasToValue) {\r\n                decomposeRawValue(tweenToValue, toTargetObject);\r\n              } else {\r\n                if (prevTween) {\r\n                  decomposeTweenValue(prevTween, toTargetObject);\r\n                } else {\r\n                  // No need to get and parse the original value if the tween is part of a timeline and has a previous sibling part of the same timeline\r\n                  decomposeRawValue(parent && prevSibling && prevSibling.parent.parent === parent ? prevSibling._value :\r\n                  getOriginalAnimatableValue(target, propName, tweenType, animInlineStyles), toTargetObject);\r\n                }\r\n              }\r\n              if (hasFromvalue) {\r\n                decomposeRawValue(tweenFromValue, fromTargetObject);\r\n              } else {\r\n                if (prevTween) {\r\n                  decomposeTweenValue(prevTween, fromTargetObject);\r\n                } else {\r\n                  decomposeRawValue(parent && prevSibling && prevSibling.parent.parent === parent ? prevSibling._value :\r\n                  // No need to get and parse the original value if the tween is part of a timeline and has a previous sibling part of the same timeline\r\n                  getOriginalAnimatableValue(target, propName, tweenType, animInlineStyles), fromTargetObject);\r\n                }\r\n              }\r\n            }\r\n\r\n            // Apply operators\r\n            if (fromTargetObject.o) {\r\n              fromTargetObject.n = getRelativeValue(\r\n                !prevSibling ? decomposeRawValue(\r\n                  getOriginalAnimatableValue(target, propName, tweenType, animInlineStyles),\r\n                  decomposedOriginalValue\r\n                ).n : prevSibling._toNumber,\r\n                fromTargetObject.n,\r\n                fromTargetObject.o\r\n              );\r\n            }\r\n\r\n            if (toTargetObject.o) {\r\n              toTargetObject.n = getRelativeValue(fromTargetObject.n, toTargetObject.n, toTargetObject.o);\r\n            }\r\n\r\n            // Values omogenisation in cases of type difference between \"from\" and \"to\"\r\n            if (fromTargetObject.t !== toTargetObject.t) {\r\n              if (fromTargetObject.t === valueTypes.COMPLEX || toTargetObject.t === valueTypes.COMPLEX) {\r\n                const complexValue = fromTargetObject.t === valueTypes.COMPLEX ? fromTargetObject : toTargetObject;\r\n                const notComplexValue = fromTargetObject.t === valueTypes.COMPLEX ? toTargetObject : fromTargetObject;\r\n                notComplexValue.t = valueTypes.COMPLEX;\r\n                notComplexValue.s = cloneArray(complexValue.s);\r\n                notComplexValue.d = complexValue.d.map(() => notComplexValue.n);\r\n              } else if (fromTargetObject.t === valueTypes.UNIT || toTargetObject.t === valueTypes.UNIT) {\r\n                const unitValue = fromTargetObject.t === valueTypes.UNIT ? fromTargetObject : toTargetObject;\r\n                const notUnitValue = fromTargetObject.t === valueTypes.UNIT ? toTargetObject : fromTargetObject;\r\n                notUnitValue.t = valueTypes.UNIT;\r\n                notUnitValue.u = unitValue.u;\r\n              } else if (fromTargetObject.t === valueTypes.COLOR || toTargetObject.t === valueTypes.COLOR) {\r\n                const colorValue = fromTargetObject.t === valueTypes.COLOR ? fromTargetObject : toTargetObject;\r\n                const notColorValue = fromTargetObject.t === valueTypes.COLOR ? toTargetObject : fromTargetObject;\r\n                notColorValue.t = valueTypes.COLOR;\r\n                notColorValue.s = colorValue.s;\r\n                notColorValue.d = [0, 0, 0, 1];\r\n              }\r\n            }\r\n\r\n            // Unit conversion\r\n            if (fromTargetObject.u !== toTargetObject.u) {\r\n              let valueToConvert = toTargetObject.u ? fromTargetObject : toTargetObject;\r\n              valueToConvert = convertValueUnit(/** @type {DOMTarget} */(target), valueToConvert, toTargetObject.u ? toTargetObject.u : fromTargetObject.u, false);\r\n              // TODO:\r\n              // convertValueUnit(target, to.u ? from : to, to.u ? to.u : from.u);\r\n            }\r\n\r\n            // Fill in non existing complex values\r\n            if (toTargetObject.d && fromTargetObject.d && (toTargetObject.d.length !== fromTargetObject.d.length)) {\r\n              const longestValue = fromTargetObject.d.length > toTargetObject.d.length ? fromTargetObject : toTargetObject;\r\n              const shortestValue = longestValue === fromTargetObject ? toTargetObject : fromTargetObject;\r\n              // TODO: Check if n should be used instead of 0 for default complex values\r\n              shortestValue.d = longestValue.d.map((_, i) => isUnd(shortestValue.d[i]) ? 0 : shortestValue.d[i]);\r\n              shortestValue.s = cloneArray(longestValue.s);\r\n            }\r\n\r\n            // Tween factory\r\n\r\n            // Rounding is necessary here to minimize floating point errors\r\n            const tweenUpdateDuration = round(+tweenDuration || minValue, 12);\r\n\r\n            /** @type {Tween} */\r\n            const tween = {\r\n              parent: this,\r\n              id: tweenId++,\r\n              property: propName,\r\n              target: target,\r\n              _value: null,\r\n              _func: toFunctionStore.func,\r\n              _ease: parseEasings(tweenEasing),\r\n              _fromNumbers: cloneArray(fromTargetObject.d),\r\n              _toNumbers: cloneArray(toTargetObject.d),\r\n              _strings: cloneArray(toTargetObject.s),\r\n              _fromNumber: fromTargetObject.n,\r\n              _toNumber: toTargetObject.n,\r\n              _numbers: cloneArray(fromTargetObject.d), // For additive tween and animatables\r\n              _number: fromTargetObject.n, // For additive tween and animatables\r\n              _unit: toTargetObject.u,\r\n              _modifier: tweenModifier,\r\n              _currentTime: 0,\r\n              _startTime: tweenStartTime,\r\n              _delay: +tweenDelay,\r\n              _updateDuration: tweenUpdateDuration,\r\n              _changeDuration: tweenUpdateDuration,\r\n              _absoluteStartTime: absoluteStartTime,\r\n              // NOTE: Investigate bit packing to stores ENUM / BOOL\r\n              _tweenType: tweenType,\r\n              _valueType: toTargetObject.t,\r\n              _composition: tweenComposition,\r\n              _isOverlapped: 0,\r\n              _isOverridden: 0,\r\n              _renderTransforms: 0,\r\n              _prevRep: null, // For replaced tween\r\n              _nextRep: null, // For replaced tween\r\n              _prevAdd: null, // For additive tween\r\n              _nextAdd: null, // For additive tween\r\n              _prev: null,\r\n              _next: null,\r\n            };\r\n\r\n            if (tweenComposition !== compositionTypes.none) {\r\n              composeTween(tween, siblings);\r\n            }\r\n\r\n            if (isNaN(firstTweenChangeStartTime)) {\r\n              firstTweenChangeStartTime = tween._startTime;\r\n            }\r\n            // Rounding is necessary here to minimize floating point errors\r\n            lastTweenChangeEndTime = round(tweenStartTime + tweenUpdateDuration, 12);\r\n            prevTween = tween;\r\n            animationAnimationLength++;\r\n\r\n            addChild(this, tween);\r\n\r\n          }\r\n\r\n          // Update animation timings with the added tweens properties\r\n\r\n          if (isNaN(iterationDelay) || firstTweenChangeStartTime < iterationDelay) {\r\n            iterationDelay = firstTweenChangeStartTime;\r\n          }\r\n\r\n          if (isNaN(iterationDuration) || lastTweenChangeEndTime > iterationDuration) {\r\n            iterationDuration = lastTweenChangeEndTime;\r\n          }\r\n\r\n          // TODO: Find a way to inline tween._renderTransforms = 1 here\r\n          if (tweenType === tweenTypes.TRANSFORM) {\r\n            lastTransformGroupIndex = animationAnimationLength - tweenIndex;\r\n            lastTransformGroupLength = animationAnimationLength;\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n      // Set _renderTransforms to last transform property to correctly render the transforms list\r\n      if (!isNaN(lastTransformGroupIndex)) {\r\n        let i = 0;\r\n        forEachChildren(this, (/** @type {Tween} */tween) => {\r\n          if (i >= lastTransformGroupIndex && i < lastTransformGroupLength) {\r\n            tween._renderTransforms = 1;\r\n            if (tween._composition === compositionTypes.blend) {\r\n              forEachChildren(additive.animation, (/** @type {Tween} */additiveTween) => {\r\n                if (additiveTween.id === tween.id) {\r\n                  additiveTween._renderTransforms = 1;\r\n                }\r\n              });\r\n            }\r\n          }\r\n          i++;\r\n        });\r\n      }\r\n\r\n    }\r\n\r\n    if (!targetsLength) {\r\n      console.warn(`No target found. Make sure the element you're trying to animate is accessible before creating your animation.`);\r\n    }\r\n\r\n    if (iterationDelay) {\r\n      forEachChildren(this, (/** @type {Tween} */tween) => {\r\n        // If (startTime - delay) equals 0, this means the tween is at the begining of the animation so we need to trim the delay too\r\n        if (!(tween._startTime - tween._delay)) {\r\n          tween._delay -= iterationDelay;\r\n        }\r\n        tween._startTime -= iterationDelay;\r\n      });\r\n      iterationDuration -= iterationDelay;\r\n    } else {\r\n      iterationDelay = 0;\r\n    }\r\n\r\n    // Prevents iterationDuration to be NaN if no valid animatable props have been provided\r\n    // Prevents _iterationCount to be NaN if no valid animatable props have been provided\r\n    if (!iterationDuration) {\r\n      iterationDuration = minValue;\r\n      this.iterationCount = 0;\r\n    }\r\n    /** @type {TargetsArray} */\r\n    this.targets = parsedTargets;\r\n    /** @type {Number} */\r\n    this.duration = iterationDuration === minValue ? minValue : clampInfinity(((iterationDuration + this._loopDelay) * this.iterationCount) - this._loopDelay) || minValue;\r\n    /** @type {Callback<this>} */\r\n    this.onRender = onRender || animDefaults.onRender;\r\n    /** @type {EasingFunction} */\r\n    this._ease = animEase;\r\n    /** @type {Number} */\r\n    this._delay = iterationDelay;\r\n    // NOTE: I'm keeping delay values separated from offsets in timelines because delays can override previous tweens and it could be confusing to debug a timeline with overridden tweens and no associated visible delays.\r\n    // this._delay = parent ? 0 : iterationDelay;\r\n    // this._offset += parent ? iterationDelay : 0;\r\n    /** @type {Number} */\r\n    this.iterationDuration = iterationDuration;\r\n    /** @type {{}} */\r\n    this._inlineStyles = animInlineStyles;\r\n\r\n    if (!this._autoplay && shouldTriggerRender) this.onRender(this);\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} newDuration\r\n   * @return {this}\r\n   */\r\n  stretch(newDuration) {\r\n    const currentDuration = this.duration;\r\n    if (currentDuration === normalizeTime(newDuration)) return this;\r\n    const timeScale = newDuration / currentDuration;\r\n    // NOTE: Find a better way to handle the stretch of an animation after stretch = 0\r\n    forEachChildren(this, (/** @type {Tween} */tween) => {\r\n      // Rounding is necessary here to minimize floating point errors\r\n      tween._updateDuration = normalizeTime(tween._updateDuration * timeScale);\r\n      tween._changeDuration = normalizeTime(tween._changeDuration * timeScale);\r\n      tween._currentTime *= timeScale;\r\n      tween._startTime *= timeScale;\r\n      tween._absoluteStartTime *= timeScale;\r\n    });\r\n    return super.stretch(newDuration);\r\n  }\r\n\r\n  /**\r\n   * @return {this}\r\n   */\r\n  refresh() {\r\n    forEachChildren(this, (/** @type {Tween} */tween) => {\r\n      const tweenFunc = tween._func;\r\n      if (tweenFunc) {\r\n        const ogValue = getOriginalAnimatableValue(tween.target, tween.property, tween._tweenType);\r\n        decomposeRawValue(ogValue, decomposedOriginalValue);\r\n        decomposeRawValue(tweenFunc(), toTargetObject);\r\n        tween._fromNumbers = cloneArray(decomposedOriginalValue.d);\r\n        tween._fromNumber = decomposedOriginalValue.n;\r\n        tween._toNumbers = cloneArray(toTargetObject.d);\r\n        tween._strings = cloneArray(toTargetObject.s);\r\n        // Make sure to apply relative operators https://github.com/juliangarnier/anime/issues/1025\r\n        tween._toNumber = toTargetObject.o ? getRelativeValue(decomposedOriginalValue.n, toTargetObject.n, toTargetObject.o) : toTargetObject.n;\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Cancel the animation and revert all the values affected by this animation to their original state\r\n   * @return {this}\r\n   */\r\n  revert() {\r\n    super.revert();\r\n    return cleanInlineStyles(this);\r\n  }\r\n\r\n  /**\r\n   * @param  {Callback<this>} [callback]\r\n   * @return {Promise}\r\n   */\r\n  then(callback) {\r\n    return super.then(callback);\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * @param {TargetsParam} targets\r\n * @param {AnimationParams} parameters\r\n * @return {JSAnimation}\r\n */\r\nconst animate = (targets, parameters) => new JSAnimation(targets, parameters, null, 0, false).init();\r\n\r\n\r\n\r\n\r\n/**\r\n * Converts an easing function into a valid CSS linear() timing function string\r\n * @param {EasingFunction} fn\r\n * @param {number} [samples=100]\r\n * @returns {string} CSS linear() timing function\r\n */\r\nconst easingToLinear = (fn, samples = 100) => {\r\n  const points = [];\r\n  for (let i = 0; i <= samples; i++) points.push(fn(i / samples));\r\n  return `linear(${points.join(', ')})`;\r\n};\r\n\r\nconst WAAPIEasesLookups = {\r\n  in: 'ease-in',\r\n  out: 'ease-out',\r\n  inOut: 'ease-in-out',\r\n};\r\n\r\nconst WAAPIeases = /*#__PURE__*/(() => {\r\n  const list = {};\r\n  for (let type in easeTypes) list[type] = a => easeTypes[type](easeInPower(a));\r\n  return /** @type {Record<String, EasingFunction>} */(list);\r\n})();\r\n\r\n/**\r\n * @param  {EasingParam} ease\r\n * @return {String}\r\n */\r\nconst parseWAAPIEasing = (ease) => {\r\n  let parsedEase = WAAPIEasesLookups[ease];\r\n  if (parsedEase) return parsedEase;\r\n  parsedEase = 'linear';\r\n  if (isStr(ease)) {\r\n    if (\r\n      stringStartsWith(ease, 'linear') ||\r\n      stringStartsWith(ease, 'cubic-') ||\r\n      stringStartsWith(ease, 'steps') ||\r\n      stringStartsWith(ease, 'ease')\r\n    ) {\r\n      parsedEase = ease;\r\n    } else if (stringStartsWith(ease, 'cubicB')) {\r\n      parsedEase = toLowerCase(ease);\r\n    } else {\r\n      const parsed = parseEaseString(ease, WAAPIeases, WAAPIEasesLookups);\r\n      if (isFnc(parsed)) parsedEase = parsed === none ? 'linear' : easingToLinear(parsed);\r\n    }\r\n    WAAPIEasesLookups[ease] = parsedEase;\r\n  } else if (isFnc(ease)) {\r\n    const easing = easingToLinear(ease);\r\n    if (easing) parsedEase = easing;\r\n  } else if (/** @type {Spring} */(ease).ease) {\r\n    parsedEase = easingToLinear(/** @type {Spring} */(ease).ease);\r\n  }\r\n  return parsedEase;\r\n};\r\n\r\n/**\r\n * @typedef {String|Number|Array<String>|Array<Number>} WAAPITweenValue\r\n */\r\n\r\n/**\r\n * @callback WAAPIFunctionvalue\r\n * @param {DOMTarget} target - The animated target\r\n * @param {Number} index - The target index\r\n * @param {Number} length - The total number of animated targets\r\n * @return {WAAPITweenValue}\r\n */\r\n\r\n/**\r\n * @typedef {WAAPITweenValue|WAAPIFunctionvalue|Array<String|Number|WAAPIFunctionvalue>} WAAPIKeyframeValue\r\n */\r\n\r\n/**\r\n * @typedef {(animation: WAAPIAnimation) => void} WAAPICallback\r\n */\r\n\r\n/**\r\n * @typedef {Object} WAAPITweenOptions\r\n * @property {WAAPIKeyframeValue} [to]\r\n * @property {WAAPIKeyframeValue} [from]\r\n * @property {Number|WAAPIFunctionvalue} [duration]\r\n * @property {Number|WAAPIFunctionvalue} [delay]\r\n * @property {EasingParam} [ease]\r\n * @property {CompositeOperation} [composition]\r\n */\r\n\r\n/**\r\n * @typedef {Object} WAAPIAnimationOptions\r\n * @property {Number|Boolean} [loop]\r\n * @property {Boolean} [Reversed]\r\n * @property {Boolean} [Alternate]\r\n * @property {Boolean|ScrollObserver} [autoplay]\r\n * @property {Number} [playbackRate]\r\n * @property {Number|WAAPIFunctionvalue} [duration]\r\n * @property {Number|WAAPIFunctionvalue} [delay]\r\n * @property {EasingParam} [ease]\r\n * @property {CompositeOperation} [composition]\r\n * @property {WAAPICallback} [onComplete]\r\n */\r\n\r\n/**\r\n * @typedef {Record<String, WAAPIKeyframeValue | WAAPIAnimationOptions | Boolean | ScrollObserver | WAAPICallback | EasingParam | WAAPITweenOptions> & WAAPIAnimationOptions} WAAPIAnimationParams\r\n */\r\n\r\nconst transformsShorthands = ['x', 'y', 'z'];\r\nconst commonDefaultPXProperties = [\r\n  'perspective',\r\n  'width',\r\n  'height',\r\n  'margin',\r\n  'padding',\r\n  'top',\r\n  'right',\r\n  'bottom',\r\n  'left',\r\n  'borderWidth',\r\n  'fontSize',\r\n  'borderRadius',\r\n  ...transformsShorthands\r\n];\r\n\r\nconst validIndividualTransforms = /*#__PURE__*/ (() => [...transformsShorthands, ...validTransforms.filter(t => ['X', 'Y', 'Z'].some(axis => t.endsWith(axis)))])();\r\n\r\nlet transformsPropertiesRegistered = null;\r\n\r\nconst WAAPIAnimationsLookups = {\r\n  _head: null,\r\n  _tail: null,\r\n};\r\n\r\n/**\r\n * @param {DOMTarget} $el\r\n * @param {String} [property]\r\n * @param {WAAPIAnimation} [parent]\r\n */\r\nconst removeWAAPIAnimation = ($el, property, parent) => {\r\n  let nextLookup = WAAPIAnimationsLookups._head;\r\n  while (nextLookup) {\r\n    const next = nextLookup._next;\r\n    const matchTarget = nextLookup.$el === $el;\r\n    const matchProperty = !property || nextLookup.property === property;\r\n    const matchParent = !parent || nextLookup.parent === parent;\r\n    if (matchTarget && matchProperty && matchParent) {\r\n      const anim = nextLookup.animation;\r\n      try { anim.commitStyles(); } catch {}      anim.cancel();\r\n      removeChild(WAAPIAnimationsLookups, nextLookup);\r\n      const lookupParent = nextLookup.parent;\r\n      if (lookupParent) {\r\n        lookupParent._completed++;\r\n        if (lookupParent.animations.length === lookupParent._completed) {\r\n          lookupParent.completed = true;\r\n          if (!lookupParent.muteCallbacks) {\r\n            lookupParent.paused = true;\r\n            lookupParent.onComplete(lookupParent);\r\n            lookupParent._resolve(lookupParent);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    nextLookup = next;\r\n  }\r\n};\r\n\r\n/**\r\n * @param {WAAPIAnimation} parent\r\n * @param {DOMTarget} $el\r\n * @param {String} property\r\n * @param {PropertyIndexedKeyframes} keyframes\r\n * @param {KeyframeAnimationOptions} params\r\n * @retun {Animation}\r\n */\r\nconst addWAAPIAnimation = (parent, $el, property, keyframes, params) => {\r\n  const animation = $el.animate(keyframes, params);\r\n  const animTotalDuration = params.delay + (+params.duration * params.iterations);\r\n  animation.playbackRate = parent._speed;\r\n  if (parent.paused) animation.pause();\r\n  if (parent.duration < animTotalDuration) {\r\n    parent.duration = animTotalDuration;\r\n    parent.controlAnimation = animation;\r\n  }\r\n  parent.animations.push(animation);\r\n  removeWAAPIAnimation($el, property);\r\n  addChild(WAAPIAnimationsLookups, { parent, animation, $el, property, _next: null, _prev: null });\r\n  const handleRemove = () => { removeWAAPIAnimation($el, property, parent); };\r\n  animation.onremove = handleRemove;\r\n  animation.onfinish = handleRemove;\r\n  return animation;\r\n};\r\n\r\n/**\r\n * @param  {String} propName\r\n * @param  {WAAPIKeyframeValue} value\r\n * @param  {DOMTarget} $el\r\n * @param  {Number} i\r\n * @param  {Number} targetsLength\r\n * @return {String}\r\n */\r\nconst normalizeTweenValue = (propName, value, $el, i, targetsLength) => {\r\n  let v = getFunctionValue(/** @type {any} */(value), $el, i, targetsLength);\r\n  if (!isNum(v)) return v;\r\n  if (commonDefaultPXProperties.includes(propName) || stringStartsWith(propName, 'translate')) return `${v}px`;\r\n  if (stringStartsWith(propName, 'rotate') || stringStartsWith(propName, 'skew')) return `${v}deg`;\r\n  return `${v}`;\r\n};\r\n\r\n/**\r\n * @param  {DOMTarget} $el\r\n * @param  {String} propName\r\n * @param  {WAAPIKeyframeValue} from\r\n * @param  {WAAPIKeyframeValue} to\r\n * @param  {Number} i\r\n * @param  {Number} targetsLength\r\n * @return {WAAPITweenValue}\r\n */\r\nconst parseIndividualTweenValue = ($el, propName, from, to, i, targetsLength) => {\r\n  /** @type {WAAPITweenValue} */\r\n  let tweenValue = '0';\r\n  const computedTo = !isUnd(to) ? normalizeTweenValue(propName, to, $el, i, targetsLength) : getComputedStyle($el)[propName];\r\n  if (!isUnd(from)) {\r\n    const computedFrom = normalizeTweenValue(propName, from, $el, i, targetsLength);\r\n    tweenValue = [computedFrom, computedTo];\r\n  } else {\r\n    tweenValue = isArr(to) ? to.map((/** @type {any} */v) => normalizeTweenValue(propName, v, $el, i, targetsLength)) : computedTo;\r\n  }\r\n  return tweenValue;\r\n};\r\n\r\nclass WAAPIAnimation {\r\n/**\r\n * @param {DOMTargetsParam} targets\r\n * @param {WAAPIAnimationParams} params\r\n */\r\n  constructor(targets, params) {\r\n\r\n    if (scope.current) scope.current.register(this);\r\n\r\n    // Skip the registration and fallback to no animation in case CSS.registerProperty is not supported\r\n    if (isNil(transformsPropertiesRegistered)) {\r\n      if (isBrowser && (isUnd(CSS) || !Object.hasOwnProperty.call(CSS, 'registerProperty'))) {\r\n        transformsPropertiesRegistered = false;\r\n      } else {\r\n        validTransforms.forEach(t => {\r\n          const isSkew = stringStartsWith(t, 'skew');\r\n          const isScale = stringStartsWith(t, 'scale');\r\n          const isRotate = stringStartsWith(t, 'rotate');\r\n          const isTranslate = stringStartsWith(t, 'translate');\r\n          const isAngle = isRotate || isSkew;\r\n          const syntax = isAngle ? '<angle>' : isScale ? \"<number>\" : isTranslate ? \"<length-percentage>\" : \"*\";\r\n          try {\r\n            CSS.registerProperty({\r\n              name: '--' + t,\r\n              syntax,\r\n              inherits: false,\r\n              initialValue: isTranslate ? '0px' : isAngle ? '0deg' : isScale ? '1' : '0',\r\n            });\r\n          } catch {}        });\r\n        transformsPropertiesRegistered = true;\r\n      }\r\n    }\r\n\r\n    const parsedTargets = registerTargets(targets);\r\n    const targetsLength = parsedTargets.length;\r\n\r\n    if (!targetsLength) {\r\n      console.warn(`No target found. Make sure the element you're trying to animate is accessible before creating your animation.`);\r\n    }\r\n\r\n    const ease = setValue(params.ease, parseWAAPIEasing(globals.defaults.ease));\r\n    const spring = /** @type {Spring} */(ease).ease && ease;\r\n    const autoplay = setValue(params.autoplay, globals.defaults.autoplay);\r\n    const scroll = autoplay && /** @type {ScrollObserver} */(autoplay).link ? autoplay : false;\r\n    const alternate = params.alternate && /** @type {Boolean} */(params.alternate) === true;\r\n    const reversed = params.reversed && /** @type {Boolean} */(params.reversed) === true;\r\n    const loop = setValue(params.loop, globals.defaults.loop);\r\n    const iterations = /** @type {Number} */((loop === true || loop === Infinity) ? Infinity : isNum(loop) ? loop + 1 : 1);\r\n    /** @type {PlaybackDirection} */\r\n    const direction = alternate ? reversed ? 'alternate-reverse' : 'alternate' : reversed ? 'reverse' : 'normal';\r\n    /** @type {FillMode} */\r\n    const fill = 'forwards';\r\n    /** @type {String} */\r\n    const easing = parseWAAPIEasing(ease);\r\n    const timeScale = (globals.timeScale === 1 ? 1 : K);\r\n\r\n    /** @type {DOMTargetsArray}] */\r\n    this.targets = parsedTargets;\r\n    /** @type {Array<globalThis.Animation>}] */\r\n    this.animations = [];\r\n    /** @type {globalThis.Animation}] */\r\n    this.controlAnimation = null;\r\n    /** @type {Callback<this>} */\r\n    this.onComplete = params.onComplete || noop;\r\n    /** @type {Number} */\r\n    this.duration = 0;\r\n    /** @type {Boolean} */\r\n    this.muteCallbacks = false;\r\n    /** @type {Boolean} */\r\n    this.completed = false;\r\n    /** @type {Boolean} */\r\n    this.paused = !autoplay || scroll !== false;\r\n    /** @type {Boolean} */\r\n    this.reversed = reversed;\r\n    /** @type {Boolean|ScrollObserver} */\r\n    this.autoplay = autoplay;\r\n    /** @type {Number} */\r\n    this._speed = setValue(params.playbackRate, globals.defaults.playbackRate);\r\n    /** @type {Function} */\r\n    this._resolve = noop; // Used by .then()\r\n    /** @type {Number} */\r\n    this._completed = 0;\r\n    /** @type {Array<Object>}] */\r\n    this._inlineStyles = parsedTargets.map($el => $el.getAttribute('style'));\r\n\r\n    parsedTargets.forEach(($el, i) => {\r\n\r\n      const cachedTransforms = $el[transformsSymbol];\r\n\r\n      const hasIndividualTransforms = validIndividualTransforms.some(t => params.hasOwnProperty(t));\r\n\r\n      /** @type {Number} */\r\n      const duration = (spring ? /** @type {Spring} */(spring).duration : getFunctionValue(setValue(params.duration, globals.defaults.duration), $el, i, targetsLength)) * timeScale;\r\n      /** @type {Number} */\r\n      const delay = getFunctionValue(setValue(params.delay, globals.defaults.delay), $el, i, targetsLength) * timeScale;\r\n      /** @type {CompositeOperation} */\r\n      const composite = /** @type {CompositeOperation} */(setValue(params.composition, 'replace'));\r\n\r\n      for (let name in params) {\r\n        if (!isKey(name)) continue;\r\n        /** @type {PropertyIndexedKeyframes} */\r\n        const keyframes = {};\r\n        /** @type {KeyframeAnimationOptions} */\r\n        const tweenParams = { iterations, direction, fill, easing, duration, delay, composite };\r\n        const propertyValue = params[name];\r\n        const individualTransformProperty = hasIndividualTransforms ? validTransforms.includes(name) ? name : shortTransforms.get(name) : false;\r\n        let parsedPropertyValue;\r\n        if (isObj(propertyValue)) {\r\n          const tweenOptions = /** @type {WAAPITweenOptions} */(propertyValue);\r\n          const tweenOptionsEase = setValue(tweenOptions.ease, ease);\r\n          const tweenOptionsSpring = /** @type {Spring} */(tweenOptionsEase).ease && tweenOptionsEase;\r\n          const to = /** @type {WAAPITweenOptions} */(tweenOptions).to;\r\n          const from = /** @type {WAAPITweenOptions} */(tweenOptions).from;\r\n          /** @type {Number} */\r\n          tweenParams.duration = (tweenOptionsSpring ? /** @type {Spring} */(tweenOptionsSpring).duration : getFunctionValue(setValue(tweenOptions.duration, duration), $el, i, targetsLength)) * timeScale;\r\n          /** @type {Number} */\r\n          tweenParams.delay = getFunctionValue(setValue(tweenOptions.delay, delay), $el, i, targetsLength) * timeScale;\r\n          /** @type {CompositeOperation} */\r\n          tweenParams.composite = /** @type {CompositeOperation} */(setValue(tweenOptions.composition, composite));\r\n          /** @type {String} */\r\n          tweenParams.easing = parseWAAPIEasing(tweenOptionsEase);\r\n          parsedPropertyValue = parseIndividualTweenValue($el, name, from, to, i, targetsLength);\r\n          if (individualTransformProperty) {\r\n            keyframes[`--${individualTransformProperty}`] = parsedPropertyValue;\r\n            cachedTransforms[individualTransformProperty] = parsedPropertyValue;\r\n          } else {\r\n            keyframes[name] = parseIndividualTweenValue($el, name, from, to, i, targetsLength);\r\n          }\r\n          addWAAPIAnimation(this, $el, name, keyframes, tweenParams);\r\n          if (!isUnd(from)) {\r\n            if (!individualTransformProperty) {\r\n              $el.style[name] = keyframes[name][0];\r\n            } else {\r\n              const key = `--${individualTransformProperty}`;\r\n              $el.style.setProperty(key, keyframes[key][0]);\r\n            }\r\n          }\r\n        } else {\r\n          parsedPropertyValue = isArr(propertyValue) ?\r\n                                propertyValue.map((/** @type {any} */v) => normalizeTweenValue(name, v, $el, i, targetsLength)) :\r\n                                normalizeTweenValue(name, /** @type {any} */(propertyValue), $el, i, targetsLength);\r\n          if (individualTransformProperty) {\r\n            keyframes[`--${individualTransformProperty}`] = parsedPropertyValue;\r\n            cachedTransforms[individualTransformProperty] = parsedPropertyValue;\r\n          } else {\r\n            keyframes[name] = parsedPropertyValue;\r\n          }\r\n          addWAAPIAnimation(this, $el, name, keyframes, tweenParams);\r\n        }\r\n      }\r\n      if (hasIndividualTransforms) {\r\n        let transforms = emptyString;\r\n        for (let t in cachedTransforms) {\r\n          transforms += `${transformsFragmentStrings[t]}var(--${t})) `;\r\n        }\r\n        $el.style.transform = transforms;\r\n      }\r\n    });\r\n\r\n    if (scroll) {\r\n      /** @type {ScrollObserver} */(this.autoplay).link(this);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @callback forEachCallback\r\n   * @param {globalThis.Animation} animation\r\n   */\r\n\r\n  /**\r\n   * @param  {forEachCallback|String} callback\r\n   * @return {this}\r\n   */\r\n  forEach(callback) {\r\n    const cb = isStr(callback) ? a => a[callback]() : callback;\r\n    this.animations.forEach(cb);\r\n    return this;\r\n  }\r\n\r\n  get speed() {\r\n    return this._speed;\r\n  }\r\n\r\n  /** @param {Number} speed */\r\n  set speed(speed) {\r\n    this._speed = +speed;\r\n    this.forEach(anim => anim.playbackRate = speed);\r\n  }\r\n\r\n  get currentTime() {\r\n    const controlAnimation = this.controlAnimation;\r\n    const timeScale = globals.timeScale;\r\n    return this.completed ? this.duration : controlAnimation ? +controlAnimation.currentTime * (timeScale === 1 ? 1 : timeScale) : 0;\r\n  }\r\n\r\n  /** @param {Number} time */\r\n  set currentTime(time) {\r\n    const t = time * (globals.timeScale === 1 ? 1 : K);\r\n    this.forEach(anim => {\r\n      // Make sure the animation playState is not 'paused' in order to properly trigger an onfinish callback.\r\n      // The \"paused\" play state supersedes the \"finished\" play state; if the animation is both paused and finished, the \"paused\" state is the one that will be reported.\r\n      // https://developer.mozilla.org/en-US/docs/Web/API/Animation/finish_event\r\n      if (t >= this.duration) anim.play();\r\n      anim.currentTime = t;\r\n    });\r\n  }\r\n\r\n  get progress() {\r\n    return this.currentTime / this.duration;\r\n  }\r\n\r\n  /** @param {Number} progress */\r\n  set progress(progress) {\r\n    this.forEach(anim => anim.currentTime = progress * this.duration || 0);\r\n  }\r\n\r\n  resume() {\r\n    if (!this.paused) return this;\r\n    this.paused = false;\r\n    // TODO: Store the current time, and seek back to the last position\r\n    return this.forEach('play');\r\n  }\r\n\r\n  pause() {\r\n    if (this.paused) return this;\r\n    this.paused = true;\r\n    return this.forEach('pause');\r\n  }\r\n\r\n  alternate() {\r\n    this.reversed = !this.reversed;\r\n    this.forEach('reverse');\r\n    if (this.paused) this.forEach('pause');\r\n    return this;\r\n  }\r\n\r\n  play() {\r\n    if (this.reversed) this.alternate();\r\n    return this.resume();\r\n  }\r\n\r\n  reverse() {\r\n    if (!this.reversed) this.alternate();\r\n    return this.resume();\r\n  }\r\n\r\n /**\r\n  * @param {Number} time\r\n  * @param {Boolean} muteCallbacks\r\n  */\r\n  seek(time, muteCallbacks = false) {\r\n    if (muteCallbacks) this.muteCallbacks = true;\r\n    if (time < this.duration) this.completed = false;\r\n    this.currentTime = time;\r\n    this.muteCallbacks = false;\r\n    if (this.paused) this.pause();\r\n    return this;\r\n  }\r\n\r\n  restart() {\r\n    this.completed = false;\r\n    return this.seek(0, true).resume();\r\n  }\r\n\r\n  commitStyles() {\r\n    return this.forEach('commitStyles');\r\n  }\r\n\r\n  complete() {\r\n    return this.seek(this.duration);\r\n  }\r\n\r\n  cancel() {\r\n    this.forEach('cancel');\r\n    return this.pause();\r\n  }\r\n\r\n  revert() {\r\n    this.cancel();\r\n    this.targets.forEach(($el, i) => $el.setAttribute('style', this._inlineStyles[i]) );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param  {WAAPICallback} [callback]\r\n   * @return {Promise}\r\n   */\r\n  then(callback = noop) {\r\n    const then = this.then;\r\n    const onResolve = () => {\r\n      this.then = null;\r\n      callback(this);\r\n      this.then = then;\r\n      this._resolve = noop;\r\n    };\r\n    return new Promise(r => {\r\n      this._resolve = () => r(onResolve());\r\n      if (this.completed) this._resolve();\r\n      return this;\r\n    });\r\n  }\r\n}\r\n\r\nconst waapi = {\r\n/**\r\n * @param {DOMTargetsParam} targets\r\n * @param {WAAPIAnimationParams} params\r\n * @return {WAAPIAnimation}\r\n */\r\n  animate: (targets, params) => new WAAPIAnimation(targets, params),\r\n  convertEase: easingToLinear\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @param  {Callback<Timer>} [callback]\r\n * @return {Timer}\r\n */\r\nconst sync = (callback = noop) => {\r\n  return new Timer({ duration: 1 * globals.timeScale, onComplete: callback }, null, 0).resume();\r\n};\r\n\r\n/**\r\n * @overload\r\n * @param  {DOMTargetSelector} targetSelector\r\n * @param  {String}            propName\r\n * @return {String}\r\n *\r\n * @overload\r\n * @param  {JSTargetsParam} targetSelector\r\n * @param  {String}         propName\r\n * @return {Number|String}\r\n *\r\n * @overload\r\n * @param  {DOMTargetsParam} targetSelector\r\n * @param  {String}          propName\r\n * @param  {String}          unit\r\n * @return {String}\r\n *\r\n * @overload\r\n * @param  {TargetsParam} targetSelector\r\n * @param  {String}       propName\r\n * @param  {Boolean}      unit\r\n * @return {Number}\r\n *\r\n * @param  {TargetsParam}   targetSelector\r\n * @param  {String}         propName\r\n * @param  {String|Boolean} [unit]\r\n */\r\nfunction getTargetValue(targetSelector, propName, unit) {\r\n  const targets = registerTargets(targetSelector);\r\n  if (!targets.length) return;\r\n  const [ target ] = targets;\r\n  const tweenType = getTweenType(target, propName);\r\n  const normalizePropName = sanitizePropertyName(propName, target, tweenType);\r\n  let originalValue = getOriginalAnimatableValue(target, normalizePropName);\r\n  if (isUnd(unit)) {\r\n    return originalValue;\r\n  } else {\r\n    decomposeRawValue(originalValue, decomposedOriginalValue);\r\n    if (decomposedOriginalValue.t === valueTypes.NUMBER || decomposedOriginalValue.t === valueTypes.UNIT) {\r\n      if (unit === false) {\r\n        return decomposedOriginalValue.n;\r\n      } else {\r\n        const convertedValue = convertValueUnit(/** @type {DOMTarget} */(target), decomposedOriginalValue, /** @type {String} */(unit), false);\r\n        return `${round(convertedValue.n, globals.precision)}${convertedValue.u}`;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param  {TargetsParam}    targets\r\n * @param  {AnimationParams} parameters\r\n * @return {JSAnimation}\r\n */\r\nconst setTargetValues = (targets, parameters) => {\r\n  if (isUnd(parameters)) return;\r\n  parameters.duration = minValue;\r\n  // Do not overrides currently active tweens by default\r\n  parameters.composition = setValue(parameters.composition, compositionTypes.none);\r\n  // Skip init() and force rendering by playing the animation\r\n  return new JSAnimation(targets, parameters, null, 0, true).resume();\r\n};\r\n\r\n/**\r\n * @param  {TargetsArray} targetsArray\r\n * @param  {JSAnimation}    animation\r\n * @param  {String}       [propertyName]\r\n * @return {Boolean}\r\n */\r\nconst removeTargetsFromAnimation = (targetsArray, animation, propertyName) => {\r\n  let tweensMatchesTargets = false;\r\n  forEachChildren(animation, (/**@type {Tween} */tween) => {\r\n    const tweenTarget = tween.target;\r\n    if (targetsArray.includes(tweenTarget)) {\r\n      const tweenName = tween.property;\r\n      const tweenType = tween._tweenType;\r\n      const normalizePropName = sanitizePropertyName(propertyName, tweenTarget, tweenType);\r\n      if (!normalizePropName || normalizePropName && normalizePropName === tweenName) {\r\n        // Make sure to flag the previous CSS transform tween to renderTransform\r\n        if (tween.parent._tail === tween &&\r\n            tween._tweenType === tweenTypes.TRANSFORM &&\r\n            tween._prev &&\r\n            tween._prev._tweenType === tweenTypes.TRANSFORM\r\n        ) {\r\n          tween._prev._renderTransforms = 1;\r\n        }\r\n        // Removes the tween from the selected animation\r\n        removeChild(animation, tween);\r\n        // Detach the tween from its siblings to make sure blended tweens are correctlly removed\r\n        removeTweenSliblings(tween);\r\n        tweensMatchesTargets = true;\r\n      }\r\n    }\r\n  }, true);\r\n  return tweensMatchesTargets;\r\n};\r\n\r\n/**\r\n * @param  {TargetsParam} targets\r\n * @param  {Renderable|WAAPIAnimation} [renderable]\r\n * @param  {String}                    [propertyName]\r\n * @return {TargetsArray}\r\n */\r\nconst remove = (targets, renderable, propertyName) => {\r\n  const targetsArray = parseTargets(targets);\r\n  const parent = /** @type {Renderable|typeof engine} **/(renderable ? renderable : engine);\r\n  const waapiAnimation = renderable && /** @type {WAAPIAnimation} */(renderable).controlAnimation && /** @type {WAAPIAnimation} */(renderable);\r\n  for (let i = 0, l = targetsArray.length; i < l; i++) {\r\n    const $el = /** @type {DOMTarget}  */(targetsArray[i]);\r\n    removeWAAPIAnimation($el, propertyName, waapiAnimation);\r\n  }\r\n  let removeMatches;\r\n  if (parent._hasChildren) {\r\n    let iterationDuration = 0;\r\n    forEachChildren(parent, (/** @type {Renderable} */child) => {\r\n      if (!child._hasChildren) {\r\n        removeMatches = removeTargetsFromAnimation(targetsArray, /** @type {JSAnimation} */(child), propertyName);\r\n        // Remove the child from its parent if no tweens and no children left after the removal\r\n        if (removeMatches && !child._head) {\r\n          child.cancel();\r\n          removeChild(parent, child);\r\n        } else {\r\n          // Calculate the new iterationDuration value to handle onComplete with last child in render()\r\n          const childTLOffset = child._offset + child._delay;\r\n          const childDur = childTLOffset + child.duration;\r\n          if (childDur > iterationDuration) {\r\n            iterationDuration = childDur;\r\n          }\r\n        }\r\n      }\r\n      // Make sure to also remove engine's children targets\r\n      // NOTE: Avoid recursion?\r\n      if (child._head) {\r\n        remove(targets, child, propertyName);\r\n      } else {\r\n        child._hasChildren = false;\r\n      }\r\n    }, true);\r\n    // Update iterationDuration value to handle onComplete with last child in render()\r\n    if (!isUnd(/** @type {Renderable} */(parent).iterationDuration)) {\r\n      /** @type {Renderable} */(parent).iterationDuration = iterationDuration;\r\n    }\r\n  } else {\r\n    removeMatches = removeTargetsFromAnimation(\r\n      targetsArray,\r\n      /** @type {JSAnimation} */(parent),\r\n      propertyName\r\n    );\r\n  }\r\n\r\n  if (removeMatches && !parent._head) {\r\n    parent._hasChildren = false;\r\n    // Cancel the parent if there are no tweens and no children left after the removal\r\n    // We have to check if the .cancel() method exist to handle cases where the parent is the engine itself\r\n    if (/** @type {Renderable} */(parent).cancel) /** @type {Renderable} */(parent).cancel();\r\n  }\r\n\r\n  return targetsArray;\r\n};\r\n\r\n/**\r\n * @param  {(...args: any[]) => Tickable} constructor\r\n * @return {(...args: any[]) => Tickable}\r\n */\r\nconst keepTime = createRefreshable;\r\n\r\n/**\r\n * @param  {String|Array} items\r\n * @return {any}\r\n */\r\nconst randomPick = items => items[random(0, items.length - 1)];\r\n\r\n/**\r\n * @param  {Number|String} v\r\n * @param  {Number} decimalLength\r\n * @return {String}\r\n */\r\nconst roundPad = (v, decimalLength) => (+v).toFixed(decimalLength);\r\n\r\n/**\r\n * @param  {Number} v\r\n * @param  {Number} totalLength\r\n * @param  {String} padString\r\n * @return {String}\r\n */\r\nconst padStart = (v, totalLength, padString) => `${v}`.padStart(totalLength, padString);\r\n\r\n/**\r\n * @param  {Number} v\r\n * @param  {Number} totalLength\r\n * @param  {String} padString\r\n * @return {String}\r\n */\r\nconst padEnd = (v, totalLength, padString) => `${v}`.padEnd(totalLength, padString);\r\n\r\n/**\r\n * @param  {Number} v\r\n * @param  {Number} min\r\n * @param  {Number} max\r\n * @return {Number}\r\n */\r\nconst wrap = (v, min, max) => (((v - min) % (max - min) + (max - min)) % (max - min)) + min;\r\n\r\n/**\r\n * @param  {Number} value\r\n * @param  {Number} inLow\r\n * @param  {Number} inHigh\r\n * @param  {Number} outLow\r\n * @param  {Number} outHigh\r\n * @return {Number}\r\n */\r\nconst mapRange = (value, inLow, inHigh, outLow, outHigh) => outLow + ((value - inLow) / (inHigh - inLow)) * (outHigh - outLow);\r\n\r\n/**\r\n * @param  {Number} degrees\r\n * @return {Number}\r\n */\r\nconst degToRad = degrees => degrees * PI / 180;\r\n\r\n/**\r\n * @param  {Number} radians\r\n * @return {Number}\r\n */\r\nconst radToDeg = radians => radians * 180 / PI;\r\n\r\n/**\r\n * https://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\r\n * @param  {Number} start\r\n * @param  {Number} end\r\n * @param  {Number} amount\r\n * @param  {Renderable|Boolean} [renderable]\r\n * @return {Number}\r\n */\r\nconst lerp = (start, end, amount, renderable) => {\r\n  let dt = K / globals.defaults.frameRate;\r\n  if (renderable !== false) {\r\n    const ticker = /** @type Renderable */\r\n                   (renderable) ||\r\n                   (engine._hasChildren && engine);\r\n    if (ticker && ticker.deltaTime) {\r\n      dt = ticker.deltaTime;\r\n    }\r\n  }\r\n  const t = 1 - Math.exp(-amount * dt * .1);\r\n  return !amount ? start : amount === 1 ? end : (1 - t) * start + t * end;\r\n};\r\n\r\n// Chain-able utilities\r\n\r\n/**\r\n * @callback UtilityFunction\r\n * @param {...*} args\r\n * @return {Number|String}\r\n *\r\n * @param {UtilityFunction} fn\r\n * @param {Number} [last=0]\r\n * @return {function(...(Number|String)): function(Number|String): (Number|String)}\r\n */\r\nconst curry = (fn, last = 0) => (...args) => last ? v => fn(...args, v) : v => fn(v, ...args);\r\n\r\n/**\r\n * @param {Function} fn\r\n * @return {function(...(Number|String))}\r\n */\r\nconst chain = fn => {\r\n   return (...args) => {\r\n    const result = fn(...args);\r\n    return new Proxy(noop, {\r\n      apply: (_, __, [v]) => result(v),\r\n      get: (_, prop) => chain(/**@param {...Number|String} nextArgs */(...nextArgs) => {\r\n        const nextResult = utils[prop](...nextArgs);\r\n        return (/**@type {Number|String} */v) => nextResult(result(v));\r\n      })\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * @param {UtilityFunction} fn\r\n * @param {Number} [right]\r\n * @return {function(...(Number|String)): UtilityFunction}\r\n */\r\nconst makeChainable = (fn, right = 0) => (...args) => (args.length < fn.length ? chain(curry(fn, right)) : fn)(...args);\r\n\r\n/**\r\n * @callback ChainedUtilsResult\r\n * @param {Number} value\r\n * @return {Number}\r\n *\r\n * @typedef {Object} ChainableUtils\r\n * @property {ChainedClamp} clamp\r\n * @property {ChainedRound} round\r\n * @property {ChainedSnap} snap\r\n * @property {ChainedWrap} wrap\r\n * @property {ChainedInterpolate} interpolate\r\n * @property {ChainedMapRange} mapRange\r\n * @property {ChainedRoundPad} roundPad\r\n * @property {ChainedPadStart} padStart\r\n * @property {ChainedPadEnd} padEnd\r\n * @property {ChainedDegToRad} degToRad\r\n * @property {ChainedRadToDeg} radToDeg\r\n *\r\n * @typedef {ChainableUtils & ChainedUtilsResult} ChainableUtil\r\n *\r\n * @callback ChainedClamp\r\n * @param {Number} min\r\n * @param {Number} max\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedRound\r\n * @param {Number} decimalLength\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedSnap\r\n * @param {Number} increment\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedWrap\r\n * @param {Number} min\r\n * @param {Number} max\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedInterpolate\r\n * @param {Number} start\r\n * @param {Number} end\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedMapRange\r\n * @param {Number} inLow\r\n * @param {Number} inHigh\r\n * @param {Number} outLow\r\n * @param {Number} outHigh\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedRoundPad\r\n * @param {Number} decimalLength\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedPadStart\r\n * @param {Number} totalLength\r\n * @param {String} padString\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedPadEnd\r\n * @param {Number} totalLength\r\n * @param {String} padString\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedDegToRad\r\n * @return {ChainableUtil}\r\n *\r\n * @callback ChainedRadToDeg\r\n * @return {ChainableUtil}\r\n */\r\n\r\nconst utils = {\r\n  $: registerTargets,\r\n  get: getTargetValue,\r\n  set: setTargetValues,\r\n  remove,\r\n  cleanInlineStyles,\r\n  random,\r\n  randomPick,\r\n  shuffle,\r\n  lerp,\r\n  sync,\r\n  keepTime,\r\n  clamp: /** @type {typeof clamp & ChainedClamp} */(makeChainable(clamp)),\r\n  round: /** @type {typeof round & ChainedRound} */(makeChainable(round)),\r\n  snap: /** @type {typeof snap & ChainedSnap} */(makeChainable(snap)),\r\n  wrap: /** @type {typeof wrap & ChainedWrap} */(makeChainable(wrap)),\r\n  interpolate: /** @type {typeof interpolate & ChainedInterpolate} */(makeChainable(interpolate, 1)),\r\n  mapRange: /** @type {typeof mapRange & ChainedMapRange} */(makeChainable(mapRange)),\r\n  roundPad: /** @type {typeof roundPad & ChainedRoundPad} */(makeChainable(roundPad)),\r\n  padStart: /** @type {typeof padStart & ChainedPadStart} */(makeChainable(padStart)),\r\n  padEnd: /** @type {typeof padEnd & ChainedPadEnd} */(makeChainable(padEnd)),\r\n  degToRad: /** @type {typeof degToRad & ChainedDegToRad} */(makeChainable(degToRad)),\r\n  radToDeg: /** @type {typeof radToDeg & ChainedRadToDeg} */(makeChainable(radToDeg)),\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @typedef {Number|String|Function} TimePosition\r\n */\r\n\r\n/**\r\n * Timeline's children offsets positions parser\r\n * @param  {Timeline} timeline\r\n * @param  {String} timePosition\r\n * @return {Number}\r\n */\r\nconst getPrevChildOffset = (timeline, timePosition) => {\r\n  if (stringStartsWith(timePosition, '<')) {\r\n    const goToPrevAnimationOffset = timePosition[1] === '<';\r\n    const prevAnimation = /** @type {Tickable} */(timeline._tail);\r\n    const prevOffset = prevAnimation ? prevAnimation._offset + prevAnimation._delay : 0;\r\n    return goToPrevAnimationOffset ? prevOffset : prevOffset + prevAnimation.duration;\r\n  }\r\n};\r\n\r\n/**\r\n * @param  {Timeline} timeline\r\n * @param  {TimePosition} [timePosition]\r\n * @return {Number}\r\n */\r\nconst parseTimelinePosition = (timeline, timePosition) => {\r\n  let tlDuration = timeline.iterationDuration;\r\n  if (tlDuration === minValue) tlDuration = 0;\r\n  if (isUnd(timePosition)) return tlDuration;\r\n  if (isNum(+timePosition)) return +timePosition;\r\n  const timePosStr = /** @type {String} */(timePosition);\r\n  const tlLabels = timeline ? timeline.labels : null;\r\n  const hasLabels = !isNil(tlLabels);\r\n  const prevOffset = getPrevChildOffset(timeline, timePosStr);\r\n  const hasSibling = !isUnd(prevOffset);\r\n  const matchedRelativeOperator = relativeValuesExecRgx.exec(timePosStr);\r\n  if (matchedRelativeOperator) {\r\n    const fullOperator = matchedRelativeOperator[0];\r\n    const split = timePosStr.split(fullOperator);\r\n    const labelOffset = hasLabels && split[0] ? tlLabels[split[0]] : tlDuration;\r\n    const parsedOffset = hasSibling ? prevOffset : hasLabels ? labelOffset : tlDuration;\r\n    const parsedNumericalOffset = +split[1];\r\n    return getRelativeValue(parsedOffset, parsedNumericalOffset, fullOperator[0]);\r\n  } else {\r\n    return hasSibling ? prevOffset :\r\n           hasLabels ? !isUnd(tlLabels[timePosStr]) ? tlLabels[timePosStr] :\r\n           tlDuration : tlDuration;\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Timeline} tl\r\n * @return {Number}\r\n */\r\nfunction getTimelineTotalDuration(tl) {\r\n  return clampInfinity(((tl.iterationDuration + tl._loopDelay) * tl.iterationCount) - tl._loopDelay) || minValue;\r\n}\r\n\r\n/**\r\n * @overload\r\n * @param  {TimerParams} childParams\r\n * @param  {Timeline} tl\r\n * @param  {Number} timePosition\r\n * @return {Timeline}\r\n *\r\n * @overload\r\n * @param  {AnimationParams} childParams\r\n * @param  {Timeline} tl\r\n * @param  {Number} timePosition\r\n * @param  {TargetsParam} targets\r\n * @param  {Number} [index]\r\n * @param  {Number} [length]\r\n * @return {Timeline}\r\n *\r\n * @param  {TimerParams|AnimationParams} childParams\r\n * @param  {Timeline} tl\r\n * @param  {Number} timePosition\r\n * @param  {TargetsParam} [targets]\r\n * @param  {Number} [index]\r\n * @param  {Number} [length]\r\n */\r\nfunction addTlChild(childParams, tl, timePosition, targets, index, length) {\r\n  const isSetter = isNum(childParams.duration) && /** @type {Number} */(childParams.duration) <= minValue;\r\n  // Offset the tl position with -minValue for 0 duration animations or .set() calls in order to align their end value with the defined position\r\n  const adjustedPosition = isSetter ? timePosition - minValue : timePosition;\r\n  tick(tl, adjustedPosition, 1, 1, tickModes.AUTO);\r\n  const tlChild = targets ?\r\n    new JSAnimation(targets,/** @type {AnimationParams} */(childParams), tl, adjustedPosition, false, index, length) :\r\n    new Timer(/** @type {TimerParams} */(childParams), tl, adjustedPosition);\r\n  tlChild.init(1);\r\n  // TODO: Might be better to insert at a position relative to startTime?\r\n  addChild(tl, tlChild);\r\n  forEachChildren(tl, (/** @type {Renderable} */child) => {\r\n    const childTLOffset = child._offset + child._delay;\r\n    const childDur = childTLOffset + child.duration;\r\n    if (childDur > tl.iterationDuration) tl.iterationDuration = childDur;\r\n  });\r\n  tl.duration = getTimelineTotalDuration(tl);\r\n  return tl;\r\n}\r\n\r\nclass Timeline extends Timer {\r\n\r\n  /**\r\n   * @param {TimelineParams} [parameters]\r\n   */\r\n  constructor(parameters = {}) {\r\n    super(/** @type {TimerParams&TimelineParams} */(parameters), null, 0);\r\n    /** @type {Number} */\r\n    this.duration = 0; // TL duration starts at 0 and grows when adding children\r\n    /** @type {Record<String, Number>} */\r\n    this.labels = {};\r\n    const defaultsParams = parameters.defaults;\r\n    const globalDefaults = globals.defaults;\r\n    /** @type {DefaultsParams} */\r\n    this.defaults = defaultsParams ? mergeObjects(defaultsParams, globalDefaults) : globalDefaults;\r\n    /** @type {Callback<this>} */\r\n    this.onRender = parameters.onRender || globalDefaults.onRender;\r\n    const tlPlaybackEase = setValue(parameters.playbackEase, globalDefaults.playbackEase);\r\n    this._ease = tlPlaybackEase ? parseEasings(tlPlaybackEase) : null;\r\n    /** @type {Number} */\r\n    this.iterationDuration = 0;\r\n  }\r\n\r\n  /**\r\n   * @overload\r\n   * @param {TargetsParam} a1\r\n   * @param {AnimationParams} a2\r\n   * @param {TimePosition} [a3]\r\n   * @return {this}\r\n   *\r\n   * @overload\r\n   * @param {TimerParams} a1\r\n   * @param {TimePosition} [a2]\r\n   * @return {this}\r\n   *\r\n   * @param {TargetsParam|TimerParams} a1\r\n   * @param {AnimationParams|TimePosition} a2\r\n   * @param {TimePosition} [a3]\r\n   */\r\n  add(a1, a2, a3) {\r\n    const isAnim = isObj(a2);\r\n    const isTimer = isObj(a1);\r\n    if (isAnim || isTimer) {\r\n      this._hasChildren = true;\r\n      if (isAnim) {\r\n        const childParams = /** @type {AnimationParams} */(a2);\r\n        // Check for function for children stagger positions\r\n        if (isFnc(a3)) {\r\n          const staggeredPosition = /** @type {Function} */(a3);\r\n          const parsedTargetsArray = parseTargets(/** @type {TargetsParam} */(a1));\r\n          // Store initial duration before adding new children that will change the duration\r\n          const tlDuration = this.duration;\r\n          // Store initial _iterationDuration before adding new children that will change the duration\r\n          const tlIterationDuration = this.iterationDuration;\r\n          // Store the original id in order to add specific indexes to the new animations ids\r\n          const id = childParams.id;\r\n          let i = 0;\r\n          const parsedLength = parsedTargetsArray.length;\r\n          parsedTargetsArray.forEach((/** @type {Target} */target) => {\r\n            // Create a new parameter object for each staggered children\r\n            const staggeredChildParams = { ...childParams };\r\n            // Reset the duration of the timeline iteration before each stagger to prevent wrong start value calculation\r\n            this.duration = tlDuration;\r\n            this.iterationDuration = tlIterationDuration;\r\n            if (!isUnd(id)) staggeredChildParams.id = id + '-' + i;\r\n            addTlChild(\r\n              staggeredChildParams,\r\n              this,\r\n              staggeredPosition(target, i, parsedLength, this),\r\n              target,\r\n              i,\r\n              parsedLength\r\n            );\r\n            i++;\r\n          });\r\n        } else {\r\n          addTlChild(\r\n            childParams,\r\n            this,\r\n            parseTimelinePosition(this, a3),\r\n            /** @type {TargetsParam} */(a1),\r\n          );\r\n        }\r\n      } else {\r\n        // It's a Timer\r\n        addTlChild(\r\n          /** @type TimerParams */(a1),\r\n          this,\r\n          parseTimelinePosition(this,/** @type TimePosition */(a2)),\r\n        );\r\n      }\r\n      return this.init(1); // 1 = internalRender\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @overload\r\n   * @param {Tickable} [synced]\r\n   * @param {TimePosition} [position]\r\n   * @return {this}\r\n   *\r\n   * @overload\r\n   * @param {globalThis.Animation} [synced]\r\n   * @param {TimePosition} [position]\r\n   * @return {this}\r\n   *\r\n   * @overload\r\n   * @param {WAAPIAnimation} [synced]\r\n   * @param {TimePosition} [position]\r\n   * @return {this}\r\n   *\r\n   * @param {Tickable|WAAPIAnimation|globalThis.Animation} [synced]\r\n   * @param {TimePosition} [position]\r\n   */\r\n  sync(synced, position) {\r\n    if (isUnd(synced) || synced && isUnd(synced.pause)) return this;\r\n    synced.pause();\r\n    const duration = +(/** @type {globalThis.Animation} */(synced).effect ? /** @type {globalThis.Animation} */(synced).effect.getTiming().duration : /** @type {Tickable} */(synced).duration);\r\n    return this.add(synced, { currentTime: [0, duration], duration, ease: 'linear' }, position);\r\n  }\r\n\r\n  /**\r\n   * @param  {TargetsParam} targets\r\n   * @param  {AnimationParams} parameters\r\n   * @param  {TimePosition} [position]\r\n   * @return {this}\r\n   */\r\n  set(targets, parameters, position) {\r\n    if (isUnd(parameters)) return this;\r\n    parameters.duration = minValue;\r\n    parameters.composition = compositionTypes.replace;\r\n    return this.add(targets, parameters, position);\r\n  }\r\n\r\n  /**\r\n   * @param {Callback<Timer>} callback\r\n   * @param {TimePosition} [position]\r\n   * @return {this}\r\n   */\r\n  call(callback, position) {\r\n    if (isUnd(callback) || callback && !isFnc(callback)) return this;\r\n    return this.add({ duration: 0, onComplete: () => callback(this) }, position);\r\n  }\r\n\r\n  /**\r\n   * @param {String} labelName\r\n   * @param {TimePosition} [position]\r\n   * @return {this}\r\n   *\r\n   */\r\n  label(labelName, position) {\r\n    if (isUnd(labelName) || labelName && !isStr(labelName)) return this;\r\n    this.labels[labelName] = parseTimelinePosition(this,/** @type TimePosition */(position));\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param  {TargetsParam} targets\r\n   * @param  {String} [propertyName]\r\n   * @return {this}\r\n   */\r\n  remove(targets, propertyName) {\r\n    remove(targets, this, propertyName);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} newDuration\r\n   * @return {this}\r\n   */\r\n  stretch(newDuration) {\r\n    const currentDuration = this.duration;\r\n    if (currentDuration === normalizeTime(newDuration)) return this;\r\n    const timeScale = newDuration / currentDuration;\r\n    const labels = this.labels;\r\n    forEachChildren(this, (/** @type {JSAnimation} */child) => child.stretch(child.duration * timeScale));\r\n    for (let labelName in labels) labels[labelName] *= timeScale;\r\n    return super.stretch(newDuration);\r\n  }\r\n\r\n  /**\r\n   * @return {this}\r\n   */\r\n  refresh() {\r\n    forEachChildren(this, (/** @type {JSAnimation} */child) => {\r\n      if (child.refresh) child.refresh();\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @return {this}\r\n   */\r\n  revert() {\r\n    super.revert();\r\n    forEachChildren(this, (/** @type {JSAnimation} */child) => child.revert, true);\r\n    return cleanInlineStyles(this);\r\n  }\r\n\r\n  /**\r\n   * @param  {Callback<this>} [callback]\r\n   * @return {Promise}\r\n   */\r\n  then(callback) {\r\n    return super.then(callback);\r\n  }\r\n}\r\n\r\n/**\r\n * @param {TimelineParams} [parameters]\r\n * @return {Timeline}\r\n */\r\nconst createTimeline = parameters => new Timeline(parameters).init();\r\n\r\n\r\n\r\n\r\nclass Animatable {\r\n  /**\r\n   * @param {TargetsParam} targets\r\n   * @param {AnimatableParams} parameters\r\n   */\r\n  constructor(targets, parameters) {\r\n    if (scope.current) scope.current.register(this);\r\n    /** @type {AnimationParams} */\r\n    const globalParams = {};\r\n    const properties = {};\r\n    this.targets = [];\r\n    this.animations = {};\r\n    if (isUnd(targets) || isUnd(parameters)) return;\r\n    for (let propName in parameters) {\r\n      const paramValue = parameters[propName];\r\n      if (isKey(propName)) {\r\n        properties[propName] = paramValue;\r\n      } else {\r\n        globalParams[propName] = paramValue;\r\n      }\r\n    }\r\n    for (let propName in properties) {\r\n      const propValue = properties[propName];\r\n      const isObjValue = isObj(propValue);\r\n      /** @type {TweenParamsOptions} */\r\n      let propParams = {};\r\n      let to = '+=0';\r\n      if (isObjValue) {\r\n        const unit = propValue.unit;\r\n        if (isStr(unit)) to += unit;\r\n      } else {\r\n        propParams.duration = propValue;\r\n      }\r\n      propParams[propName] = isObjValue ? mergeObjects({ to }, propValue) : to;\r\n      const animParams = mergeObjects(globalParams, propParams);\r\n      animParams.composition = compositionTypes.replace;\r\n      animParams.autoplay = false;\r\n      const animation = this.animations[propName] = new JSAnimation(targets, animParams, null, 0, false).init();\r\n      if (!this.targets.length) this.targets.push(...animation.targets);\r\n      /** @type {AnimatableProperty} */\r\n      this[propName] = (to, duration, ease) => {\r\n        const tween = /** @type {Tween} */(animation._head);\r\n        if (isUnd(to) && tween) {\r\n          const numbers = tween._numbers;\r\n          if (numbers && numbers.length) {\r\n            return numbers;\r\n          } else {\r\n            return tween._modifier(tween._number);\r\n          }\r\n        } else {\r\n          forEachChildren(animation, (/** @type {Tween} */tween) => {\r\n            if (isArr(to)) {\r\n              for (let i = 0, l = /** @type {Array} */(to).length; i < l; i++) {\r\n                if (!isUnd(tween._numbers[i])) {\r\n                  tween._fromNumbers[i] = /** @type {Number} */(tween._modifier(tween._numbers[i]));\r\n                  tween._toNumbers[i] = to[i];\r\n                }\r\n              }\r\n            } else {\r\n              tween._fromNumber = /** @type {Number} */(tween._modifier(tween._number));\r\n              tween._toNumber = /** @type {Number} */(to);\r\n            }\r\n            if (!isUnd(ease)) tween._ease = parseEasings(ease);\r\n            tween._currentTime = 0;\r\n          });\r\n          if (!isUnd(duration)) animation.stretch(duration);\r\n          animation.reset(1).resume();\r\n          return this;\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  revert() {\r\n    for (let propName in this.animations) {\r\n      this[propName] = noop;\r\n      this.animations[propName].revert();\r\n    }\r\n    this.animations = {};\r\n    this.targets.length = 0;\r\n    return this;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {TargetsParam} targets\r\n * @param {AnimatableParams} parameters\r\n * @return {AnimatableObject}\r\n */\r\nconst createAnimatable = (targets, parameters) => /** @type {AnimatableObject} */(new Animatable(targets, parameters));\r\n\r\n\r\n\r\n\r\n/*\r\n * Spring ease solver adapted from https://webkit.org/demos/spring/spring.js\r\n * Webkit Copyright © 2016 Apple Inc\r\n */\r\n\r\n/**\r\n * @typedef {Object} SpringParams\r\n * @property {Number} [mass=1] - Mass, default 1\r\n * @property {Number} [stiffness=100] - Stiffness, default 100\r\n * @property {Number} [damping=10] - Damping, default 10\r\n * @property {Number} [velocity=0] - Initial velocity, default 0\r\n */\r\n\r\nclass Spring {\r\n  /**\r\n   * @param {SpringParams} [parameters]\r\n   */\r\n  constructor(parameters = {}) {\r\n    this.timeStep = .02; // Interval fed to the solver to calculate duration\r\n    this.restThreshold = .0005; // Values below this threshold are considered resting position\r\n    this.restDuration = 200; // Duration in ms used to check if the spring is resting after reaching restThreshold\r\n    this.maxDuration = 60000; // The maximum allowed spring duration in ms (default 1 min)\r\n    this.maxRestSteps = this.restDuration / this.timeStep / K; // How many steps allowed after reaching restThreshold before stopping the duration calculation\r\n    this.maxIterations = this.maxDuration / this.timeStep / K; // Calculate the maximum iterations allowed based on maxDuration\r\n    this.m = clamp(setValue(parameters.mass, 1), 0, K);\r\n    this.s = clamp(setValue(parameters.stiffness, 100), 1, K);\r\n    this.d = clamp(setValue(parameters.damping, 10), .1, K);\r\n    this.v = clamp(setValue(parameters.velocity, 0), -1e3, K);\r\n    this.w0 = 0;\r\n    this.zeta = 0;\r\n    this.wd = 0;\r\n    this.b = 0;\r\n    this.solverDuration = 0;\r\n    this.duration = 0;\r\n    this.compute();\r\n    /** @type {EasingFunction} */\r\n    this.ease = t => t === 0 || t === 1 ? t : this.solve(t * this.solverDuration);\r\n  }\r\n\r\n  /** @type {EasingFunction} */\r\n  solve(time) {\r\n    const { zeta, w0, wd, b } = this;\r\n    let t = time;\r\n    if (zeta < 1) {\r\n      t = exp(-t * zeta * w0) * (1 * cos(wd * t) + b * sin(wd * t));\r\n    } else {\r\n      t = (1 + b * t) * exp(-t * w0);\r\n    }\r\n    return 1 - t;\r\n  }\r\n\r\n  compute() {\r\n    const { maxRestSteps, maxIterations, restThreshold, timeStep, m, d, s, v } = this;\r\n    const w0 = this.w0 = clamp(sqrt(s / m), minValue, K);\r\n    const zeta = this.zeta = d / (2 * sqrt(s * m));\r\n    const wd = this.wd = zeta < 1 ? w0 * sqrt(1 - zeta * zeta) : 0;\r\n    this.b = zeta < 1 ? (zeta * w0 + -v) / wd : -v + w0;\r\n    let solverTime = 0;\r\n    let restSteps = 0;\r\n    let iterations = 0;\r\n    while (restSteps < maxRestSteps && iterations < maxIterations) {\r\n      if (abs(1 - this.solve(solverTime)) < restThreshold) {\r\n        restSteps++;\r\n      } else {\r\n        restSteps = 0;\r\n      }\r\n      this.solverDuration = solverTime;\r\n      solverTime += timeStep;\r\n      iterations++;\r\n    }\r\n    this.duration = round(this.solverDuration * K, 0) * globals.timeScale;\r\n  }\r\n\r\n  get mass() {\r\n    return this.m;\r\n  }\r\n\r\n  set mass(v) {\r\n    this.m = clamp(setValue(v, 1), 0, K);\r\n    this.compute();\r\n  }\r\n\r\n  get stiffness() {\r\n    return this.s;\r\n  }\r\n\r\n  set stiffness(v) {\r\n    this.s = clamp(setValue(v, 100), 1, K);\r\n    this.compute();\r\n  }\r\n\r\n  get damping() {\r\n    return this.d;\r\n  }\r\n\r\n  set damping(v) {\r\n    this.d = clamp(setValue(v, 10), .1, K);\r\n    this.compute();\r\n  }\r\n\r\n  get velocity() {\r\n    return this.v;\r\n  }\r\n\r\n  set velocity(v) {\r\n    this.v = clamp(setValue(v, 0), -1e3, K);\r\n    this.compute();\r\n  }\r\n}\r\n\r\n/**\r\n * @param {SpringParams} [parameters]\r\n * @returns {Spring}\r\n */\r\nconst createSpring = (parameters) => new Spring(parameters);\r\n\r\n\r\n\r\n\r\n/**\r\n * @param {Event} e\r\n */\r\nconst preventDefault = e => {\r\n  if (e.cancelable) e.preventDefault();\r\n};\r\n\r\nclass DOMProxy {\r\n  /** @param {Object} el */\r\n  constructor(el) {\r\n    this.el = el;\r\n    this.zIndex = 0;\r\n    this.parentElement = null;\r\n    this.classList = {\r\n      add: noop,\r\n      remove: noop,\r\n    };\r\n  }\r\n\r\n  get x() { return this.el.x || 0 };\r\n  set x(v) { this.el.x = v; };\r\n\r\n  get y() { return this.el.y || 0 };\r\n  set y(v) { this.el.y = v; };\r\n\r\n  get width() { return this.el.width || 0 };\r\n  set width(v) { this.el.width = v; };\r\n\r\n  get height() { return this.el.height || 0 };\r\n  set height(v) { this.el.height = v; };\r\n\r\n  getBoundingClientRect() {\r\n    return {\r\n      top: this.y,\r\n      right: this.x,\r\n      bottom: this.y + this.height,\r\n      left: this.x + this.width,\r\n    }\r\n  }\r\n}\r\n\r\nclass Transforms {\r\n  /**\r\n   * @param {DOMTarget|DOMProxy} $el\r\n   */\r\n  constructor($el) {\r\n    this.$el = $el;\r\n    this.inlineTransforms = [];\r\n    this.point = new DOMPoint();\r\n    this.inversedMatrix = this.getMatrix().inverse();\r\n  }\r\n\r\n  /**\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   * @return {DOMPoint}\r\n   */\r\n  normalizePoint(x, y) {\r\n    this.point.x = x;\r\n    this.point.y = y;\r\n    return this.point.matrixTransform(this.inversedMatrix);\r\n  }\r\n\r\n  /**\r\n   * @callback TraverseParentsCallback\r\n   * @param {DOMTarget} $el\r\n   * @param {Number} i\r\n   */\r\n\r\n  /**\r\n   * @param {TraverseParentsCallback} cb\r\n   */\r\n  traverseUp(cb) {\r\n    let $el = /** @type {DOMTarget|Document} */(this.$el.parentElement), i = 0;\r\n    while ($el && $el !== doc) {\r\n      cb(/** @type {DOMTarget} */($el), i);\r\n      $el = /** @type {DOMTarget} */($el.parentElement);\r\n      i++;\r\n    }\r\n  }\r\n\r\n  getMatrix() {\r\n    const matrix = new DOMMatrix();\r\n    this.traverseUp($el => {\r\n      const transformValue = getComputedStyle($el).transform;\r\n      if (transformValue) {\r\n        const elMatrix = new DOMMatrix(transformValue);\r\n        matrix.preMultiplySelf(elMatrix);\r\n      }\r\n    });\r\n    return matrix;\r\n  }\r\n\r\n  remove() {\r\n    this.traverseUp(($el, i) => {\r\n      this.inlineTransforms[i] = $el.style.transform;\r\n      $el.style.transform = 'none';\r\n    });\r\n  }\r\n\r\n  revert() {\r\n    this.traverseUp(($el, i) => {\r\n      const ct = this.inlineTransforms[i];\r\n      if (ct === '') {\r\n        $el.style.removeProperty('transform');\r\n      } else {\r\n        $el.style.transform = ct;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * @template {Array<Number>|DOMTargetSelector|String|Number|Boolean|Function|DraggableCursorParams} T\r\n * @param {T | ((draggable: Draggable) => T)} value\r\n * @param {Draggable} draggable\r\n * @return {T}\r\n */\r\nconst parseDraggableFunctionParameter = (value, draggable) => value && isFnc(value) ? /** @type {Function} */(value)(draggable) : value;\r\n\r\nlet zIndex = 0;\r\n\r\nclass Draggable {\r\n  /**\r\n   * @param {TargetsParam} target\r\n   * @param {DraggableParams} [parameters]\r\n   */\r\n  constructor(target, parameters = {}) {\r\n    if (!target) return;\r\n    if (scope.current) scope.current.register(this);\r\n    const paramX = parameters.x;\r\n    const paramY = parameters.y;\r\n    const trigger = parameters.trigger;\r\n    const modifier = parameters.modifier;\r\n    const ease = parameters.releaseEase;\r\n    const customEase = ease && parseEasings(ease);\r\n    const hasSpring = !isUnd(ease) && !isUnd(/** @type {Spring} */(ease).ease);\r\n    const xProp = /** @type {String} */(isObj(paramX) && !isUnd(/** @type {Object} */(paramX).mapTo) ? /** @type {Object} */(paramX).mapTo : 'translateX');\r\n    const yProp = /** @type {String} */(isObj(paramY) && !isUnd(/** @type {Object} */(paramY).mapTo) ? /** @type {Object} */(paramY).mapTo : 'translateY');\r\n    const container = parseDraggableFunctionParameter(parameters.container, this);\r\n    this.containerArray = isArr(container) ? container : null;\r\n    this.$container = /** @type {HTMLElement} */(container && !this.containerArray ? parseTargets(/** @type {DOMTarget} */(container))[0] : doc.body);\r\n    this.useWin = this.$container === doc.body;\r\n    /** @type {Window | HTMLElement} */\r\n    this.$scrollContainer = this.useWin ? win : this.$container;\r\n    this.$target = /** @type {HTMLElement} */(isObj(target) ? new DOMProxy(target) : parseTargets(target)[0]);\r\n    this.$trigger = /** @type {HTMLElement} */(parseTargets(trigger ? trigger : target)[0]);\r\n    this.fixed = getTargetValue(this.$target, 'position') === 'fixed';\r\n    // Refreshable parameters\r\n    this.isFinePointer = true;\r\n    /** @type {[Number, Number, Number, Number]} */\r\n    this.containerPadding = [0, 0, 0, 0];\r\n    /** @type {Number} */\r\n    this.containerFriction = 0;\r\n    /** @type {Number} */\r\n    this.releaseContainerFriction = 0;\r\n    /** @type {Number|Array<Number>} */\r\n    this.snapX = 0;\r\n    /** @type {Number|Array<Number>} */\r\n    this.snapY = 0;\r\n    /** @type {Number} */\r\n    this.scrollSpeed = 0;\r\n    /** @type {Number} */\r\n    this.scrollThreshold = 0;\r\n    /** @type {Number} */\r\n    this.dragSpeed = 0;\r\n    /** @type {Number} */\r\n    this.maxVelocity = 0;\r\n    /** @type {Number} */\r\n    this.minVelocity = 0;\r\n    /** @type {Number} */\r\n    this.velocityMultiplier = 0;\r\n    /** @type {Boolean|DraggableCursorParams} */\r\n    this.cursor = false;\r\n    /** @type {Spring} */\r\n    this.releaseXSpring = hasSpring ? /** @type {Spring} */(ease) : createSpring({\r\n      mass: setValue(parameters.releaseMass, 1),\r\n      stiffness: setValue(parameters.releaseStiffness, 80),\r\n      damping: setValue(parameters.releaseDamping, 20),\r\n    });\r\n    /** @type {Spring} */\r\n    this.releaseYSpring = hasSpring ? /** @type {Spring} */(ease) : createSpring({\r\n      mass: setValue(parameters.releaseMass, 1),\r\n      stiffness: setValue(parameters.releaseStiffness, 80),\r\n      damping: setValue(parameters.releaseDamping, 20),\r\n    });\r\n    /** @type {EasingFunction} */\r\n    this.releaseEase = customEase || eases.outQuint;\r\n    /** @type {Boolean} */\r\n    this.hasReleaseSpring = hasSpring;\r\n    /** @type {Callback<this>} */\r\n    this.onGrab = parameters.onGrab || noop;\r\n    /** @type {Callback<this>} */\r\n    this.onDrag = parameters.onDrag || noop;\r\n    /** @type {Callback<this>} */\r\n    this.onRelease = parameters.onRelease || noop;\r\n    /** @type {Callback<this>} */\r\n    this.onUpdate = parameters.onUpdate || noop;\r\n    /** @type {Callback<this>} */\r\n    this.onSettle = parameters.onSettle || noop;\r\n    /** @type {Callback<this>} */\r\n    this.onSnap = parameters.onSnap || noop;\r\n    /** @type {Callback<this>} */\r\n    this.onResize = parameters.onResize || noop;\r\n    /** @type {Callback<this>} */\r\n    this.onAfterResize = parameters.onAfterResize || noop;\r\n    /** @type {[Number, Number]} */\r\n    this.disabled = [0, 0];\r\n    /** @type {AnimatableParams} */\r\n    const animatableParams = {};\r\n    if (modifier) animatableParams.modifier = modifier;\r\n    if (isUnd(paramX) || paramX === true) {\r\n      animatableParams[xProp] = 0;\r\n    } else if (isObj(paramX)) {\r\n      const paramXObject = /** @type {DraggableAxisParam} */(paramX);\r\n      const animatableXParams = {};\r\n      if (paramXObject.modifier) animatableXParams.modifier = paramXObject.modifier;\r\n      if (paramXObject.composition) animatableXParams.composition = paramXObject.composition;\r\n      animatableParams[xProp] = animatableXParams;\r\n    } else if (paramX === false) {\r\n      animatableParams[xProp] = 0;\r\n      this.disabled[0] = 1;\r\n    }\r\n    if (isUnd(paramY) || paramY === true) {\r\n      animatableParams[yProp] = 0;\r\n    } else if (isObj(paramY)) {\r\n      const paramYObject = /** @type {DraggableAxisParam} */(paramY);\r\n      const animatableYParams = {};\r\n      if (paramYObject.modifier) animatableYParams.modifier = paramYObject.modifier;\r\n      if (paramYObject.composition) animatableYParams.composition = paramYObject.composition;\r\n      animatableParams[yProp] = animatableYParams;\r\n    } else if (paramY === false) {\r\n      animatableParams[yProp] = 0;\r\n      this.disabled[1] = 1;\r\n    }\r\n    /** @type {AnimatableObject} */\r\n    this.animate = /** @type {AnimatableObject} */(new Animatable(this.$target, animatableParams));\r\n    // Internal props\r\n    this.xProp = xProp;\r\n    this.yProp = yProp;\r\n    this.destX = 0;\r\n    this.destY = 0;\r\n    this.deltaX = 0;\r\n    this.deltaY = 0;\r\n    this.scroll = {x: 0, y: 0};\r\n    /** @type {[Number, Number, Number, Number]} */\r\n    this.coords = [this.x, this.y, 0, 0]; // x, y, temp x, temp y\r\n    /** @type {[Number, Number]} */\r\n    this.snapped = [0, 0]; // x, y\r\n    /** @type {[Number, Number, Number, Number, Number, Number, Number, Number]} */\r\n    this.pointer = [0, 0, 0, 0, 0, 0, 0, 0]; // x1, y1, x2, y2, temp x1, temp y1, temp x2, temp y2\r\n    /** @type {[Number, Number]} */\r\n    this.scrollView = [0, 0]; // w, h\r\n    /** @type {[Number, Number, Number, Number]} */\r\n    this.dragArea = [0, 0, 0, 0]; // x, y, w, h\r\n    /** @type {[Number, Number, Number, Number]} */\r\n    this.containerBounds = [-1e12, maxValue, maxValue, -1e12]; // t, r, b, l\r\n    /** @type {[Number, Number, Number, Number]} */\r\n    this.scrollBounds = [0, 0, 0, 0]; // t, r, b, l\r\n    /** @type {[Number, Number, Number, Number]} */\r\n    this.targetBounds = [0, 0, 0, 0]; // t, r, b, l\r\n    /** @type {[Number, Number]} */\r\n    this.window = [0, 0]; // w, h\r\n    /** @type {[Number, Number, Number]} */\r\n    this.velocityStack = [0, 0, 0];\r\n    /** @type {Number} */\r\n    this.velocityStackIndex = 0;\r\n    /** @type {Number} */\r\n    this.velocityTime = now();\r\n    /** @type {Number} */\r\n    this.velocity = 0;\r\n    /** @type {Number} */\r\n    this.angle = 0;\r\n    /** @type {JSAnimation} */\r\n    this.cursorStyles = null;\r\n    /** @type {JSAnimation} */\r\n    this.triggerStyles = null;\r\n    /** @type {JSAnimation} */\r\n    this.bodyStyles = null;\r\n    /** @type {JSAnimation} */\r\n    this.targetStyles = null;\r\n    /** @type {JSAnimation} */\r\n    this.touchActionStyles = null;\r\n    this.transforms = new Transforms(this.$target);\r\n    this.overshootCoords = { x: 0, y: 0 };\r\n    this.overshootXTicker = new Timer({ autoplay: false }, null, 0).init();\r\n    this.overshootYTicker = new Timer({ autoplay: false }, null, 0).init();\r\n    this.updateTicker = new Timer({ autoplay: false }, null, 0).init();\r\n    this.overshootXTicker.onUpdate = () => {\r\n      if (this.disabled[0]) return;\r\n      this.updated = true;\r\n      this.manual = true;\r\n      this.animate[this.xProp](this.overshootCoords.x, 0);\r\n    };\r\n    this.overshootXTicker.onComplete = () => {\r\n      if (this.disabled[0]) return;\r\n      this.manual = false;\r\n      this.animate[this.xProp](this.overshootCoords.x, 0);\r\n    };\r\n    this.overshootYTicker.onUpdate = () => {\r\n      if (this.disabled[1]) return;\r\n      this.updated = true;\r\n      this.manual = true;\r\n      this.animate[this.yProp](this.overshootCoords.y, 0);\r\n    };\r\n    this.overshootYTicker.onComplete = () => {\r\n      if (this.disabled[1]) return;\r\n      this.manual = false;\r\n      this.animate[this.yProp](this.overshootCoords.y, 0);\r\n    };\r\n    this.updateTicker.onUpdate = () => this.update();\r\n    this.contained = !isUnd(container);\r\n    this.manual = false;\r\n    this.grabbed = false;\r\n    this.dragged = false;\r\n    this.updated = false;\r\n    this.released = false;\r\n    this.canScroll = false;\r\n    this.enabled = false;\r\n    this.initialized = false;\r\n    this.activeProp = this.disabled[1] ? xProp : yProp;\r\n    this.animate.animations[this.activeProp].onRender = () => {\r\n      const hasUpdated = this.updated;\r\n      const hasMoved = this.grabbed && hasUpdated;\r\n      const hasReleased = !hasMoved && this.released;\r\n      const x = this.x;\r\n      const y = this.y;\r\n      const dx = x - this.coords[2];\r\n      const dy = y - this.coords[3];\r\n      this.deltaX = dx;\r\n      this.deltaY = dy;\r\n      this.coords[2] = x;\r\n      this.coords[3] = y;\r\n      // Check if dx or dy are not 0 to check if the draggable has actually moved https://github.com/juliangarnier/anime/issues/1032\r\n      if (hasUpdated && (dx || dy)) {\r\n        this.onUpdate(this);\r\n      }\r\n      if (!hasReleased) {\r\n        this.updated = false;\r\n      } else {\r\n        this.computeVelocity(dx, dy);\r\n        this.angle = atan2(dy, dx);\r\n      }\r\n    };\r\n    this.animate.animations[this.activeProp].onComplete = () => {\r\n      if ((!this.grabbed && this.released)) {\r\n        // Set eleased to false before calling onSettle to avoid recursion\r\n        this.released = false;\r\n      }\r\n      if (!this.manual) {\r\n        this.deltaX = 0;\r\n        this.deltaY = 0;\r\n        this.velocity = 0;\r\n        this.velocityStack[0] = 0;\r\n        this.velocityStack[1] = 0;\r\n        this.velocityStack[2] = 0;\r\n        this.velocityStackIndex = 0;\r\n        this.onSettle(this);\r\n      }\r\n    };\r\n    this.resizeTicker = new Timer({\r\n      autoplay: false,\r\n      duration: 150 * globals.timeScale,\r\n      onComplete: () => {\r\n        this.onResize(this);\r\n        this.refresh();\r\n        this.onAfterResize(this);\r\n      },\r\n    }).init();\r\n    this.parameters = parameters;\r\n    this.resizeObserver = new ResizeObserver(() => {\r\n      if (this.initialized) {\r\n        this.resizeTicker.restart();\r\n      } else {\r\n        this.initialized = true;\r\n      }\r\n    });\r\n    this.enable();\r\n    this.refresh();\r\n    this.resizeObserver.observe(this.$container);\r\n    if (!isObj(target)) this.resizeObserver.observe(this.$target);\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} dx\r\n   * @param  {Number} dy\r\n   * @return {Number}\r\n   */\r\n  computeVelocity(dx, dy) {\r\n    const prevTime = this.velocityTime;\r\n    const curTime = now();\r\n    const elapsed = curTime - prevTime;\r\n    if (elapsed < 17) return this.velocity;\r\n    this.velocityTime = curTime;\r\n    const velocityStack = this.velocityStack;\r\n    const vMul = this.velocityMultiplier;\r\n    const minV = this.minVelocity;\r\n    const maxV = this.maxVelocity;\r\n    const vi = this.velocityStackIndex;\r\n    velocityStack[vi] = round(clamp((sqrt(dx * dx + dy * dy) / elapsed) * vMul, minV, maxV), 5);\r\n    const velocity = max(velocityStack[0], velocityStack[1], velocityStack[2]);\r\n    this.velocity = velocity;\r\n    this.velocityStackIndex = (vi + 1) % 3;\r\n    return velocity;\r\n  }\r\n\r\n  /**\r\n   * @param {Number}  x\r\n   * @param {Boolean} [muteUpdateCallback]\r\n   * @return {this}\r\n   */\r\n  setX(x, muteUpdateCallback = false) {\r\n    if (this.disabled[0]) return;\r\n    const v = round(x, 5);\r\n    this.overshootXTicker.pause();\r\n    this.manual = true;\r\n    this.updated = !muteUpdateCallback;\r\n    this.destX = v;\r\n    this.snapped[0] = snap(v, this.snapX);\r\n    this.animate[this.xProp](v, 0);\r\n    this.manual = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {Number}  y\r\n   * @param {Boolean} [muteUpdateCallback]\r\n   * @return {this}\r\n   */\r\n  setY(y, muteUpdateCallback = false) {\r\n    if (this.disabled[1]) return;\r\n    const v = round(y, 5);\r\n    this.overshootYTicker.pause();\r\n    this.manual = true;\r\n    this.updated = !muteUpdateCallback;\r\n    this.destY = v;\r\n    this.snapped[1] = snap(v, this.snapY);\r\n    this.animate[this.yProp](v, 0);\r\n    this.manual = false;\r\n    return this;\r\n  }\r\n\r\n  get x() {\r\n    return round(/** @type {Number} */(this.animate[this.xProp]()), globals.precision);\r\n  }\r\n\r\n  set x(x) {\r\n    this.setX(x, false);\r\n  }\r\n\r\n  get y() {\r\n    return round(/** @type {Number} */(this.animate[this.yProp]()), globals.precision);\r\n  }\r\n\r\n  set y(y) {\r\n    this.setY(y, false);\r\n  }\r\n\r\n  get progressX() {\r\n    return mapRange(this.x, this.containerBounds[3], this.containerBounds[1], 0, 1);\r\n  }\r\n\r\n  set progressX(x) {\r\n    this.setX(mapRange(x, 0, 1, this.containerBounds[3], this.containerBounds[1]), false);\r\n  }\r\n\r\n  get progressY() {\r\n    return mapRange(this.y, this.containerBounds[0], this.containerBounds[2], 0, 1);\r\n  }\r\n\r\n  set progressY(y) {\r\n    this.setY(mapRange(y, 0, 1, this.containerBounds[0], this.containerBounds[2]), false);\r\n  }\r\n\r\n  updateScrollCoords() {\r\n    const sx = round(this.useWin ? win.scrollX : this.$container.scrollLeft, 0);\r\n    const sy = round(this.useWin ? win.scrollY : this.$container.scrollTop, 0);\r\n    const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\r\n    const threshold = this.scrollThreshold;\r\n    this.scroll.x = sx;\r\n    this.scroll.y = sy;\r\n    this.scrollBounds[0] = sy - this.targetBounds[0] + cpt - threshold;\r\n    this.scrollBounds[1] = sx - this.targetBounds[1] - cpr + threshold;\r\n    this.scrollBounds[2] = sy - this.targetBounds[2] - cpb + threshold;\r\n    this.scrollBounds[3] = sx - this.targetBounds[3] + cpl - threshold;\r\n  }\r\n\r\n  updateBoundingValues() {\r\n    const $container = this.$container;\r\n    const cx = this.x;\r\n    const cy = this.y;\r\n    const cx2 = this.coords[2];\r\n    const cy2 =  this.coords[3];\r\n    // Prevents interfering with the scroll area in cases the target is outside of the container\r\n    // Make sure the temp coords are also adjuset to prevents wrong delta calculation on updates\r\n    this.coords[2] = 0;\r\n    this.coords[3] = 0;\r\n    this.setX(0, true);\r\n    this.setY(0, true);\r\n    this.transforms.remove();\r\n    const iw = this.window[0] = win.innerWidth;\r\n    const ih = this.window[1] = win.innerHeight;\r\n    const uw = this.useWin;\r\n    const sw = $container.scrollWidth;\r\n    const sh = $container.scrollHeight;\r\n    const fx = this.fixed;\r\n    const transformContainerRect = $container.getBoundingClientRect();\r\n    const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\r\n    this.dragArea[0] = uw ? 0 : transformContainerRect.left;\r\n    this.dragArea[1] = uw ? 0 : transformContainerRect.top;\r\n    this.scrollView[0] = uw ? clamp(sw, iw, sw) : sw;\r\n    this.scrollView[1] = uw ? clamp(sh, ih, sh) : sh;\r\n    this.updateScrollCoords();\r\n    const { width, height, left, top, right, bottom } = $container.getBoundingClientRect();\r\n    this.dragArea[2] = round(uw ? clamp(width, iw, iw) : width, 0);\r\n    this.dragArea[3] = round(uw ? clamp(height, ih, ih) : height, 0);\r\n    const containerOverflow = getTargetValue($container, 'overflow');\r\n    const visibleOverflow = containerOverflow === 'visible';\r\n    const hiddenOverflow = containerOverflow === 'hidden';\r\n    this.canScroll = fx ? false :\r\n      this.contained &&\r\n      (($container === doc.body && visibleOverflow) || (!hiddenOverflow && !visibleOverflow)) &&\r\n      (sw > this.dragArea[2] + cpl - cpr || sh > this.dragArea[3] + cpt - cpb) &&\r\n      (!this.containerArray || (this.containerArray && !isArr(this.containerArray)));\r\n    if (this.contained) {\r\n      const sx = this.scroll.x;\r\n      const sy = this.scroll.y;\r\n      const canScroll = this.canScroll;\r\n      const targetRect = this.$target.getBoundingClientRect();\r\n      const hiddenLeft = canScroll ? uw ? 0 : $container.scrollLeft : 0;\r\n      const hiddenTop = canScroll ? uw ? 0 : $container.scrollTop : 0;\r\n      const hiddenRight = canScroll ? this.scrollView[0] - hiddenLeft - width : 0;\r\n      const hiddenBottom = canScroll ? this.scrollView[1] - hiddenTop - height : 0;\r\n      this.targetBounds[0] = round((targetRect.top + sy) - (uw ? 0 : top), 0);\r\n      this.targetBounds[1] = round((targetRect.right + sx) - (uw ? iw : right), 0);\r\n      this.targetBounds[2] = round((targetRect.bottom + sy) - (uw ? ih : bottom), 0);\r\n      this.targetBounds[3] = round((targetRect.left + sx) - (uw ? 0 : left), 0);\r\n      if (this.containerArray) {\r\n        this.containerBounds[0] = this.containerArray[0] + cpt;\r\n        this.containerBounds[1] = this.containerArray[1] - cpr;\r\n        this.containerBounds[2] = this.containerArray[2] - cpb;\r\n        this.containerBounds[3] = this.containerArray[3] + cpl;\r\n      } else {\r\n        this.containerBounds[0] = -round(targetRect.top - (fx ? clamp(top, 0, ih) : top) + hiddenTop - cpt, 0);\r\n        this.containerBounds[1] = -round(targetRect.right - (fx ? clamp(right, 0, iw) : right) - hiddenRight + cpr, 0);\r\n        this.containerBounds[2] = -round(targetRect.bottom - (fx ? clamp(bottom, 0, ih) : bottom) - hiddenBottom + cpb, 0);\r\n        this.containerBounds[3] = -round(targetRect.left - (fx ? clamp(left, 0, iw) : left) + hiddenLeft - cpl, 0);\r\n      }\r\n    }\r\n    this.transforms.revert();\r\n    // Restore coordinates\r\n    this.coords[2] = cx2;\r\n    this.coords[3] = cy2;\r\n    this.setX(cx, true);\r\n    this.setY(cy, true);\r\n  }\r\n\r\n  /**\r\n   * Returns 0 if not OB, 1 if x is OB, 2 if y is OB, 3 if both x and y are OB\r\n   *\r\n   * @param  {Array} bounds\r\n   * @param  {Number} x\r\n   * @param  {Number} y\r\n   * @return {Number}\r\n   */\r\n  isOutOfBounds(bounds, x, y) {\r\n    if (!this.contained) return 0;\r\n    const [ bt, br, bb, bl ] = bounds;\r\n    const [ dx, dy ] = this.disabled;\r\n    const obx = !dx && x < bl || !dx && x > br;\r\n    const oby = !dy && y < bt || !dy && y > bb;\r\n    return obx && !oby ? 1 : !obx && oby ? 2 : obx && oby ? 3 : 0;\r\n  }\r\n\r\n  refresh() {\r\n    const params = this.parameters;\r\n    const paramX = params.x;\r\n    const paramY = params.y;\r\n    const container = parseDraggableFunctionParameter(params.container, this);\r\n    const cp = parseDraggableFunctionParameter(params.containerPadding, this) || 0;\r\n    const containerPadding = /** @type {[Number, Number, Number, Number]} */(isArr(cp) ? cp : [cp, cp, cp, cp]);\r\n    const cx = this.x;\r\n    const cy = this.y;\r\n    const parsedCursorStyles = parseDraggableFunctionParameter(params.cursor, this);\r\n    const cursorStyles = { onHover: 'grab', onGrab: 'grabbing' };\r\n    if (parsedCursorStyles) {\r\n      const { onHover, onGrab } = /** @type {DraggableCursorParams} */(parsedCursorStyles);\r\n      if (onHover) cursorStyles.onHover = onHover;\r\n      if (onGrab) cursorStyles.onGrab = onGrab;\r\n    }\r\n    this.containerArray = isArr(container) ? container : null;\r\n    this.$container = /** @type {HTMLElement} */(container && !this.containerArray ? parseTargets(/** @type {DOMTarget} */(container))[0] : doc.body);\r\n    this.useWin = this.$container === doc.body;\r\n    /** @type {Window | HTMLElement} */\r\n    this.$scrollContainer = this.useWin ? win : this.$container;\r\n    this.isFinePointer = matchMedia('(pointer:fine)').matches;\r\n    this.containerPadding = setValue(containerPadding, [0, 0, 0, 0]);\r\n    this.containerFriction = clamp(setValue(parseDraggableFunctionParameter(params.containerFriction, this), .8), 0, 1);\r\n    this.releaseContainerFriction = clamp(setValue(parseDraggableFunctionParameter(params.releaseContainerFriction, this), this.containerFriction), 0, 1);\r\n    this.snapX = parseDraggableFunctionParameter(isObj(paramX) && !isUnd(paramX.snap) ? paramX.snap : params.snap, this);\r\n    this.snapY = parseDraggableFunctionParameter(isObj(paramY) && !isUnd(paramY.snap) ? paramY.snap : params.snap, this);\r\n    this.scrollSpeed = setValue(parseDraggableFunctionParameter(params.scrollSpeed, this), 1.5);\r\n    this.scrollThreshold = setValue(parseDraggableFunctionParameter(params.scrollThreshold, this), 20);\r\n    this.dragSpeed = setValue(parseDraggableFunctionParameter(params.dragSpeed, this), 1);\r\n    this.minVelocity = setValue(parseDraggableFunctionParameter(params.minVelocity, this), 0);\r\n    this.maxVelocity = setValue(parseDraggableFunctionParameter(params.maxVelocity, this), 50);\r\n    this.velocityMultiplier = setValue(parseDraggableFunctionParameter(params.velocityMultiplier, this), 1);\r\n    this.cursor = parsedCursorStyles === false ? false : cursorStyles;\r\n    this.updateBoundingValues();\r\n\r\n    // const ob = this.isOutOfBounds(this.containerBounds, this.x, this.y);\r\n    // if (ob === 1 || ob === 3) this.progressX = px;\r\n    // if (ob === 2 || ob === 3) this.progressY = py;\r\n\r\n    // if (this.initialized && this.contained) {\r\n    //   if (this.progressX !== px) this.progressX = px;\r\n    //   if (this.progressY !== py) this.progressY = py;\r\n    // }\r\n\r\n    const [ bt, br, bb, bl ] = this.containerBounds;\r\n    this.setX(clamp(cx, bl, br), true);\r\n    this.setY(clamp(cy, bt, bb), true);\r\n  }\r\n\r\n  update() {\r\n    this.updateScrollCoords();\r\n    if (this.canScroll) {\r\n      const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\r\n      const [ sw, sh ] = this.scrollView;\r\n      const daw = this.dragArea[2];\r\n      const dah = this.dragArea[3];\r\n      const csx = this.scroll.x;\r\n      const csy = this.scroll.y;\r\n      const nsw = this.$container.scrollWidth;\r\n      const nsh = this.$container.scrollHeight;\r\n      const csw = this.useWin ? clamp(nsw, this.window[0], nsw) : nsw;\r\n      const csh = this.useWin ? clamp(nsh, this.window[1], nsh) : nsh;\r\n      const swd = sw - csw;\r\n      const shd = sh - csh;\r\n      // Handle cases where the scrollarea dimensions changes during drag\r\n      if (this.dragged && swd > 0) {\r\n        this.coords[0] -= swd;\r\n        this.scrollView[0] = csw;\r\n      }\r\n      if (this.dragged && shd > 0) {\r\n        this.coords[1] -= shd;\r\n        this.scrollView[1] = csh;\r\n      }\r\n      // Handle autoscroll when target is at the edges of the scroll bounds\r\n      const s = this.scrollSpeed * 10;\r\n      const threshold = this.scrollThreshold;\r\n      const [ x, y ] = this.coords;\r\n      const [ st, sr, sb, sl ] = this.scrollBounds;\r\n      const t = round(clamp((y - st + cpt) / threshold, -1, 0) * s, 0);\r\n      const r = round(clamp((x - sr - cpr) / threshold, 0, 1) * s, 0);\r\n      const b = round(clamp((y - sb - cpb) / threshold, 0, 1) * s, 0);\r\n      const l = round(clamp((x - sl + cpl) / threshold, -1, 0) * s, 0);\r\n      if (t || b || l || r) {\r\n        const [nx, ny] = this.disabled;\r\n        let scrollX = csx;\r\n        let scrollY = csy;\r\n        if (!nx) {\r\n          scrollX = round(clamp(csx + (l || r), 0, sw - daw), 0);\r\n          this.coords[0] -= csx - scrollX;\r\n        }\r\n        if (!ny) {\r\n          scrollY = round(clamp(csy + (t || b), 0, sh - dah), 0);\r\n          this.coords[1] -= csy - scrollY;\r\n        }\r\n        // Note: Safari mobile requires to use different scroll methods depending if using the window or not\r\n        if (this.useWin) {\r\n          this.$scrollContainer.scrollBy(-(csx - scrollX), -(csy - scrollY));\r\n        } else {\r\n          this.$scrollContainer.scrollTo(scrollX, scrollY);\r\n        }\r\n      }\r\n    }\r\n    const [ ct, cr, cb, cl ] = this.containerBounds;\r\n    const [ px1, py1, px2, py2, px3, py3 ] = this.pointer;\r\n    this.coords[0] += (px1 - px3) * this.dragSpeed;\r\n    this.coords[1] += (py1 - py3) * this.dragSpeed;\r\n    this.pointer[4] = px1;\r\n    this.pointer[5] = py1;\r\n    const [ cx, cy ] = this.coords;\r\n    const [ sx, sy ] = this.snapped;\r\n    const cf = (1 - this.containerFriction) * this.dragSpeed;\r\n    this.setX(cx > cr ? cr + (cx - cr) * cf : cx < cl ? cl + (cx - cl) * cf : cx, false);\r\n    this.setY(cy > cb ? cb + (cy - cb) * cf : cy < ct ? ct + (cy - ct) * cf : cy, false);\r\n    this.computeVelocity(px1 - px3, py1 - py3);\r\n    this.angle = atan2(py1 - py2, px1 - px2);\r\n    const [ nsx, nsy ] = this.snapped;\r\n    if (nsx !== sx && this.snapX || nsy !== sy && this.snapY) {\r\n      this.onSnap(this);\r\n    }\r\n  }\r\n\r\n  stop() {\r\n    this.updateTicker.pause();\r\n    this.overshootXTicker.pause();\r\n    this.overshootYTicker.pause();\r\n    // Pauses the in bounds onRelease animations\r\n    for (let prop in this.animate.animations) this.animate.animations[prop].pause();\r\n    remove(this, null, 'x');\r\n    remove(this, null, 'y');\r\n    remove(this, null, 'progressX');\r\n    remove(this, null, 'progressY');\r\n    remove(this.scroll); // Removes any active animations on the container scroll\r\n    remove(this.overshootCoords); // Removes active overshoot animations\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {Number} [duration]\r\n   * @param {Number} [gap]\r\n   * @param {EasingParam} [ease]\r\n   * @return {this}\r\n   */\r\n  scrollInView(duration, gap = 0, ease = eases.inOutQuad) {\r\n    this.updateScrollCoords();\r\n    const x = this.destX;\r\n    const y = this.destY;\r\n    const scroll = this.scroll;\r\n    const scrollBounds = this.scrollBounds;\r\n    const canScroll = this.canScroll;\r\n    if (!this.containerArray && this.isOutOfBounds(scrollBounds, x, y)) {\r\n      const [ st, sr, sb, sl ] = scrollBounds;\r\n      const t = round(clamp(y - st, -1e12, 0), 0);\r\n      const r = round(clamp(x - sr, 0, maxValue), 0);\r\n      const b = round(clamp(y - sb, 0, maxValue), 0);\r\n      const l = round(clamp(x - sl, -1e12, 0), 0);\r\n      new JSAnimation(scroll, {\r\n        x: round(scroll.x + (l ? l - gap : r ? r + gap : 0), 0),\r\n        y: round(scroll.y + (t ? t - gap : b ? b + gap : 0), 0),\r\n        duration: isUnd(duration) ? 350 * globals.timeScale : duration,\r\n        ease,\r\n        onUpdate: () => {\r\n          this.canScroll = false;\r\n          this.$scrollContainer.scrollTo(scroll.x, scroll.y);\r\n        }\r\n      }).init().then(() => {\r\n        this.canScroll = canScroll;\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  handleHover() {\r\n    if (this.isFinePointer && this.cursor && !this.cursorStyles) {\r\n      this.cursorStyles = setTargetValues(this.$trigger, {\r\n        cursor: /** @type {DraggableCursorParams} */(this.cursor).onHover\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param  {Number} [duration]\r\n   * @param  {Number} [gap]\r\n   * @param  {EasingParam} [ease]\r\n   * @return {this}\r\n   */\r\n  animateInView(duration, gap = 0, ease = eases.inOutQuad) {\r\n    this.stop();\r\n    this.updateBoundingValues();\r\n    const x = this.x;\r\n    const y = this.y;\r\n    const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\r\n    const bt = this.scroll.y - this.targetBounds[0] + cpt + gap;\r\n    const br = this.scroll.x - this.targetBounds[1] - cpr - gap;\r\n    const bb = this.scroll.y - this.targetBounds[2] - cpb - gap;\r\n    const bl = this.scroll.x - this.targetBounds[3] + cpl + gap;\r\n    const ob = this.isOutOfBounds([bt, br, bb, bl], x, y);\r\n    if (ob) {\r\n      const [ disabledX, disabledY ] = this.disabled;\r\n      const destX = clamp(snap(x, this.snapX), bl, br);\r\n      const destY = clamp(snap(y, this.snapY), bt, bb);\r\n      const dur = isUnd(duration) ? 350 * globals.timeScale : duration;\r\n      if (!disabledX && (ob === 1 || ob === 3)) this.animate[this.xProp](destX, dur, ease);\r\n      if (!disabledY && (ob === 2 || ob === 3)) this.animate[this.yProp](destY, dur, ease);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {MouseEvent|TouchEvent} e\r\n   */\r\n  handleDown(e) {\r\n    const $eTarget = /** @type {HTMLElement} */(e.target);\r\n    if (this.grabbed || /** @type {HTMLInputElement}  */($eTarget).type === 'range') return;\r\n\r\n    e.stopPropagation();\r\n\r\n    this.grabbed = true;\r\n    this.released = false;\r\n    this.stop();\r\n    this.updateBoundingValues();\r\n    const touches = /** @type {TouchEvent} */(e).changedTouches;\r\n    const eventX = touches ? touches[0].clientX : /** @type {MouseEvent} */(e).clientX;\r\n    const eventY = touches ? touches[0].clientY : /** @type {MouseEvent} */(e).clientY;\r\n    const { x, y } = this.transforms.normalizePoint(eventX, eventY);\r\n    const [ ct, cr, cb, cl ] = this.containerBounds;\r\n    const cf = (1 - this.containerFriction) * this.dragSpeed;\r\n    const cx = this.x;\r\n    const cy = this.y;\r\n    this.coords[0] = this.coords[2] = !cf ? cx : cx > cr ? cr + (cx - cr) / cf : cx < cl ? cl + (cx - cl) / cf : cx;\r\n    this.coords[1] = this.coords[3] = !cf ? cy : cy > cb ? cb + (cy - cb) / cf : cy < ct ? ct + (cy - ct) / cf : cy;\r\n    this.pointer[0] = x;\r\n    this.pointer[1] = y;\r\n    this.pointer[2] = x;\r\n    this.pointer[3] = y;\r\n    this.pointer[4] = x;\r\n    this.pointer[5] = y;\r\n    this.pointer[6] = x;\r\n    this.pointer[7] = y;\r\n    this.deltaX = 0;\r\n    this.deltaY = 0;\r\n    this.velocity = 0;\r\n    this.velocityStack[0] = 0;\r\n    this.velocityStack[1] = 0;\r\n    this.velocityStack[2] = 0;\r\n    this.velocityStackIndex = 0;\r\n    this.angle = 0;\r\n    if (this.targetStyles) {\r\n      this.targetStyles.revert();\r\n      this.targetStyles = null;\r\n    }\r\n    const z = /** @type {Number} */(getTargetValue(this.$target, 'zIndex', false));\r\n    zIndex = (z > zIndex ? z : zIndex) + 1;\r\n    this.targetStyles = setTargetValues(this.$target, { zIndex });\r\n    if (this.triggerStyles) {\r\n      this.triggerStyles.revert();\r\n      this.triggerStyles = null;\r\n    }\r\n    if (this.cursorStyles) {\r\n      this.cursorStyles.revert();\r\n      this.cursorStyles = null;\r\n    }\r\n    if (this.isFinePointer && this.cursor) {\r\n      this.bodyStyles = setTargetValues(doc.body, {\r\n        cursor: /** @type {DraggableCursorParams} */(this.cursor).onGrab\r\n      });\r\n    }\r\n    this.scrollInView(100, 0, eases.out(3));\r\n    this.onGrab(this);\r\n\r\n    doc.addEventListener('touchmove', this);\r\n    doc.addEventListener('touchend', this);\r\n    doc.addEventListener('touchcancel', this);\r\n    doc.addEventListener('mousemove', this);\r\n    doc.addEventListener('mouseup', this);\r\n    doc.addEventListener('selectstart', this);\r\n  }\r\n\r\n  /**\r\n   * @param {MouseEvent|TouchEvent} e\r\n   */\r\n  handleMove(e) {\r\n    if (!this.grabbed) return;\r\n    const touches = /** @type {TouchEvent} */(e).changedTouches;\r\n    const eventX = touches ? touches[0].clientX : /** @type {MouseEvent} */(e).clientX;\r\n    const eventY = touches ? touches[0].clientY : /** @type {MouseEvent} */(e).clientY;\r\n    const { x, y } = this.transforms.normalizePoint(eventX, eventY);\r\n    const movedX = x - this.pointer[6];\r\n    const movedY = y - this.pointer[7];\r\n\r\n    let $parent = /** @type {HTMLElement} */(e.target);\r\n    let isAtTop = false;\r\n    let isAtBottom = false;\r\n    let canTouchScroll = false;\r\n\r\n    while (touches && $parent && $parent !== this.$trigger) {\r\n      const overflowY = getTargetValue($parent, 'overflow-y');\r\n      if (overflowY !== 'hidden' && overflowY !== 'visible') {\r\n        const { scrollTop, scrollHeight, clientHeight } = $parent;\r\n        if (scrollHeight > clientHeight) {\r\n          canTouchScroll = true;\r\n          isAtTop = scrollTop <= 3;\r\n          isAtBottom = scrollTop >= (scrollHeight - clientHeight) - 3;\r\n          break;\r\n        }\r\n      }\r\n      $parent = /** @type {HTMLElement} */($parent.parentNode);\r\n    }\r\n\r\n    if (canTouchScroll && ((!isAtTop && !isAtBottom) || (isAtTop && movedY < 0) || (isAtBottom && movedY > 0))) {\r\n\r\n      this.pointer[0] = x;\r\n      this.pointer[1] = y;\r\n      this.pointer[2] = x;\r\n      this.pointer[3] = y;\r\n      this.pointer[4] = x;\r\n      this.pointer[5] = y;\r\n      this.pointer[6] = x;\r\n      this.pointer[7] = y;\r\n\r\n    } else {\r\n\r\n      preventDefault(e);\r\n\r\n      // Needed to prevents click on handleUp\r\n      if (!this.triggerStyles) this.triggerStyles = setTargetValues(this.$trigger, { pointerEvents: 'none' });\r\n      // Needed to prevent page scroll while dragging on touch devvice\r\n      this.$trigger.addEventListener('touchstart', preventDefault, { passive: false });\r\n      this.$trigger.addEventListener('touchmove', preventDefault, { passive: false });\r\n      this.$trigger.addEventListener('touchend', preventDefault);\r\n\r\n\r\n      if ((!this.disabled[0] && abs(movedX) > 3) || (!this.disabled[1] && abs(movedY) > 3)) {\r\n\r\n        this.updateTicker.resume();\r\n        this.pointer[2] = this.pointer[0];\r\n        this.pointer[3] = this.pointer[1];\r\n        this.pointer[0] = x;\r\n        this.pointer[1] = y;\r\n        this.dragged = true;\r\n        this.released = false;\r\n        this.onDrag(this);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleUp() {\r\n\r\n    if (!this.grabbed) return;\r\n\r\n    this.updateTicker.pause();\r\n\r\n    if (this.triggerStyles) {\r\n      this.triggerStyles.revert();\r\n      this.triggerStyles = null;\r\n    }\r\n\r\n    if (this.bodyStyles) {\r\n      this.bodyStyles.revert();\r\n      this.bodyStyles = null;\r\n    }\r\n\r\n    const [ disabledX, disabledY ] = this.disabled;\r\n    const [ px1, py1, px2, py2, px3, py3 ] = this.pointer;\r\n    const [ ct, cr, cb, cl ] = this.containerBounds;\r\n    const [ sx, sy ] = this.snapped;\r\n    const springX = this.releaseXSpring;\r\n    const springY = this.releaseYSpring;\r\n    const releaseEase = this.releaseEase;\r\n    const hasReleaseSpring = this.hasReleaseSpring;\r\n    const overshootCoords = this.overshootCoords;\r\n    const cx = this.x;\r\n    const cy = this.y;\r\n    const pv = this.computeVelocity(px1 - px3, py1 - py3);\r\n    const pa = this.angle = atan2(py1 - py2, px1 - px2);\r\n    const ds = pv * 150;\r\n    const cf = (1 - this.releaseContainerFriction) * this.dragSpeed;\r\n    const nx = cx + (cos(pa) * ds);\r\n    const ny = cy + (sin(pa) * ds);\r\n    const bx = nx > cr ? cr + (nx - cr) * cf : nx < cl ? cl + (nx - cl) * cf : nx;\r\n    const by = ny > cb ? cb + (ny - cb) * cf : ny < ct ? ct + (ny - ct) * cf : ny;\r\n    const dx = this.destX = clamp(round(snap(bx, this.snapX), 5), cl, cr);\r\n    const dy = this.destY = clamp(round(snap(by, this.snapY), 5), ct, cb);\r\n    const ob = this.isOutOfBounds(this.containerBounds, nx, ny);\r\n\r\n    let durationX = 0;\r\n    let durationY = 0;\r\n    let easeX = releaseEase;\r\n    let easeY = releaseEase;\r\n    let longestReleaseDuration = 0;\r\n\r\n    overshootCoords.x = cx;\r\n    overshootCoords.y = cy;\r\n\r\n    if (!disabledX) {\r\n      const directionX = dx === cr ? cx > cr ? -1 : 1 : cx < cl ? -1 : 1;\r\n      const distanceX = round(cx - dx, 0);\r\n      springX.velocity = disabledY && hasReleaseSpring ? distanceX ? (ds * directionX) / abs(distanceX) : 0 : pv;\r\n      const { ease, duration, restDuration } = springX;\r\n      durationX = cx === dx ? 0 : hasReleaseSpring ? duration : duration - (restDuration * globals.timeScale);\r\n      if (hasReleaseSpring) easeX = ease;\r\n      if (durationX > longestReleaseDuration) longestReleaseDuration = durationX;\r\n    }\r\n\r\n    if (!disabledY) {\r\n      const directionY = dy === cb ? cy > cb ? -1 : 1 : cy < ct ? -1 : 1;\r\n      const distanceY = round(cy - dy, 0);\r\n      springY.velocity = disabledX && hasReleaseSpring ? distanceY ? (ds * directionY) / abs(distanceY) : 0 : pv;\r\n      const { ease, duration, restDuration } = springY;\r\n      durationY = cy === dy ? 0 : hasReleaseSpring ? duration : duration - (restDuration * globals.timeScale);\r\n      if (hasReleaseSpring) easeY = ease;\r\n      if (durationY > longestReleaseDuration) longestReleaseDuration = durationY;\r\n    }\r\n\r\n    if (!hasReleaseSpring && ob && cf && (durationX || durationY)) {\r\n\r\n        const composition = compositionTypes.blend;\r\n\r\n        new JSAnimation(overshootCoords, {\r\n          x: { to: bx, duration: durationX * .65 },\r\n          y: { to: by, duration: durationY * .65 },\r\n          ease: releaseEase,\r\n          composition,\r\n        }).init();\r\n\r\n        new JSAnimation(overshootCoords, {\r\n          x: { to: dx, duration: durationX },\r\n          y: { to: dy, duration: durationY },\r\n          ease: releaseEase,\r\n          composition,\r\n        }).init();\r\n\r\n        this.overshootXTicker.stretch(durationX).restart();\r\n        this.overshootYTicker.stretch(durationY).restart();\r\n\r\n    } else {\r\n\r\n      if (!disabledX) this.animate[this.xProp](dx, durationX, easeX);\r\n      if (!disabledY) this.animate[this.yProp](dy, durationY, easeY);\r\n\r\n    }\r\n\r\n    this.scrollInView(longestReleaseDuration, this.scrollThreshold, releaseEase);\r\n\r\n    let hasSnapped = false;\r\n\r\n    if (dx !== sx) {\r\n      this.snapped[0] = dx;\r\n      if (this.snapX) hasSnapped = true;\r\n    }\r\n\r\n    if (dy !== sy && this.snapY) {\r\n      this.snapped[1] = dy;\r\n      if (this.snapY) hasSnapped = true;\r\n    }\r\n\r\n    if (hasSnapped) this.onSnap(this);\r\n\r\n    this.grabbed = false;\r\n    this.dragged = false;\r\n    this.updated = true;\r\n    this.released = true;\r\n\r\n    // It's important to trigger the callback after the release animations to be able to cancel them\r\n    this.onRelease(this);\r\n\r\n    this.$trigger.removeEventListener('touchstart', preventDefault);\r\n    this.$trigger.removeEventListener('touchmove', preventDefault);\r\n    this.$trigger.removeEventListener('touchend', preventDefault);\r\n\r\n    doc.removeEventListener('touchmove', this);\r\n    doc.removeEventListener('touchend', this);\r\n    doc.removeEventListener('touchcancel', this);\r\n    doc.removeEventListener('mousemove', this);\r\n    doc.removeEventListener('mouseup', this);\r\n    doc.removeEventListener('selectstart', this);\r\n  }\r\n\r\n  reset() {\r\n    this.stop();\r\n    this.resizeTicker.pause();\r\n    this.grabbed = false;\r\n    this.dragged = false;\r\n    this.updated = false;\r\n    this.released = false;\r\n    this.canScroll = false;\r\n    this.setX(0, true);\r\n    this.setY(0, true);\r\n    this.coords[0] = 0;\r\n    this.coords[1] = 0;\r\n    this.pointer[0] = 0;\r\n    this.pointer[1] = 0;\r\n    this.pointer[2] = 0;\r\n    this.pointer[3] = 0;\r\n    this.pointer[4] = 0;\r\n    this.pointer[5] = 0;\r\n    this.pointer[6] = 0;\r\n    this.pointer[7] = 0;\r\n    this.velocity = 0;\r\n    this.velocityStack[0] = 0;\r\n    this.velocityStack[1] = 0;\r\n    this.velocityStack[2] = 0;\r\n    this.velocityStackIndex = 0;\r\n    this.angle = 0;\r\n    return this;\r\n  }\r\n\r\n  enable() {\r\n    if (!this.enabled) {\r\n      this.enabled = true;\r\n      this.$target.classList.remove('is-disabled');\r\n      this.touchActionStyles = setTargetValues(this.$trigger, {\r\n        touchAction: this.disabled[0] ? 'pan-x' : this.disabled[1] ? 'pan-y' : 'none'\r\n      });\r\n      this.$trigger.addEventListener('touchstart', this, { passive: true });\r\n      this.$trigger.addEventListener('mousedown', this, { passive: true });\r\n      this.$trigger.addEventListener('mouseenter', this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  disable() {\r\n    this.enabled = false;\r\n    this.grabbed = false;\r\n    this.dragged = false;\r\n    this.updated = false;\r\n    this.released = false;\r\n    this.canScroll = false;\r\n    this.touchActionStyles.revert();\r\n    if (this.cursorStyles) {\r\n      this.cursorStyles.revert();\r\n      this.cursorStyles = null;\r\n    }\r\n    if (this.triggerStyles) {\r\n      this.triggerStyles.revert();\r\n      this.triggerStyles = null;\r\n    }\r\n    if (this.bodyStyles) {\r\n      this.bodyStyles.revert();\r\n      this.bodyStyles = null;\r\n    }\r\n    if (this.targetStyles) {\r\n      this.targetStyles.revert();\r\n      this.targetStyles = null;\r\n    }\r\n    this.$target.classList.add('is-disabled');\r\n    this.$trigger.removeEventListener('touchstart', this);\r\n    this.$trigger.removeEventListener('mousedown', this);\r\n    this.$trigger.removeEventListener('mouseenter', this);\r\n    doc.removeEventListener('touchmove', this);\r\n    doc.removeEventListener('touchend', this);\r\n    doc.removeEventListener('touchcancel', this);\r\n    doc.removeEventListener('mousemove', this);\r\n    doc.removeEventListener('mouseup', this);\r\n    doc.removeEventListener('selectstart', this);\r\n    return this;\r\n  }\r\n\r\n  revert() {\r\n    this.reset();\r\n    this.disable();\r\n    this.$target.classList.remove('is-disabled');\r\n    this.updateTicker.revert();\r\n    this.overshootXTicker.revert();\r\n    this.overshootYTicker.revert();\r\n    this.resizeTicker.revert();\r\n    this.animate.revert();\r\n    this.resizeObserver.disconnect();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {Event} e\r\n   */\r\n  handleEvent(e) {\r\n    switch (e.type) {\r\n      case 'mousedown':\r\n        this.handleDown(/** @type {MouseEvent} */(e));\r\n        break;\r\n      case 'touchstart':\r\n        this.handleDown(/** @type {TouchEvent} */(e));\r\n        break;\r\n      case 'mousemove':\r\n        this.handleMove(/** @type {MouseEvent} */(e));\r\n        break;\r\n      case 'touchmove':\r\n        this.handleMove(/** @type {TouchEvent} */(e));\r\n        break;\r\n      case 'mouseup':\r\n        this.handleUp();\r\n        break;\r\n      case 'touchend':\r\n        this.handleUp();\r\n        break;\r\n      case 'touchcancel':\r\n        this.handleUp();\r\n        break;\r\n      case 'mouseenter':\r\n        this.handleHover();\r\n        break;\r\n      case 'selectstart':\r\n        preventDefault(e);\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param {TargetsParam} target\r\n * @param {DraggableParams} [parameters]\r\n * @return {Draggable}\r\n */\r\nconst createDraggable = (target, parameters) => new Draggable(target, parameters);\r\n\r\n\r\n\r\n\r\nclass Scope {\r\n  /** @param {ScopeParams} [parameters] */\r\n  constructor(parameters = {}) {\r\n    if (scope.current) scope.current.register(this);\r\n    const rootParam = parameters.root;\r\n    /** @type {Document|DOMTarget} */\r\n    let root = doc;\r\n    if (rootParam) {\r\n      root = /** @type {ReactRef} */(rootParam).current ||\r\n             /** @type {AngularRef} */(rootParam).nativeElement ||\r\n             parseTargets(/** @type {DOMTargetSelector} */(rootParam))[0] ||\r\n             doc;\r\n    }\r\n    const scopeDefaults = parameters.defaults;\r\n    const globalDefault = globals.defaults;\r\n    const mediaQueries = parameters.mediaQueries;\r\n    /** @type {DefaultsParams} */\r\n    this.defaults = scopeDefaults ? mergeObjects(scopeDefaults, globalDefault) : globalDefault;\r\n    /** @type {Document|DOMTarget} */\r\n    this.root = root;\r\n    /** @type {Array<ScopeConstructorCallback>} */\r\n    this.constructors = [];\r\n    /** @type {Array<ScopeCleanupCallback>} */\r\n    this.revertConstructors = [];\r\n    /** @type {Array<Revertible>} */\r\n    this.revertibles = [];\r\n    /** @type {Array<ScopeConstructorCallback | ((scope: this) => Tickable)>} */\r\n    this.constructorsOnce = [];\r\n    /** @type {Array<ScopeCleanupCallback>} */\r\n    this.revertConstructorsOnce = [];\r\n    /** @type {Array<Revertible>} */\r\n    this.revertiblesOnce = [];\r\n    /** @type {Boolean} */\r\n    this.once = false;\r\n    /** @type {Number} */\r\n    this.onceIndex = 0;\r\n    /** @type {Record<String, ScopeMethod>} */\r\n    this.methods = {};\r\n    /** @type {Record<String, Boolean>} */\r\n    this.matches = {};\r\n    /** @type {Record<String, MediaQueryList>} */\r\n    this.mediaQueryLists = {};\r\n    /** @type {Record<String, any>} */\r\n    this.data = {};\r\n    if (mediaQueries) {\r\n      for (let mq in mediaQueries) {\r\n        const _mq = win.matchMedia(mediaQueries[mq]);\r\n        this.mediaQueryLists[mq] = _mq;\r\n        _mq.addEventListener('change', this);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Revertible} revertible\r\n   */\r\n  register(revertible) {\r\n    const store = this.once ? this.revertiblesOnce : this.revertibles;\r\n    store.push(revertible);\r\n  }\r\n\r\n  /**\r\n   * @template T\r\n   * @param {ScopedCallback<T>} cb\r\n   * @return {T}\r\n   */\r\n  execute(cb) {\r\n    let activeScope = scope.current;\r\n    let activeRoot = scope.root;\r\n    let activeDefaults = globals.defaults;\r\n    scope.current = this;\r\n    scope.root = this.root;\r\n    globals.defaults = this.defaults;\r\n    const mqs = this.mediaQueryLists;\r\n    for (let mq in mqs) this.matches[mq] = mqs[mq].matches;\r\n    const returned = cb(this);\r\n    scope.current = activeScope;\r\n    scope.root = activeRoot;\r\n    globals.defaults = activeDefaults;\r\n    return returned;\r\n  }\r\n\r\n  /**\r\n   * @return {this}\r\n   */\r\n  refresh() {\r\n    this.onceIndex = 0;\r\n    this.execute(() => {\r\n      let i = this.revertibles.length;\r\n      let y = this.revertConstructors.length;\r\n      while (i--) this.revertibles[i].revert();\r\n      while (y--) this.revertConstructors[y](this);\r\n      this.revertibles.length = 0;\r\n      this.revertConstructors.length = 0;\r\n      this.constructors.forEach((/** @type {ScopeConstructorCallback} */constructor) => {\r\n        const revertConstructor = constructor(this);\r\n        if (isFnc(revertConstructor)) {\r\n          this.revertConstructors.push(revertConstructor);\r\n        }\r\n      });\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @overload\r\n   * @param {String} a1\r\n   * @param {ScopeMethod} a2\r\n   * @return {this}\r\n   *\r\n   * @overload\r\n   * @param {ScopeConstructorCallback} a1\r\n   * @return {this}\r\n   *\r\n   * @param {String|ScopeConstructorCallback} a1\r\n   * @param {ScopeMethod} [a2]\r\n   */\r\n  add(a1, a2) {\r\n    this.once = false;\r\n    if (isFnc(a1)) {\r\n      const constructor = /** @type {ScopeConstructorCallback} */(a1);\r\n      this.constructors.push(constructor);\r\n      this.execute(() => {\r\n        const revertConstructor = constructor(this);\r\n        if (isFnc(revertConstructor)) {\r\n          this.revertConstructors.push(revertConstructor);\r\n        }\r\n      });\r\n    } else {\r\n      this.methods[/** @type {String} */(a1)] = (/** @type {any} */...args) => this.execute(() => a2(...args));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {ScopeConstructorCallback} scopeConstructorCallback\r\n   * @return {this}\r\n   */\r\n  addOnce(scopeConstructorCallback) {\r\n    this.once = true;\r\n    if (isFnc(scopeConstructorCallback)) {\r\n      const currentIndex = this.onceIndex++;\r\n      const tracked = this.constructorsOnce[currentIndex];\r\n      if (tracked) return this;\r\n      const constructor = /** @type {ScopeConstructorCallback} */(scopeConstructorCallback);\r\n      this.constructorsOnce[currentIndex] = constructor;\r\n      this.execute(() => {\r\n        const revertConstructor = constructor(this);\r\n        if (isFnc(revertConstructor)) {\r\n          this.revertConstructorsOnce.push(revertConstructor);\r\n        }\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param  {(scope: this) => Tickable} cb\r\n   * @return {Tickable}\r\n   */\r\n  keepTime(cb) {\r\n    this.once = true;\r\n    const currentIndex = this.onceIndex++;\r\n    const tracked = /** @type {(scope: this) => Tickable} */(this.constructorsOnce[currentIndex]);\r\n    if (isFnc(tracked)) return tracked(this);\r\n    const constructor = /** @type {(scope: this) => Tickable} */(createRefreshable(cb));\r\n    this.constructorsOnce[currentIndex] = constructor;\r\n    let trackedTickable;\r\n    this.execute(() => {\r\n      trackedTickable = constructor(this);\r\n    });\r\n    return trackedTickable;\r\n  }\r\n\r\n  /**\r\n   * @param {Event} e\r\n   */\r\n  handleEvent(e) {\r\n    switch (e.type) {\r\n      case 'change':\r\n        this.refresh();\r\n        break;\r\n    }\r\n  }\r\n\r\n  revert() {\r\n    const revertibles = this.revertibles;\r\n    const revertConstructors = this.revertConstructors;\r\n    const revertiblesOnce = this.revertiblesOnce;\r\n    const revertConstructorsOnce = this.revertConstructorsOnce;\r\n    const mqs = this.mediaQueryLists;\r\n    let i = revertibles.length;\r\n    let j = revertConstructors.length;\r\n    let k = revertiblesOnce.length;\r\n    let l = revertConstructorsOnce.length;\r\n    while (i--) revertibles[i].revert();\r\n    while (j--) revertConstructors[j](this);\r\n    while (k--) revertiblesOnce[k].revert();\r\n    while (l--) revertConstructorsOnce[l](this);\r\n    for (let mq in mqs) mqs[mq].removeEventListener('change', this);\r\n    revertibles.length = 0;\r\n    revertConstructors.length = 0;\r\n    this.constructors.length = 0;\r\n    revertiblesOnce.length = 0;\r\n    revertConstructorsOnce.length = 0;\r\n    this.constructorsOnce.length = 0;\r\n    this.onceIndex = 0;\r\n    this.matches = {};\r\n    this.methods = {};\r\n    this.mediaQueryLists = {};\r\n    this.data = {};\r\n  }\r\n}\r\n\r\n/**\r\n * @param {ScopeParams} [params]\r\n * @return {Scope}\r\n */\r\nconst createScope = params => new Scope(params);\r\n\r\n/**\r\n * @typedef {String|Number} ScrollThresholdValue\r\n */\r\n\r\n/**\r\n * @return {Number}\r\n */\r\nconst getMaxViewHeight = () => {\r\n  const $el = doc.createElement('div');\r\n  doc.body.appendChild($el);\r\n  $el.style.height = '100lvh';\r\n  const height = $el.offsetHeight;\r\n  doc.body.removeChild($el);\r\n  return height;\r\n};\r\n\r\n/**\r\n * @template {ScrollThresholdValue|String|Number|Boolean|Function|Object} T\r\n * @param {T | ((observer: ScrollObserver) => T)} value\r\n * @param {ScrollObserver} scroller\r\n * @return {T}\r\n */\r\nconst parseScrollObserverFunctionParameter = (value, scroller) => value && isFnc(value) ? /** @type {Function} */(value)(scroller) : value;\r\n\r\nconst scrollContainers = new Map();\r\n\r\nclass ScrollContainer {\r\n  /**\r\n   * @param {HTMLElement} $el\r\n   */\r\n  constructor($el) {\r\n    /** @type {HTMLElement} */\r\n    this.element = $el;\r\n    /** @type {Boolean} */\r\n    this.useWin = this.element === doc.body;\r\n    /** @type {Number} */\r\n    this.winWidth = 0;\r\n    /** @type {Number} */\r\n    this.winHeight = 0;\r\n    /** @type {Number} */\r\n    this.width = 0;\r\n    /** @type {Number} */\r\n    this.height = 0;\r\n    /** @type {Number} */\r\n    this.left = 0;\r\n    /** @type {Number} */\r\n    this.top = 0;\r\n    /** @type {Number} */\r\n    this.zIndex = 0;\r\n    /** @type {Number} */\r\n    this.scrollX = 0;\r\n    /** @type {Number} */\r\n    this.scrollY = 0;\r\n    /** @type {Number} */\r\n    this.prevScrollX = 0;\r\n    /** @type {Number} */\r\n    this.prevScrollY = 0;\r\n    /** @type {Number} */\r\n    this.scrollWidth = 0;\r\n    /** @type {Number} */\r\n    this.scrollHeight = 0;\r\n    /** @type {Number} */\r\n    this.velocity = 0;\r\n    /** @type {Boolean} */\r\n    this.backwardX = false;\r\n    /** @type {Boolean} */\r\n    this.backwardY = false;\r\n    /** @type {Timer} */\r\n    this.scrollTicker = new Timer({\r\n      autoplay: false,\r\n      onBegin: () => this.dataTimer.resume(),\r\n      onUpdate: () => {\r\n        const backwards = this.backwardX || this.backwardY;\r\n        forEachChildren(this, (/** @type {ScrollObserver} */child) => child.handleScroll(), backwards);\r\n      },\r\n      onComplete: () => this.dataTimer.pause()\r\n    }).init();\r\n    /** @type {Timer} */\r\n    this.dataTimer = new Timer({\r\n      autoplay: false,\r\n      frameRate: 30,\r\n      onUpdate: self => {\r\n        const dt = self.deltaTime;\r\n        const px = this.prevScrollX;\r\n        const py = this.prevScrollY;\r\n        const nx = this.scrollX;\r\n        const ny = this.scrollY;\r\n        const dx = px - nx;\r\n        const dy = py - ny;\r\n        this.prevScrollX = nx;\r\n        this.prevScrollY = ny;\r\n        if (dx) this.backwardX = px > nx;\r\n        if (dy) this.backwardY = py > ny;\r\n        this.velocity = round(dt > 0 ? Math.sqrt(dx * dx + dy * dy) / dt : 0, 5);\r\n      }\r\n    }).init();\r\n    /** @type {Timer} */\r\n    this.resizeTicker = new Timer({\r\n      autoplay: false,\r\n      duration: 250 * globals.timeScale,\r\n      onComplete: () => {\r\n        this.updateWindowBounds();\r\n        this.refreshScrollObservers();\r\n        this.handleScroll();\r\n      }\r\n    }).init();\r\n    /** @type {Timer} */\r\n    this.wakeTicker = new Timer({\r\n      autoplay: false,\r\n      duration: 500 * globals.timeScale,\r\n      onBegin: () => {\r\n        this.scrollTicker.resume();\r\n      },\r\n      onComplete: () => {\r\n        this.scrollTicker.pause();\r\n      }\r\n    }).init();\r\n    /** @type {ScrollObserver} */\r\n    this._head = null;\r\n    /** @type {ScrollObserver} */\r\n    this._tail = null;\r\n    this.updateScrollCoords();\r\n    this.updateWindowBounds();\r\n    this.updateBounds();\r\n    this.refreshScrollObservers();\r\n    this.handleScroll();\r\n    this.resizeObserver = new ResizeObserver(() => this.resizeTicker.restart());\r\n    this.resizeObserver.observe(this.element);\r\n    (this.useWin ? win : this.element).addEventListener('scroll', this, false);\r\n  }\r\n\r\n  updateScrollCoords() {\r\n    const useWin = this.useWin;\r\n    const $el = this.element;\r\n    this.scrollX = round(useWin ? win.scrollX : $el.scrollLeft, 0);\r\n    this.scrollY = round(useWin ? win.scrollY : $el.scrollTop, 0);\r\n  }\r\n\r\n  updateWindowBounds() {\r\n    this.winWidth = win.innerWidth;\r\n    this.winHeight = getMaxViewHeight();\r\n  }\r\n\r\n  updateBounds() {\r\n    const style = getComputedStyle(this.element);\r\n    const $el = this.element;\r\n    this.scrollWidth = $el.scrollWidth + parseFloat(style.marginLeft) + parseFloat(style.marginRight);\r\n    this.scrollHeight = $el.scrollHeight + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\r\n    this.updateWindowBounds();\r\n    let width, height;\r\n    if (this.useWin) {\r\n      width = this.winWidth;\r\n      height = this.winHeight;\r\n    } else {\r\n      const elRect = $el.getBoundingClientRect();\r\n      width = elRect.width;\r\n      height = elRect.height;\r\n      this.top = elRect.top;\r\n      this.left = elRect.left;\r\n    }\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  refreshScrollObservers() {\r\n    forEachChildren(this, (/** @type {ScrollObserver} */child) => {\r\n      if (child._debug) {\r\n        child.removeDebug();\r\n      }\r\n    });\r\n    this.updateBounds();\r\n    forEachChildren(this, (/** @type {ScrollObserver} */child) => {\r\n      child.refresh();\r\n      if (child._debug) {\r\n        child.debug();\r\n      }\r\n    });\r\n  }\r\n\r\n  refresh() {\r\n    this.updateWindowBounds();\r\n    this.updateBounds();\r\n    this.refreshScrollObservers();\r\n    this.handleScroll();\r\n  }\r\n\r\n  handleScroll() {\r\n    this.updateScrollCoords();\r\n    this.wakeTicker.restart();\r\n  }\r\n\r\n  /**\r\n   * @param {Event} e\r\n   */\r\n  handleEvent(e) {\r\n    switch (e.type) {\r\n      case 'scroll':\r\n        this.handleScroll();\r\n        break;\r\n    }\r\n  }\r\n\r\n  revert() {\r\n    this.scrollTicker.cancel();\r\n    this.dataTimer.cancel();\r\n    this.resizeTicker.cancel();\r\n    this.wakeTicker.cancel();\r\n    this.resizeObserver.disconnect();\r\n    (this.useWin ? win : this.element).removeEventListener('scroll', this);\r\n    scrollContainers.delete(this.element);\r\n  }\r\n}\r\n\r\n/**\r\n * @param {TargetsParam} target\r\n * @return {ScrollContainer}\r\n */\r\nconst registerAndGetScrollContainer = target => {\r\n  const $el = /** @type {HTMLElement} */(target ? parseTargets(target)[0] || doc.body : doc.body);\r\n  let scrollContainer = scrollContainers.get($el);\r\n  if (!scrollContainer) {\r\n    scrollContainer = new ScrollContainer($el);\r\n    scrollContainers.set($el, scrollContainer);\r\n  }\r\n  return scrollContainer;\r\n};\r\n\r\n/**\r\n * @param {HTMLElement} $el\r\n * @param {Number|string} v\r\n * @param {Number} size\r\n * @param {Number} [under]\r\n * @param {Number} [over]\r\n * @return {Number}\r\n */\r\nconst convertValueToPx = ($el, v, size, under, over) => {\r\n  const clampMin = v === 'min';\r\n  const clampMax = v === 'max';\r\n  const value = v === 'top' || v === 'left' || v === 'start' || clampMin ? 0 :\r\n                v === 'bottom' || v === 'right' || v === 'end' || clampMax ? '100%' :\r\n                v === 'center' ? '50%' :\r\n                v;\r\n  const { n, u } = decomposeRawValue(value, decomposedOriginalValue);\r\n  let px = n;\r\n  if (u === '%') {\r\n    px = (n / 100) * size;\r\n  } else if (u) {\r\n    px = convertValueUnit($el, decomposedOriginalValue, 'px', true).n;\r\n  }\r\n  if (clampMax && under < 0) px += under;\r\n  if (clampMin && over > 0) px += over;\r\n  return px;\r\n};\r\n\r\n/**\r\n * @param {HTMLElement} $el\r\n * @param {ScrollThresholdValue} v\r\n * @param {Number} size\r\n * @param {Number} [under]\r\n * @param {Number} [over]\r\n * @return {Number}\r\n */\r\nconst parseBoundValue = ($el, v, size, under, over) => {\r\n  /** @type {Number} */\r\n  let value;\r\n  if (isStr(v)) {\r\n    const matchedOperator = relativeValuesExecRgx.exec(/** @type {String} */(v));\r\n    if (matchedOperator) {\r\n      const splitter = matchedOperator[0];\r\n      const operator = splitter[0];\r\n      const splitted = /** @type {String} */(v).split(splitter);\r\n      const clampMin = splitted[0] === 'min';\r\n      const clampMax = splitted[0] === 'max';\r\n      const valueAPx = convertValueToPx($el, splitted[0], size, under, over);\r\n      const valueBPx = convertValueToPx($el, splitted[1], size, under, over);\r\n      if (clampMin) {\r\n        const min = getRelativeValue(convertValueToPx($el, 'min', size), valueBPx, operator);\r\n        value = min < valueAPx ? valueAPx : min;\r\n      } else if (clampMax) {\r\n        const max = getRelativeValue(convertValueToPx($el, 'max', size), valueBPx, operator);\r\n        value = max > valueAPx ? valueAPx : max;\r\n      } else {\r\n        value = getRelativeValue(valueAPx, valueBPx, operator);\r\n      }\r\n    } else {\r\n      value = convertValueToPx($el, v, size, under, over);\r\n    }\r\n  } else {\r\n    value = /** @type {Number} */(v);\r\n  }\r\n  return round(value, 0);\r\n};\r\n\r\n/**\r\n * @param {JSAnimation} linked\r\n * @return {HTMLElement}\r\n */\r\nconst getAnimationDomTarget = linked => {\r\n  let $linkedTarget;\r\n  const linkedTargets = linked.targets;\r\n  for (let i = 0, l = linkedTargets.length; i < l; i++) {\r\n    const target = linkedTargets[i];\r\n    if (target[isDomSymbol]) {\r\n      $linkedTarget = /** @type {HTMLElement} */(target);\r\n      break;\r\n    }\r\n  }\r\n  return $linkedTarget;\r\n};\r\n\r\nlet scrollerIndex = 0;\r\n\r\nconst debugColors$1 = ['#FF4B4B','#FF971B','#FFC730','#F9F640','#7AFF5A','#18FF74','#17E09B','#3CFFEC','#05DBE9','#33B3F1','#638CF9','#C563FE','#FF4FCF','#F93F8A'];\r\n\r\n/**\r\n * @typedef {Object} ScrollThresholdParam\r\n * @property {ScrollThresholdValue} [target]\r\n * @property {ScrollThresholdValue} [container]\r\n */\r\n\r\n/**\r\n * @callback ScrollObserverAxisCallback\r\n * @param {ScrollObserver} self\r\n * @return {'x'|'y'}\r\n */\r\n\r\n/**\r\n * @callback ScrollThresholdCallback\r\n * @param {ScrollObserver} self\r\n * @return {ScrollThresholdValue|ScrollThresholdParam}\r\n */\r\n\r\n/**\r\n * @typedef {Object} ScrollObserverParams\r\n * @property {Number|String} [id]\r\n * @property {Boolean|Number|String|EasingParam} [sync]\r\n * @property {TargetsParam} [container]\r\n * @property {TargetsParam} [target]\r\n * @property {'x'|'y'|ScrollObserverAxisCallback|((observer: ScrollObserver) => 'x'|'y'|ScrollObserverAxisCallback)} [axis]\r\n * @property {ScrollThresholdValue|ScrollThresholdParam|ScrollThresholdCallback|((observer: ScrollObserver) => ScrollThresholdValue|ScrollThresholdParam|ScrollThresholdCallback)} [enter]\r\n * @property {ScrollThresholdValue|ScrollThresholdParam|ScrollThresholdCallback|((observer: ScrollObserver) => ScrollThresholdValue|ScrollThresholdParam|ScrollThresholdCallback)} [leave]\r\n * @property {Boolean|((observer: ScrollObserver) => Boolean)} [repeat]\r\n * @property {Boolean} [debug]\r\n * @property {Callback<ScrollObserver>} [onEnter]\r\n * @property {Callback<ScrollObserver>} [onLeave]\r\n * @property {Callback<ScrollObserver>} [onEnterForward]\r\n * @property {Callback<ScrollObserver>} [onLeaveForward]\r\n * @property {Callback<ScrollObserver>} [onEnterBackward]\r\n * @property {Callback<ScrollObserver>} [onLeaveBackward]\r\n * @property {Callback<ScrollObserver>} [onUpdate]\r\n * @property {Callback<ScrollObserver>} [onSyncComplete]\r\n */\r\n\r\nclass ScrollObserver {\r\n  /**\r\n   * @param {ScrollObserverParams} parameters\r\n   */\r\n  constructor(parameters = {}) {\r\n    if (scope.current) scope.current.register(this);\r\n    const syncMode = setValue(parameters.sync, 'play pause');\r\n    const ease = syncMode ? parseEasings(/** @type {EasingParam} */(syncMode)) : null;\r\n    const isLinear = syncMode && (syncMode === 'linear' || syncMode === none);\r\n    const isEase = syncMode && !(ease === none && !isLinear);\r\n    const isSmooth = syncMode && (isNum(syncMode) || syncMode === true || isLinear);\r\n    const isMethods = syncMode && (isStr(syncMode) && !isEase && !isSmooth);\r\n    const syncMethods = isMethods ? /** @type {String} */(syncMode).split(' ').map(\r\n      (/** @type {String} */m) => () => {\r\n        const linked = this.linked;\r\n        return linked && linked[m] ? linked[m]() : null;\r\n      }\r\n    ) : null;\r\n    const biDirSync = isMethods && syncMethods.length > 2;\r\n    /** @type {Number} */\r\n    this.index = scrollerIndex++;\r\n    /** @type {String|Number} */\r\n    this.id = !isUnd(parameters.id) ? parameters.id : this.index;\r\n    /** @type {ScrollContainer} */\r\n    this.container = registerAndGetScrollContainer(parameters.container);\r\n    /** @type {HTMLElement} */\r\n    this.target = null;\r\n    /** @type {Tickable|WAAPIAnimation} */\r\n    this.linked = null;\r\n    /** @type {Boolean} */\r\n    this.repeat = null;\r\n    /** @type {Boolean} */\r\n    this.horizontal = null;\r\n    /** @type {ScrollThresholdParam|ScrollThresholdValue|ScrollThresholdCallback} */\r\n    this.enter = null;\r\n    /** @type {ScrollThresholdParam|ScrollThresholdValue|ScrollThresholdCallback} */\r\n    this.leave = null;\r\n    /** @type {Boolean} */\r\n    this.sync = isEase || isSmooth || !!syncMethods;\r\n    /** @type {EasingFunction} */\r\n    this.syncEase = isEase ? ease : null;\r\n    /** @type {Number} */\r\n    this.syncSmooth = isSmooth ? syncMode === true || isLinear ? 1 : /** @type {Number} */(syncMode) : null;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onSyncEnter = syncMethods && !biDirSync && syncMethods[0] ? syncMethods[0] : noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onSyncLeave = syncMethods && !biDirSync && syncMethods[1] ? syncMethods[1] : noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onSyncEnterForward = syncMethods && biDirSync && syncMethods[0] ? syncMethods[0] : noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onSyncLeaveForward = syncMethods && biDirSync && syncMethods[1] ? syncMethods[1] : noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onSyncEnterBackward = syncMethods && biDirSync && syncMethods[2] ? syncMethods[2] : noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onSyncLeaveBackward = syncMethods && biDirSync && syncMethods[3] ? syncMethods[3] : noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onEnter = parameters.onEnter || noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onLeave = parameters.onLeave || noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onEnterForward = parameters.onEnterForward || noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onLeaveForward = parameters.onLeaveForward || noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onEnterBackward = parameters.onEnterBackward || noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onLeaveBackward = parameters.onLeaveBackward || noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onUpdate = parameters.onUpdate || noop;\r\n    /** @type {Callback<ScrollObserver>} */\r\n    this.onSyncComplete = parameters.onSyncComplete || noop;\r\n    /** @type {Boolean} */\r\n    this.reverted = false;\r\n    /** @type {Boolean} */\r\n    this.completed = false;\r\n    /** @type {Boolean} */\r\n    this.began = false;\r\n    /** @type {Boolean} */\r\n    this.isInView = false;\r\n    /** @type {Boolean} */\r\n    this.forceEnter = false;\r\n    /** @type {Boolean} */\r\n    this.hasEntered = false;\r\n    // /** @type {Array.<Number>} */\r\n    // this.offsets = [];\r\n    /** @type {Number} */\r\n    this.offset = 0;\r\n    /** @type {Number} */\r\n    this.offsetStart = 0;\r\n    /** @type {Number} */\r\n    this.offsetEnd = 0;\r\n    /** @type {Number} */\r\n    this.distance = 0;\r\n    /** @type {Number} */\r\n    this.prevProgress = 0;\r\n    /** @type {Array} */\r\n    this.thresholds = ['start', 'end', 'end', 'start'];\r\n    /** @type {[Number, Number, Number, Number]} */\r\n    this.coords = [0, 0, 0, 0];\r\n    /** @type {JSAnimation} */\r\n    this.debugStyles = null;\r\n    /** @type {HTMLElement} */\r\n    this.$debug = null;\r\n    /** @type {ScrollObserverParams} */\r\n    this._params = parameters;\r\n    /** @type {Boolean} */\r\n    this._debug = setValue(parameters.debug, false);\r\n    /** @type {ScrollObserver} */\r\n    this._next = null;\r\n    /** @type {ScrollObserver} */\r\n    this._prev = null;\r\n    addChild(this.container, this);\r\n    // Wait for the next frame to add to the container in order to handle calls to link()\r\n    sync(() => {\r\n      if (this.reverted) return;\r\n      if (!this.target) {\r\n        const target = /** @type {HTMLElement} */(parseTargets(parameters.target)[0]);\r\n        this.target = target || doc.body;\r\n        this.refresh();\r\n      }\r\n      if (this._debug) this.debug();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {Tickable|WAAPIAnimation} linked\r\n   */\r\n  link(linked) {\r\n    if (linked) {\r\n      // Make sure to pause the linked object in case it's added later\r\n      linked.pause();\r\n      this.linked = linked;\r\n      // Try to use a target of the linked object if no target parameters specified\r\n      if (!this._params.target) {\r\n        /** @type {HTMLElement} */\r\n        let $linkedTarget;\r\n        if (!isUnd(/** @type {JSAnimation} */(linked).targets)) {\r\n          $linkedTarget = getAnimationDomTarget(/** @type {JSAnimation} */(linked));\r\n        } else {\r\n          forEachChildren(/** @type {Timeline} */(linked), (/** @type {JSAnimation} */child) => {\r\n            if (child.targets && !$linkedTarget) {\r\n              $linkedTarget = getAnimationDomTarget(/** @type {JSAnimation} */(child));\r\n            }\r\n          });\r\n        }\r\n        // Fallback to body if no target found\r\n        this.target = $linkedTarget || doc.body;\r\n        this.refresh();\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  get velocity() {\r\n    return this.container.velocity;\r\n  }\r\n\r\n  get backward() {\r\n    return this.horizontal ? this.container.backwardX : this.container.backwardY;\r\n  }\r\n\r\n  get scroll() {\r\n    return this.horizontal ? this.container.scrollX : this.container.scrollY;\r\n  }\r\n\r\n  get progress() {\r\n    const p = (this.scroll - this.offsetStart) / this.distance;\r\n    return p === Infinity || isNaN(p) ? 0 : round(clamp(p, 0, 1), 6);\r\n  }\r\n\r\n  refresh() {\r\n    this.reverted = false;\r\n    const params = this._params;\r\n    this.repeat = setValue(parseScrollObserverFunctionParameter(params.repeat, this), true);\r\n    this.horizontal = setValue(parseScrollObserverFunctionParameter(params.axis, this), 'y') === 'x';\r\n    this.enter = setValue(parseScrollObserverFunctionParameter(params.enter, this), 'end start');\r\n    this.leave = setValue(parseScrollObserverFunctionParameter(params.leave, this), 'start end');\r\n    this.updateBounds();\r\n    this.handleScroll();\r\n    return this;\r\n  }\r\n\r\n  removeDebug() {\r\n    if (this.$debug) {\r\n      this.$debug.parentNode.removeChild(this.$debug);\r\n      this.$debug = null;\r\n    }\r\n    if (this.debugStyles) {\r\n      this.debugStyles.revert();\r\n      this.$debug = null;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  debug() {\r\n    this.removeDebug();\r\n    const container = this.container;\r\n    const isHori = this.horizontal;\r\n    const $existingDebug = container.element.querySelector(':scope > .animejs-onscroll-debug');\r\n    const $debug = doc.createElement('div');\r\n    const $thresholds = doc.createElement('div');\r\n    const $triggers = doc.createElement('div');\r\n    const color = debugColors$1[this.index % debugColors$1.length];\r\n    const useWin = container.useWin;\r\n    const containerWidth = useWin ? container.winWidth : container.width;\r\n    const containerHeight = useWin ? container.winHeight : container.height;\r\n    const scrollWidth = container.scrollWidth;\r\n    const scrollHeight = container.scrollHeight;\r\n    const size = this.container.width > 360 ? 320 : 260;\r\n    const offLeft = isHori ? 0 : 10;\r\n    const offTop = isHori ? 10 : 0;\r\n    const half = isHori ? 24 : size / 2;\r\n    const labelHeight = isHori ? half : 15;\r\n    const labelWidth = isHori ? 60 : half;\r\n    const labelSize = isHori ? labelWidth : labelHeight;\r\n    const repeat = isHori ? 'repeat-x' : 'repeat-y';\r\n    /**\r\n     * @param {Number} v\r\n     * @return {String}\r\n     */\r\n    const gradientOffset = v => isHori ? '0px '+(v)+'px' : (v)+'px'+' 2px';\r\n    /**\r\n     * @param {String} c\r\n     * @return {String}\r\n     */\r\n    const lineCSS = (c) => `linear-gradient(${isHori ? 90 : 0}deg, ${c} 2px, transparent 1px)`;\r\n    /**\r\n     * @param {String} p\r\n     * @param {Number} l\r\n     * @param {Number} t\r\n     * @param {Number} w\r\n     * @param {Number} h\r\n     * @return {String}\r\n     */\r\n    const baseCSS = (p, l, t, w, h) => `position:${p};left:${l}px;top:${t}px;width:${w}px;height:${h}px;`;\r\n    $debug.style.cssText = `${baseCSS('absolute', offLeft, offTop, isHori ? scrollWidth : size, isHori ? size : scrollHeight)}\r\n      pointer-events: none;\r\n      z-index: ${this.container.zIndex++};\r\n      display: flex;\r\n      flex-direction: ${isHori ? 'column' : 'row'};\r\n      filter: drop-shadow(0px 1px 0px rgba(0,0,0,.75));\r\n    `;\r\n    $thresholds.style.cssText = `${baseCSS('sticky', 0, 0, isHori ? containerWidth : half, isHori ? half : containerHeight)}`;\r\n    if (!$existingDebug) {\r\n      $thresholds.style.cssText += `background:\r\n        ${lineCSS('#FFFF')}${gradientOffset(half-10)} / ${isHori ? '100px 100px' : '100px 100px'} ${repeat},\r\n        ${lineCSS('#FFF8')}${gradientOffset(half-10)} / ${isHori ? '10px 10px' : '10px 10px'} ${repeat};\r\n      `;\r\n    }\r\n    $triggers.style.cssText = `${baseCSS('relative', 0, 0, isHori ? scrollWidth : half, isHori ? half : scrollHeight)}`;\r\n    if (!$existingDebug) {\r\n      $triggers.style.cssText += `background:\r\n        ${lineCSS('#FFFF')}${gradientOffset(0)} / ${isHori ? '100px 10px' : '10px 100px'} ${repeat},\r\n        ${lineCSS('#FFF8')}${gradientOffset(0)} / ${isHori ? '10px 0px' : '0px 10px'} ${repeat};\r\n      `;\r\n    }\r\n    const labels = [' enter: ', ' leave: '];\r\n    this.coords.forEach((v, i) => {\r\n      const isView = i > 1;\r\n      const value = (isView ? 0 : this.offset) + v;\r\n      const isTail = i % 2;\r\n      const isFirst = value < labelSize;\r\n      const isOver = value > (isView ? isHori ? containerWidth : containerHeight : isHori ? scrollWidth : scrollHeight) - labelSize;\r\n      const isFlip = (isView ? isTail && !isFirst : !isTail && !isFirst) || isOver;\r\n      const $label = doc.createElement('div');\r\n      const $text = doc.createElement('div');\r\n      const dirProp = isHori ? isFlip ? 'right' : 'left' : isFlip ? 'bottom' : 'top';\r\n      const flipOffset = isFlip ? (isHori ? labelWidth : labelHeight) + (!isView ? isHori ? -1 : -2 : isHori ? -1 : isOver ? 0 : -2) : !isView ? isHori ? 1 : 0 : isHori ? 1 : 0;\r\n      // $text.innerHTML = `${!isView ? '' : labels[isTail] + ' '}${this.id}: ${this.thresholds[i]} ${isView ? '' : labels[isTail]}`;\r\n      $text.innerHTML = `${this.id}${labels[isTail]}${this.thresholds[i]}`;\r\n      $label.style.cssText = `${baseCSS('absolute', 0, 0, labelWidth, labelHeight)}\r\n        display: flex;\r\n        flex-direction: ${isHori ? 'column' : 'row'};\r\n        justify-content: flex-${isView ? 'start' : 'end'};\r\n        align-items: flex-${isFlip ? 'end' : 'start'};\r\n        border-${dirProp}: 2px ${isTail ? 'solid' : 'solid'} ${color};\r\n      `;\r\n      $text.style.cssText = `\r\n        overflow: hidden;\r\n        max-width: ${(size / 2) - 10}px;\r\n        height: ${labelHeight};\r\n        margin-${isHori ? isFlip ? 'right' : 'left' : isFlip ? 'bottom' : 'top'}: -2px;\r\n        padding: 1px;\r\n        font-family: ui-monospace, monospace;\r\n        font-size: 10px;\r\n        letter-spacing: -.025em;\r\n        line-height: 9px;\r\n        font-weight: 600;\r\n        text-align: ${isHori && isFlip || !isHori && !isView ? 'right' : 'left'};\r\n        white-space: pre;\r\n        text-overflow: ellipsis;\r\n        color: ${isTail ? color : 'rgba(0,0,0,.75)'};\r\n        background-color: ${isTail ? 'rgba(0,0,0,.65)' : color};\r\n        border: 2px solid ${isTail ? color : 'transparent'};\r\n        border-${isHori ? isFlip ? 'top-left' : 'top-right' : isFlip ? 'top-left' : 'bottom-left'}-radius: 5px;\r\n        border-${isHori ? isFlip ? 'bottom-left' : 'bottom-right' : isFlip ? 'top-right' : 'bottom-right'}-radius: 5px;\r\n      `;\r\n      $label.appendChild($text);\r\n      let position = value - flipOffset + (isHori ? 1 : 0);\r\n      $label.style[isHori ? 'left' : 'top'] = `${position}px`;\r\n      // $label.style[isHori ? 'left' : 'top'] = value - flipOffset + (!isFlip && isFirst && !isView ? 1 : isFlip ? 0 : -2) + 'px';\r\n      (isView ? $thresholds : $triggers).appendChild($label);\r\n    });\r\n\r\n    $debug.appendChild($thresholds);\r\n    $debug.appendChild($triggers);\r\n    container.element.appendChild($debug);\r\n\r\n    if (!$existingDebug) $debug.classList.add('animejs-onscroll-debug');\r\n    this.$debug = $debug;\r\n    const containerPosition = getTargetValue(container.element, 'position');\r\n    if (containerPosition === 'static') {\r\n      this.debugStyles = setTargetValues(container.element, { position: 'relative '});\r\n    }\r\n\r\n  }\r\n\r\n  updateBounds() {\r\n    if (this._debug) {\r\n      this.removeDebug();\r\n    }\r\n    let stickys;\r\n    const $target = this.target;\r\n    const container = this.container;\r\n    const isHori = this.horizontal;\r\n    const linked = this.linked;\r\n    let linkedTime;\r\n    let $el = $target;\r\n    // let offsetX = 0;\r\n    // let offsetY = 0;\r\n    // let $offsetParent = $el;\r\n    /** @type {Element} */\r\n    if (linked) {\r\n      linkedTime = linked.currentTime;\r\n      linked.seek(0, true);\r\n    }\r\n    /* Old implementation to get offset and targetSize before fixing https://github.com/juliangarnier/anime/issues/1021\r\n    // const isContainerStatic = getTargetValue(container.element, 'position') === 'static' ? setTargetValues(container.element, { position: 'relative '}) : false;\r\n    // while ($el && $el !== container.element && $el !== doc.body) {\r\n    //   const isSticky = getTargetValue($el, 'position') === 'sticky' ?\r\n    //                    setTargetValues($el, { position: 'static' }) :\r\n    //                    false;\r\n    //   if ($el === $offsetParent) {\r\n    //     offsetX += $el.offsetLeft || 0;\r\n    //     offsetY += $el.offsetTop || 0;\r\n    //     $offsetParent = $el.offsetParent;\r\n    //   }\r\n    //   $el = /** @type {HTMLElement} */($el.parentElement);\r\n    //   if (isSticky) {\r\n    //     if (!stickys) stickys = [];\r\n    //     stickys.push(isSticky);\r\n    //   }\r\n    // }\r\n    // if (isContainerStatic) isContainerStatic.revert();\r\n    // const offset = isHori ? offsetX : offsetY;\r\n    // const targetSize = isHori ? $target.offsetWidth : $target.offsetHeight;\r\n\r\n    while ($el && $el !== container.element && $el !== doc.body) {\r\n      const isSticky = getTargetValue($el, 'position') === 'sticky' ? setTargetValues($el, { position: 'static' }) : false;\r\n      $el = $el.parentElement;\r\n      if (isSticky) {\r\n        if (!stickys) stickys = [];\r\n        stickys.push(isSticky);\r\n      }\r\n    }\r\n    const rect = $target.getBoundingClientRect();\r\n    const offset = isHori ? rect.left + container.scrollX - container.left : rect.top + container.scrollY - container.top;\r\n    const targetSize = isHori ? rect.width : rect.height;\r\n    const containerSize = isHori ? container.width : container.height;\r\n    const scrollSize = isHori ? container.scrollWidth : container.scrollHeight;\r\n    const maxScroll = scrollSize - containerSize;\r\n    const enter = this.enter;\r\n    const leave = this.leave;\r\n\r\n    /** @type {ScrollThresholdValue} */\r\n    let enterTarget = 'start';\r\n    /** @type {ScrollThresholdValue} */\r\n    let leaveTarget = 'end';\r\n    /** @type {ScrollThresholdValue} */\r\n    let enterContainer = 'end';\r\n    /** @type {ScrollThresholdValue} */\r\n    let leaveContainer = 'start';\r\n\r\n    if (isStr(enter)) {\r\n      const splitted = /** @type {String} */(enter).split(' ');\r\n      enterContainer = splitted[0];\r\n      enterTarget = splitted.length > 1 ? splitted[1] : enterTarget;\r\n    } else if (isObj(enter)) {\r\n      const e = /** @type {ScrollThresholdParam} */(enter);\r\n      if (!isUnd(e.container)) enterContainer = e.container;\r\n      if (!isUnd(e.target)) enterTarget = e.target;\r\n    } else if (isNum(enter)) {\r\n      enterContainer = /** @type {Number} */(enter);\r\n    }\r\n\r\n    if (isStr(leave)) {\r\n      const splitted = /** @type {String} */(leave).split(' ');\r\n      leaveContainer = splitted[0];\r\n      leaveTarget = splitted.length > 1 ? splitted[1] : leaveTarget;\r\n    } else if (isObj(leave)) {\r\n      const t = /** @type {ScrollThresholdParam} */(leave);\r\n      if (!isUnd(t.container)) leaveContainer = t.container;\r\n      if (!isUnd(t.target)) leaveTarget = t.target;\r\n    } else if (isNum(leave)) {\r\n      leaveContainer = /** @type {Number} */(leave);\r\n    }\r\n\r\n    const parsedEnterTarget = parseBoundValue($target, enterTarget, targetSize);\r\n    const parsedLeaveTarget = parseBoundValue($target, leaveTarget, targetSize);\r\n    const under = (parsedEnterTarget + offset) - containerSize;\r\n    const over = (parsedLeaveTarget + offset) - maxScroll;\r\n    const parsedEnterContainer = parseBoundValue($target, enterContainer, containerSize, under, over);\r\n    const parsedLeaveContainer = parseBoundValue($target, leaveContainer, containerSize, under, over);\r\n    const offsetStart = parsedEnterTarget + offset - parsedEnterContainer;\r\n    const offsetEnd = parsedLeaveTarget + offset - parsedLeaveContainer;\r\n    const scrollDelta = offsetEnd - offsetStart;\r\n    // this.offsets[0] = offsetX;\r\n    // this.offsets[1] = offsetY;\r\n    this.offset = offset;\r\n    this.offsetStart = offsetStart;\r\n    this.offsetEnd = offsetEnd;\r\n    this.distance = scrollDelta <= 0 ? 0 : scrollDelta;\r\n    this.thresholds = [enterTarget, leaveTarget, enterContainer, leaveContainer];\r\n    this.coords = [parsedEnterTarget, parsedLeaveTarget, parsedEnterContainer, parsedLeaveContainer];\r\n    if (stickys) {\r\n      stickys.forEach(sticky => sticky.revert());\r\n    }\r\n    if (linked) {\r\n      linked.seek(linkedTime, true);\r\n    }\r\n    if (this._debug) {\r\n      this.debug();\r\n    }\r\n  }\r\n\r\n  handleScroll() {\r\n    const linked = this.linked;\r\n    const sync = this.sync;\r\n    const syncEase = this.syncEase;\r\n    const syncSmooth = this.syncSmooth;\r\n    const shouldSeek = linked && (syncEase || syncSmooth);\r\n    const isHori = this.horizontal;\r\n    const container = this.container;\r\n    const scroll = this.scroll;\r\n    const isBefore = scroll <= this.offsetStart;\r\n    const isAfter = scroll >= this.offsetEnd;\r\n    const isInView = !isBefore && !isAfter;\r\n    const isOnTheEdge = scroll === this.offsetStart || scroll === this.offsetEnd;\r\n    const forceEnter = !this.hasEntered && isOnTheEdge;\r\n    const $debug = this._debug && this.$debug;\r\n    let hasUpdated = false;\r\n    let syncCompleted = false;\r\n    let p = this.progress;\r\n\r\n    if (isBefore && this.began) {\r\n      this.began = false;\r\n    }\r\n\r\n    if (p > 0 && !this.began) {\r\n      this.began = true;\r\n    }\r\n\r\n    if (shouldSeek) {\r\n      const lp = linked.progress;\r\n      if (syncSmooth && isNum(syncSmooth)) {\r\n        if (/** @type {Number} */(syncSmooth) < 1) {\r\n          const step = 0.0001;\r\n          const snap = lp < p && p === 1 ? step : lp > p && !p ? -1e-4 : 0;\r\n          p = round(lerp(lp, p, interpolate(.01, .2, /** @type {Number} */(syncSmooth)), false) + snap, 6);\r\n        }\r\n      } else if (syncEase) {\r\n        p = syncEase(p);\r\n      }\r\n      hasUpdated = p !== this.prevProgress;\r\n      syncCompleted = lp === 1;\r\n      if (hasUpdated && !syncCompleted && (syncSmooth && lp)) {\r\n        container.wakeTicker.restart();\r\n      }\r\n    }\r\n\r\n    if ($debug) {\r\n      const sticky = isHori ? container.scrollY : container.scrollX;\r\n      $debug.style[isHori ? 'top' : 'left'] = sticky + 10 + 'px';\r\n    }\r\n\r\n    // Trigger enter callbacks if already in view or when entering the view\r\n    if ((isInView && !this.isInView) || (forceEnter && !this.forceEnter && !this.hasEntered)) {\r\n      if (isInView) this.isInView = true;\r\n      if (!this.forceEnter || !this.hasEntered) {\r\n        if ($debug && isInView) $debug.style.zIndex = `${this.container.zIndex++}`;\r\n        this.onSyncEnter(this);\r\n        this.onEnter(this);\r\n        if (this.backward) {\r\n          this.onSyncEnterBackward(this);\r\n          this.onEnterBackward(this);\r\n        } else {\r\n          this.onSyncEnterForward(this);\r\n          this.onEnterForward(this);\r\n        }\r\n        this.hasEntered = true;\r\n        if (forceEnter) this.forceEnter = true;\r\n      } else if (isInView) {\r\n        this.forceEnter = false;\r\n      }\r\n    }\r\n\r\n    if (isInView || !isInView && this.isInView) {\r\n      hasUpdated = true;\r\n    }\r\n\r\n    if (hasUpdated) {\r\n      if (shouldSeek) linked.seek(linked.duration * p);\r\n      this.onUpdate(this);\r\n    }\r\n\r\n    if (!isInView && this.isInView) {\r\n      this.isInView = false;\r\n      this.onSyncLeave(this);\r\n      this.onLeave(this);\r\n      if (this.backward) {\r\n        this.onSyncLeaveBackward(this);\r\n        this.onLeaveBackward(this);\r\n      } else {\r\n        this.onSyncLeaveForward(this);\r\n        this.onLeaveForward(this);\r\n      }\r\n      if (sync && !syncSmooth) {\r\n        syncCompleted = true;\r\n      }\r\n    }\r\n\r\n    if (p >= 1 && this.began && !this.completed && (sync && syncCompleted || !sync)) {\r\n      if (sync) {\r\n        this.onSyncComplete(this);\r\n      }\r\n      this.completed = true;\r\n      if ((!this.repeat && !linked) || (!this.repeat && linked && linked.completed)) {\r\n        this.revert();\r\n      }\r\n    }\r\n\r\n    if (p < 1 && this.completed) {\r\n      this.completed = false;\r\n    }\r\n\r\n    this.prevProgress = p;\r\n  }\r\n\r\n  revert() {\r\n    if (this.reverted) return;\r\n    const container = this.container;\r\n    removeChild(container, this);\r\n    if (!container._head) {\r\n      container.revert();\r\n    }\r\n    if (this._debug) {\r\n      this.removeDebug();\r\n    }\r\n    this.reverted = true;\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * @param {ScrollObserverParams} [parameters={}]\r\n * @return {ScrollObserver}\r\n */\r\nconst onScroll = (parameters = {}) => new ScrollObserver(parameters);\r\n\r\n\r\n\r\n\r\nconst segmenter = !isUnd(Intl) && Intl.Segmenter;\r\nconst valueRgx = /\\{value\\}/g;\r\nconst indexRgx = /\\{i\\}/g;\r\nconst whiteSpaceGroupRgx = /(\\s+)/;\r\nconst whiteSpaceRgx = /^\\s+$/;\r\nconst lineType = 'line';\r\nconst wordType = 'word';\r\nconst charType = 'char';\r\nconst dataLine = `data-line`;\r\n\r\n/**\r\n * @typedef {Object} Segment\r\n * @property {String} segment\r\n * @property {Boolean} [isWordLike]\r\n */\r\n\r\n/**\r\n * @typedef {Object} Segmenter\r\n * @property {function(String): Iterable<Segment>} segment\r\n */\r\n\r\n/** @type {Segmenter} */\r\nlet wordSegmenter = null;\r\n/** @type {Segmenter} */\r\nlet graphemeSegmenter = null;\r\nlet $splitTemplate = null;\r\n\r\n/**\r\n * @param  {Segment} seg\r\n * @return {Boolean}\r\n */\r\nconst isSegmentWordLike = seg => {\r\n  return seg.isWordLike ||\r\n         seg.segment === ' ' || // Consider spaces as words first, then handle them diffrently later\r\n         isNum(+seg.segment); // Safari doesn't considers numbers as words\r\n};\r\n\r\n/**\r\n * @param {HTMLElement} $el\r\n */\r\nconst setAriaHidden = $el => $el.setAttribute('aria-hidden', 'true');\r\n\r\n/**\r\n * @param {DOMTarget} $el\r\n * @param {String} type\r\n * @return {Array<HTMLElement>}\r\n */\r\nconst getAllTopLevelElements = ($el, type) => [.../** @type {*} */($el.querySelectorAll(`[data-${type}]:not([data-${type}] [data-${type}])`))];\r\n\r\nconst debugColors = { line: '#00D672', word: '#FF4B4B', char: '#5A87FF' };\r\n\r\n/**\r\n * @param {HTMLElement} $el\r\n */\r\nconst filterEmptyElements = $el => {\r\n  if (!$el.childElementCount && !$el.textContent.trim()) {\r\n    const $parent = $el.parentElement;\r\n    $el.remove();\r\n    if ($parent) filterEmptyElements($parent);\r\n  }\r\n};\r\n\r\n/**\r\n * @param {HTMLElement} $el\r\n * @param {Number} lineIndex\r\n * @param {Set<HTMLElement>} bin\r\n * @returns {Set<HTMLElement>}\r\n */\r\nconst filterLineElements = ($el, lineIndex, bin) => {\r\n  const dataLineAttr = $el.getAttribute(dataLine);\r\n  if (dataLineAttr !== null && +dataLineAttr !== lineIndex || $el.tagName === 'BR') bin.add($el);\r\n  let i = $el.childElementCount;\r\n  while (i--) filterLineElements(/** @type {HTMLElement} */($el.children[i]), lineIndex, bin);\r\n  return bin;\r\n};\r\n\r\n/**\r\n * @param  {'line'|'word'|'char'} type\r\n * @param  {splitTemplateParams} params\r\n * @return {String}\r\n */\r\nconst generateTemplate = (type, params = {}) => {\r\n  let template = ``;\r\n  const classString = isStr(params.class) ? ` class=\"${params.class}\"` : '';\r\n  const cloneType = setValue(params.clone, false);\r\n  const wrapType = setValue(params.wrap, false);\r\n  const overflow = wrapType ? wrapType === true ? 'clip' : wrapType : cloneType ? 'clip' : false;\r\n  if (wrapType) template += `<span${overflow ? ` style=\"overflow:${overflow};\"` : ''}>`;\r\n  template += `<span${classString}${cloneType ? ` style=\"position:relative;\"` : ''} data-${type}=\"{i}\">`;\r\n  if (cloneType) {\r\n    const left = cloneType === 'left' ? '-100%' : cloneType === 'right' ? '100%' : '0';\r\n    const top = cloneType === 'top' ? '-100%' : cloneType === 'bottom' ? '100%' : '0';\r\n    template += `<span>{value}</span>`;\r\n    template += `<span inert style=\"position:absolute;top:${top};left:${left};white-space:nowrap;\">{value}</span>`;\r\n  } else {\r\n    template += `{value}`;\r\n  }\r\n  template += `</span>`;\r\n  if (wrapType) template += `</span>`;\r\n  return template;\r\n};\r\n\r\n/**\r\n * @param  {String|SplitFunctionValue} htmlTemplate\r\n * @param  {Array<HTMLElement>} store\r\n * @param  {Node|HTMLElement} node\r\n * @param  {DocumentFragment} $parentFragment\r\n * @param  {'line'|'word'|'char'} type\r\n * @param  {Boolean} debug\r\n * @param  {Number} lineIndex\r\n * @param  {Number} [wordIndex]\r\n * @param  {Number} [charIndex]\r\n * @return {HTMLElement}\r\n */\r\nconst processHTMLTemplate = (htmlTemplate, store, node, $parentFragment, type, debug, lineIndex, wordIndex, charIndex) => {\r\n  const isLine = type === lineType;\r\n  const isChar = type === charType;\r\n  const className = `_${type}_`;\r\n  const template = isFnc(htmlTemplate) ? htmlTemplate(node) : htmlTemplate;\r\n  const displayStyle = isLine ? 'block' : 'inline-block';\r\n  $splitTemplate.innerHTML = template\r\n    .replace(valueRgx, `<i class=\"${className}\"></i>`)\r\n    .replace(indexRgx, `${isChar ? charIndex : isLine ? lineIndex : wordIndex}`);\r\n  const $content = $splitTemplate.content;\r\n  const $highestParent = /** @type {HTMLElement} */($content.firstElementChild);\r\n  const $split = /** @type {HTMLElement} */($content.querySelector(`[data-${type}]`)) || $highestParent;\r\n  const $replacables = /** @type {NodeListOf<HTMLElement>} */($content.querySelectorAll(`i.${className}`));\r\n  const replacablesLength = $replacables.length;\r\n  if (replacablesLength) {\r\n    $highestParent.style.display = displayStyle;\r\n    $split.style.display = displayStyle;\r\n    $split.setAttribute(dataLine, `${lineIndex}`);\r\n    if (!isLine) {\r\n      $split.setAttribute('data-word', `${wordIndex}`);\r\n      if (isChar) $split.setAttribute('data-char', `${charIndex}`);\r\n    }\r\n    let i = replacablesLength;\r\n    while (i--) {\r\n      const $replace = $replacables[i];\r\n      const $closestParent = $replace.parentElement;\r\n      $closestParent.style.display = displayStyle;\r\n      if (isLine) {\r\n        $closestParent.innerHTML = /** @type {HTMLElement} */(node).innerHTML;\r\n      } else {\r\n        $closestParent.replaceChild(node.cloneNode(true), $replace);\r\n      }\r\n    }\r\n    store.push($split);\r\n    $parentFragment.appendChild($content);\r\n  } else {\r\n    console.warn(`The expression \"{value}\" is missing from the provided template.`);\r\n  }\r\n  if (debug) $highestParent.style.outline = `1px dotted ${debugColors[type]}`;\r\n  return $highestParent;\r\n};\r\n\r\n/**\r\n * A class that splits text into words and wraps them in span elements while preserving the original HTML structure.\r\n * @class\r\n */\r\nclass TextSplitter {\r\n  /**\r\n   * @param  {HTMLElement|NodeList|String|Array<HTMLElement>} target\r\n   * @param  {TextSplitterParams} [parameters]\r\n   */\r\n  constructor(target, parameters = {}) {\r\n    // Only init segmenters when needed\r\n    if (!wordSegmenter) wordSegmenter = segmenter ? new segmenter([], { granularity: wordType }) : {\r\n      segment: (text) => {\r\n        const segments = [];\r\n        const words = text.split(whiteSpaceGroupRgx);\r\n        for (let i = 0, l = words.length; i < l; i++) {\r\n          const segment = words[i];\r\n          segments.push({\r\n            segment,\r\n            isWordLike: !whiteSpaceRgx.test(segment), // Consider non-whitespace as word-like\r\n          });\r\n        }\r\n        return segments;\r\n      }\r\n    };\r\n    if (!graphemeSegmenter) graphemeSegmenter = segmenter ? new segmenter([], { granularity: 'grapheme' }) : {\r\n      segment: text => [...text].map(char => ({ segment: char }))\r\n    };\r\n    if (!$splitTemplate && isBrowser) $splitTemplate = doc.createElement('template');\r\n    if (scope.current) scope.current.register(this);\r\n    const { words, chars, lines, accessible, includeSpaces, debug } = parameters;\r\n    const $target = /** @type {HTMLElement} */((target = isArr(target) ? target[0] : target) && /** @type {Node} */(target).nodeType ? target : (getNodeList(target) || [])[0]);\r\n    const lineParams = lines === true ? {} : lines;\r\n    const wordParams = words === true || isUnd(words) ? {} : words;\r\n    const charParams = chars === true ? {} : chars;\r\n    this.debug = setValue(debug, false);\r\n    this.includeSpaces = setValue(includeSpaces, false);\r\n    this.accessible = setValue(accessible, true);\r\n    this.linesOnly = lineParams && (!wordParams && !charParams);\r\n    /** @type {String|false|SplitFunctionValue} */\r\n    this.lineTemplate = isObj(lineParams) ? generateTemplate(lineType, /** @type {splitTemplateParams} */(lineParams)) : lineParams;\r\n    /** @type {String|false|SplitFunctionValue} */\r\n    this.wordTemplate = isObj(wordParams) || this.linesOnly ? generateTemplate(wordType, /** @type {splitTemplateParams} */(wordParams)) : wordParams;\r\n    /** @type {String|false|SplitFunctionValue} */\r\n    this.charTemplate = isObj(charParams) ? generateTemplate(charType, /** @type {splitTemplateParams} */(charParams)) : charParams;\r\n    this.$target = $target;\r\n    this.html = $target && $target.innerHTML;\r\n    this.lines = [];\r\n    this.words = [];\r\n    this.chars = [];\r\n    this.effects = [];\r\n    this.effectsCleanups = [];\r\n    this.cache = null;\r\n    this.ready = false;\r\n    this.width = 0;\r\n    this.resizeTimeout = null;\r\n    const handleSplit = () => this.html && (lineParams || wordParams || charParams) && this.split();\r\n    // Make sure this is declared before calling handleSplit() in case revert() is called inside an effect callback\r\n    this.resizeObserver = new ResizeObserver(() => {\r\n      // Use a setTimeout instead of a Timer for better tree shaking\r\n      clearTimeout(this.resizeTimeout);\r\n      this.resizeTimeout = setTimeout(() => {\r\n        const currentWidth = /** @type {HTMLElement} */($target).offsetWidth;\r\n        if (currentWidth === this.width) return;\r\n        this.width = currentWidth;\r\n        handleSplit();\r\n      }, 150);\r\n    });\r\n    // Only declare the font ready promise when splitting by lines and not alreay split\r\n    if (this.lineTemplate && !this.ready) {\r\n      doc.fonts.ready.then(handleSplit);\r\n    } else {\r\n      handleSplit();\r\n    }\r\n    $target ? this.resizeObserver.observe($target) : console.warn('No Text Splitter target found.');\r\n  }\r\n\r\n  /**\r\n   * @param  {(...args: any[]) => Tickable | (() => void)} effect\r\n   * @return this\r\n   */\r\n  addEffect(effect) {\r\n    if (!isFnc(effect)) return console.warn('Effect must return a function.');\r\n    const refreshableEffect = createRefreshable(effect);\r\n    this.effects.push(refreshableEffect);\r\n    if (this.ready) this.effectsCleanups[this.effects.length - 1] = refreshableEffect(this);\r\n    return this;\r\n  }\r\n\r\n  revert() {\r\n    clearTimeout(this.resizeTimeout);\r\n    this.lines.length = this.words.length = this.chars.length = 0;\r\n    this.resizeObserver.disconnect();\r\n    // Make sure to revert the effects after disconnecting the resizeObserver to avoid triggering it in the process\r\n    this.effectsCleanups.forEach(cleanup => isFnc(cleanup) ? cleanup(this) : cleanup.revert && cleanup.revert());\r\n    this.$target.innerHTML = this.html;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Recursively processes a node and its children\r\n   * @param {Node} node\r\n   */\r\n  splitNode(node) {\r\n    const wordTemplate = this.wordTemplate;\r\n    const charTemplate = this.charTemplate;\r\n    const includeSpaces = this.includeSpaces;\r\n    const debug = this.debug;\r\n    const nodeType = node.nodeType;\r\n    if (nodeType === 3) {\r\n      const nodeText = node.nodeValue;\r\n      // If the nodeText is only whitespace, leave it as is\r\n      if (nodeText.trim()) {\r\n        const tempWords = [];\r\n        const words = this.words;\r\n        const chars = this.chars;\r\n        const wordSegments = wordSegmenter.segment(nodeText);\r\n        const $wordsFragment = doc.createDocumentFragment();\r\n        let prevSeg = null;\r\n        for (const wordSegment of wordSegments) {\r\n          const segment = wordSegment.segment;\r\n          const isWordLike = isSegmentWordLike(wordSegment);\r\n          // Determine if this segment should be a new word, first segment always becomes a new word\r\n          if (!prevSeg || (isWordLike && (prevSeg && (isSegmentWordLike(prevSeg))))) {\r\n            tempWords.push(segment);\r\n          } else {\r\n            // Only concatenate if both current and previous are non-word-like and don't contain spaces\r\n            const lastWordIndex = tempWords.length - 1;\r\n            const lastWord = tempWords[lastWordIndex];\r\n            if (!lastWord.includes(' ') && !segment.includes(' ')) {\r\n              tempWords[lastWordIndex] += segment;\r\n            } else {\r\n              tempWords.push(segment);\r\n            }\r\n          }\r\n          prevSeg = wordSegment;\r\n        }\r\n\r\n        for (let i = 0, l = tempWords.length; i < l; i++) {\r\n          const word = tempWords[i];\r\n          if (!word.trim()) {\r\n            // Preserve whitespace only if includeSpaces is false and if the current space is not the first node\r\n            if (i && includeSpaces) continue;\r\n            $wordsFragment.appendChild(doc.createTextNode(word));\r\n          } else {\r\n            const nextWord = tempWords[i + 1];\r\n            const hasWordFollowingSpace = includeSpaces && nextWord && !nextWord.trim();\r\n            const wordToProcess = word;\r\n            const charSegments = charTemplate ? graphemeSegmenter.segment(wordToProcess) : null;\r\n            const $charsFragment = charTemplate ? doc.createDocumentFragment() : doc.createTextNode(hasWordFollowingSpace ? word + '\\xa0' : word);\r\n            if (charTemplate) {\r\n              const charSegmentsArray = [...charSegments];\r\n              for (let j = 0, jl = charSegmentsArray.length; j < jl; j++) {\r\n                const charSegment = charSegmentsArray[j];\r\n                const isLastChar = j === jl - 1;\r\n                // If this is the last character and includeSpaces is true with a following space, append the space\r\n                const charText = isLastChar && hasWordFollowingSpace ? charSegment.segment + '\\xa0' : charSegment.segment;\r\n                const $charNode = doc.createTextNode(charText);\r\n                processHTMLTemplate(charTemplate, chars, $charNode, /** @type {DocumentFragment} */($charsFragment), charType, debug, -1, words.length, chars.length);\r\n              }\r\n            }\r\n            if (wordTemplate) {\r\n              processHTMLTemplate(wordTemplate, words, $charsFragment, $wordsFragment, wordType, debug, -1, words.length, chars.length);\r\n              // Chars elements must be re-parsed in the split() method if both words and chars are parsed\r\n            } else if (charTemplate) {\r\n              $wordsFragment.appendChild($charsFragment);\r\n            } else {\r\n              $wordsFragment.appendChild(doc.createTextNode(word));\r\n            }\r\n            // Skip the next iteration if we included a space\r\n            if (hasWordFollowingSpace) i++;\r\n          }\r\n        }\r\n        node.parentNode.replaceChild($wordsFragment, node);\r\n      }\r\n    } else if (nodeType === 1) {\r\n      // Converting to an array is necessary to work around childNodes pottential mutation\r\n      const childNodes = /** @type {Array<Node>} */([.../** @type {*} */(node.childNodes)]);\r\n      for (let i = 0, l = childNodes.length; i < l; i++) this.splitNode(childNodes[i]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Boolean} clearCache\r\n   * @return {this}\r\n   */\r\n  split(clearCache = false) {\r\n    const $el = this.$target;\r\n    const isCached = !!this.cache && !clearCache;\r\n    const lineTemplate = this.lineTemplate;\r\n    const wordTemplate = this.wordTemplate;\r\n    const charTemplate = this.charTemplate;\r\n    const fontsReady = doc.fonts.status !== 'loading';\r\n    const canSplitLines = lineTemplate && fontsReady;\r\n    this.ready = !lineTemplate || fontsReady;\r\n    if (canSplitLines || clearCache) {\r\n      // No need to revert effects animations here since it's already taken care by the refreshable\r\n      this.effectsCleanups.forEach(cleanup => isFnc(cleanup) && cleanup(this));\r\n    }\r\n    if (!isCached) {\r\n      if (clearCache) {\r\n        $el.innerHTML = this.html;\r\n        this.words.length = this.chars.length = 0;\r\n      }\r\n      this.splitNode($el);\r\n      this.cache = $el.innerHTML;\r\n    }\r\n    if (canSplitLines) {\r\n      if (isCached) $el.innerHTML = this.cache;\r\n      this.lines.length = 0;\r\n      if (wordTemplate) this.words = getAllTopLevelElements($el, wordType);\r\n    }\r\n    // Always reparse characters after a line reset or if both words and chars are activated\r\n    if (charTemplate && (canSplitLines || wordTemplate)) {\r\n      this.chars = getAllTopLevelElements($el, charType);\r\n    }\r\n    // Words are used when lines only and prioritized over chars\r\n    const elementsArray = this.words.length ? this.words : this.chars;\r\n    let y, linesCount = 0;\r\n    for (let i = 0, l = elementsArray.length; i < l; i++) {\r\n      const $el = elementsArray[i];\r\n      const { top, height } = $el.getBoundingClientRect();\r\n      if (y && top - y > height * .5) linesCount++;\r\n      $el.setAttribute(dataLine, `${linesCount}`);\r\n      const nested = $el.querySelectorAll(`[${dataLine}]`);\r\n      let c = nested.length;\r\n      while (c--) nested[c].setAttribute(dataLine, `${linesCount}`);\r\n      y = top;\r\n    }\r\n    if (canSplitLines) {\r\n      const linesFragment = doc.createDocumentFragment();\r\n      const parents = new Set();\r\n      const clones = [];\r\n      for (let lineIndex = 0; lineIndex < linesCount + 1; lineIndex++) {\r\n        const $clone = /** @type {HTMLElement} */($el.cloneNode(true));\r\n        filterLineElements($clone, lineIndex, new Set()).forEach($el => {\r\n          const $parent = $el.parentElement;\r\n          if ($parent) parents.add($parent);\r\n          $el.remove();\r\n        });\r\n        clones.push($clone);\r\n      }\r\n      parents.forEach(filterEmptyElements);\r\n      for (let cloneIndex = 0, clonesLength = clones.length; cloneIndex < clonesLength; cloneIndex++) {\r\n        processHTMLTemplate(lineTemplate, this.lines, clones[cloneIndex], linesFragment, lineType, this.debug, cloneIndex);\r\n      }\r\n      $el.innerHTML = '';\r\n      $el.appendChild(linesFragment);\r\n      if (wordTemplate) this.words = getAllTopLevelElements($el, wordType);\r\n      if (charTemplate) this.chars = getAllTopLevelElements($el, charType);\r\n    }\r\n    // Remove the word wrappers and clear the words array if lines split only\r\n    if (this.linesOnly) {\r\n      const words = this.words;\r\n      let w = words.length;\r\n      while (w--) {\r\n        const $word = words[w];\r\n        $word.replaceWith($word.textContent);\r\n      }\r\n      words.length = 0;\r\n    }\r\n    if (this.accessible && (canSplitLines || !isCached)) {\r\n      const $accessible = doc.createElement('span');\r\n      // Make the accessible element visually-hidden (https://www.scottohara.me/blog/2017/04/14/inclusively-hidden.html)\r\n      $accessible.style.cssText = `position:absolute;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;white-space:nowrap;`;\r\n      // $accessible.setAttribute('tabindex', '-1');\r\n      $accessible.innerHTML = this.html;\r\n      $el.insertBefore($accessible, $el.firstChild);\r\n      this.lines.forEach(setAriaHidden);\r\n      this.words.forEach(setAriaHidden);\r\n      this.chars.forEach(setAriaHidden);\r\n    }\r\n    this.width = /** @type {HTMLElement} */($el).offsetWidth;\r\n    if (canSplitLines || clearCache) {\r\n      this.effects.forEach((effect, i) => this.effectsCleanups[i] = effect(this));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  refresh() {\r\n    this.split(true);\r\n  }\r\n}\r\n\r\n/**\r\n * @param  {HTMLElement|NodeList|String|Array<HTMLElement>} target\r\n * @param  {TextSplitterParams} [parameters]\r\n * @return {TextSplitter}\r\n */\r\nconst split = (target, parameters) => new TextSplitter(target, parameters);\r\n\r\nconst text = {\r\n  split,\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * @param  {Number|String|[Number|String,Number|String]} val\r\n * @param  {StaggerParams} params\r\n * @return {StaggerFunction}\r\n */\r\nconst stagger = (val, params = {}) => {\r\n  let values = [];\r\n  let maxValue = 0;\r\n  const from = params.from;\r\n  const reversed = params.reversed;\r\n  const ease = params.ease;\r\n  const hasEasing = !isUnd(ease);\r\n  const hasSpring = hasEasing && !isUnd(/** @type {Spring} */(ease).ease);\r\n  const staggerEase = hasSpring ? /** @type {Spring} */(ease).ease : hasEasing ? parseEasings(ease) : null;\r\n  const grid = params.grid;\r\n  const axis = params.axis;\r\n  const customTotal = params.total;\r\n  const fromFirst = isUnd(from) || from === 0 || from === 'first';\r\n  const fromCenter = from === 'center';\r\n  const fromLast = from === 'last';\r\n  const fromRandom = from === 'random';\r\n  const isRange = isArr(val);\r\n  const useProp = params.use;\r\n  const val1 = isRange ? parseNumber(val[0]) : parseNumber(val);\r\n  const val2 = isRange ? parseNumber(val[1]) : 0;\r\n  const unitMatch = unitsExecRgx.exec((isRange ? val[1] : val) + emptyString);\r\n  const start = params.start || 0 + (isRange ? val1 : 0);\r\n  let fromIndex = fromFirst ? 0 : isNum(from) ? from : 0;\r\n  return (target, i, t, tl) => {\r\n    const [ registeredTarget ] = registerTargets(target);\r\n    const total = isUnd(customTotal) ? t : customTotal;\r\n    const customIndex = !isUnd(useProp) ? isFnc(useProp) ? useProp(registeredTarget, i, total) : getOriginalAnimatableValue(registeredTarget, useProp) : false;\r\n    const staggerIndex = isNum(customIndex) || isStr(customIndex) && isNum(+customIndex) ? +customIndex : i;\r\n    if (fromCenter) fromIndex = (total - 1) / 2;\r\n    if (fromLast) fromIndex = total - 1;\r\n    if (!values.length) {\r\n      for (let index = 0; index < total; index++) {\r\n        if (!grid) {\r\n          values.push(abs(fromIndex - index));\r\n        } else {\r\n          const fromX = !fromCenter ? fromIndex % grid[0] : (grid[0] - 1) / 2;\r\n          const fromY = !fromCenter ? floor(fromIndex / grid[0]) : (grid[1] - 1) / 2;\r\n          const toX = index % grid[0];\r\n          const toY = floor(index / grid[0]);\r\n          const distanceX = fromX - toX;\r\n          const distanceY = fromY - toY;\r\n          let value = sqrt(distanceX * distanceX + distanceY * distanceY);\r\n          if (axis === 'x') value = -distanceX;\r\n          if (axis === 'y') value = -distanceY;\r\n          values.push(value);\r\n        }\r\n        maxValue = max(...values);\r\n      }\r\n      if (staggerEase) values = values.map(val => staggerEase(val / maxValue) * maxValue);\r\n      if (reversed) values = values.map(val => axis ? (val < 0) ? val * -1 : -val : abs(maxValue - val));\r\n      if (fromRandom) values = shuffle(values);\r\n    }\r\n    const spacing = isRange ? (val2 - val1) / maxValue : val1;\r\n    const offset = tl ? parseTimelinePosition(tl, isUnd(params.start) ? tl.iterationDuration : start) : /** @type {Number} */(start);\r\n    /** @type {String|Number} */\r\n    let output = offset + ((spacing * round(values[staggerIndex], 2)) || 0);\r\n    if (params.modifier) output = params.modifier(output);\r\n    if (unitMatch) output = `${output}${unitMatch[2]}`;\r\n    return output;\r\n  }\r\n};\r\n\r\nexport { Animatable, Draggable, JSAnimation, Scope, ScrollObserver, Spring, TextSplitter, Timeline, Timer, WAAPIAnimation, animate, createAnimatable, createDraggable, createScope, createSpring, createTimeline, createTimer, eases, engine, onScroll, scrollContainers, stagger, svg, text, utils, waapi };\r\n"],
  "mappings": "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",
  "names": ["max", "key", "lookups", "engine", "nodeList", "value", "steps", "split", "keyframes", "hasSpring", "to", "tween", "sync", "snap", "text", "words", "$el", "maxValue", "val"]
}
